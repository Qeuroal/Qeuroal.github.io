<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/avatar.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.24/fancybox/fancybox.css" integrity="sha256-vQkngPS8jiHHH0I6ABTZroZk8NPZ7b+MUReOFE9UsXQ=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"qeuroal.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="概览">
<meta property="og:type" content="article">
<meta property="og:title" content="217. lua">
<meta property="og:url" content="http://qeuroal.top/2024/11/16/217/index.html">
<meta property="og:site_name" content="Qeuroal&#39;s Blog">
<meta property="og:description" content="概览">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-11-15T16:00:00.000Z">
<meta property="article:modified_time" content="2025-10-01T23:18:39.603Z">
<meta property="article:author" content="Qeuroal">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://qeuroal.top/2024/11/16/217/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://qeuroal.top/2024/11/16/217/","path":"2024/11/16/217/","title":"217. lua"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>217. lua | Qeuroal's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Qeuroal's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">静幽正治</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9D%E8%AF%86Lua"><span class="nav-number">1.1.</span> <span class="nav-text">初识Lua</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-Lua-%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.2.</span> <span class="nav-text">第一个 Lua 程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%95%B0%E6%8D%AE"><span class="nav-number">1.3.</span> <span class="nav-text">输出数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A"><span class="nav-number">1.4.</span> <span class="nav-text">代码注释</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%98%E9%87%8F"><span class="nav-number">2.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.1.</span> <span class="nav-text">数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#number%E5%8F%98%E9%87%8F"><span class="nav-number">2.2.</span> <span class="nav-text">number变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%86%E8%A7%A3nil"><span class="nav-number">2.3.</span> <span class="nav-text">了解nil</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.4.</span> <span class="nav-text">赋值语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%A4%E6%8D%A2%E5%8F%98%E9%87%8F"><span class="nav-number">2.5.</span> <span class="nav-text">交换变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E5%8F%98%E9%87%8F"><span class="nav-number">2.6.</span> <span class="nav-text">输出变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.7.</span> <span class="nav-text">算数运算符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">3.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#string%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="nav-number">3.1.</span> <span class="nav-text">string类型变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6"><span class="nav-number">3.2.</span> <span class="nav-text">转义字符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string%E6%8B%BC%E6%8E%A5"><span class="nav-number">3.3.</span> <span class="nav-text">string拼接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#number%E8%BD%ACstring"><span class="nav-number">3.4.</span> <span class="nav-text">number转string</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string%E8%BD%ACnumber"><span class="nav-number">3.5.</span> <span class="nav-text">string转number</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="nav-number">4.</span> <span class="nav-text">逻辑运算</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E5%9E%8B%E5%92%8C%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97"><span class="nav-number">4.1.</span> <span class="nav-text">布尔型和比较运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.2.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A3%80%E9%AA%8C%E5%A4%A7%E5%B0%8F%EF%BC%88%E8%87%AA%E6%B5%8B%E9%A2%98%EF%BC%89"><span class="nav-number">4.3.</span> <span class="nav-text">检验大小（自测题）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E5%88%A4%E6%96%AD"><span class="nav-number">5.</span> <span class="nav-text">分支判断</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="nav-number">5.1.</span> <span class="nav-text">条件判断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="nav-number">5.2.</span> <span class="nav-text">多条件判断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E4%B8%89%E8%A7%92%E5%BD%A2%E5%90%88%E6%B3%95%E6%80%A7%EF%BC%88%E8%87%AA%E6%B5%8B%E9%A2%98%EF%BC%89"><span class="nav-number">5.3.</span> <span class="nav-text">判断三角形合法性（自测题）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#if%E7%9A%84%E5%88%A4%E6%96%AD%E4%BE%9D%E6%8D%AE%EF%BC%88%E8%87%AA%E6%B5%8B%E9%A2%98%EF%BC%89"><span class="nav-number">5.4.</span> <span class="nav-text">if的判断依据（自测题）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">6.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9D%E8%AF%86%E5%87%BD%E6%95%B0"><span class="nav-number">6.1.</span> <span class="nav-text">初识函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#local%E5%8F%98%E9%87%8F"><span class="nav-number">6.2.</span> <span class="nav-text">local变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-number">6.3.</span> <span class="nav-text">函数参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">6.4.</span> <span class="nav-text">函数返回值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E4%B8%89%E8%A7%92%E5%BD%A2%E5%90%88%E6%B3%95%E6%80%A72%EF%BC%88%E8%87%AA%E6%B5%8B%E9%A2%98%EF%BC%89"><span class="nav-number">6.5.</span> <span class="nav-text">判断三角形合法性2（自测题）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E5%A4%9A%E4%B8%AA%E5%80%BC%EF%BC%88%E8%87%AA%E6%B5%8B%E9%A2%98%EF%BC%89"><span class="nav-number">6.6.</span> <span class="nav-text">返回多个值（自测题）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#table"><span class="nav-number">7.</span> <span class="nav-text">table</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A4%E8%AF%86%E6%95%B0%E7%BB%84"><span class="nav-number">7.1.</span> <span class="nav-text">认识数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E5%8D%95table"><span class="nav-number">7.2.</span> <span class="nav-text">简单table</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#table%E4%B8%8B%E6%A0%87"><span class="nav-number">7.3.</span> <span class="nav-text">table下标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E6%A0%87%E8%BF%9B%E9%98%B6"><span class="nav-number">7.4.</span> <span class="nav-text">下标进阶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#table%E5%B0%8F%E6%B5%8B%E9%AA%8C"><span class="nav-number">7.5.</span> <span class="nav-text">table小测验</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#table%E5%B0%8F%E6%B5%8B%E9%AA%8C2"><span class="nav-number">7.6.</span> <span class="nav-text">table小测验2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lua%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E4%B8%8Etable"><span class="nav-number">7.7.</span> <span class="nav-text">Lua全局变量与table</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#table%E5%B0%8F%E6%B5%8B%E8%AF%953"><span class="nav-number">7.8.</span> <span class="nav-text">table小测试3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#table-concat"><span class="nav-number">7.9.</span> <span class="nav-text">table.concat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#table%E5%88%A0%E5%87%8F"><span class="nav-number">7.10.</span> <span class="nav-text">table删减</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF"><span class="nav-number">8.</span> <span class="nav-text">循环</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#while%E5%BE%AA%E7%8E%AF"><span class="nav-number">8.1.</span> <span class="nav-text">while循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for%E5%BE%AA%E7%8E%AF"><span class="nav-number">8.2.</span> <span class="nav-text">for循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E5%BE%AA%E7%8E%AF"><span class="nav-number">8.3.</span> <span class="nav-text">中断循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E6%B5%8B%E8%AF%95%E9%A2%981%EF%BC%88%E8%87%AA%E6%B5%8B%E9%A2%98%EF%BC%89"><span class="nav-number">8.4.</span> <span class="nav-text">循环测试题1（自测题）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E6%B5%8B%E8%AF%95%E9%A2%982%EF%BC%88%E8%87%AA%E6%B5%8B%E9%A2%98%EF%BC%89"><span class="nav-number">8.5.</span> <span class="nav-text">循环测试题2（自测题）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E6%B5%8B%E8%AF%95%E9%A2%983%EF%BC%88%E8%87%AA%E6%B5%8B%E9%A2%98%EF%BC%89"><span class="nav-number">8.6.</span> <span class="nav-text">循环测试题3（自测题）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E6%B5%8B%E8%AF%95%E9%A2%984%EF%BC%88%E8%87%AA%E6%B5%8B%E9%A2%98%EF%BC%89"><span class="nav-number">8.7.</span> <span class="nav-text">循环测试题4（自测题）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%A6%E8%A7%A3string%E5%BA%93"><span class="nav-number">9.</span> <span class="nav-text">详解string库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#string-sub"><span class="nav-number">9.1.</span> <span class="nav-text">string.sub</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string-rep"><span class="nav-number">9.2.</span> <span class="nav-text">string.rep</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string-len"><span class="nav-number">9.3.</span> <span class="nav-text">string.len</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2"><span class="nav-number">9.4.</span> <span class="nav-text">大小写转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string-format"><span class="nav-number">9.5.</span> <span class="nav-text">string.format</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="nav-number">9.6.</span> <span class="nav-text">string的本质</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string-char"><span class="nav-number">9.7.</span> <span class="nav-text">string.char</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string-byte"><span class="nav-number">9.8.</span> <span class="nav-text">string.byte</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string-find"><span class="nav-number">9.9.</span> <span class="nav-text">string.find</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string-gsub"><span class="nav-number">9.10.</span> <span class="nav-text">string.gsub</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9%E7%AD%89%E5%BE%85%E6%9B%B4%E6%96%B0"><span class="nav-number">9.11.</span> <span class="nav-text">正则匹配相关内容等待更新</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B7%A8%E6%96%87%E4%BB%B6%E8%B0%83%E7%94%A8"><span class="nav-number">10.</span> <span class="nav-text">跨文件调用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BE%85%E6%B7%BB%E5%8A%A0"><span class="nav-number">11.</span> <span class="nav-text">待添加</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Qeuroal"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Qeuroal</p>
  <div class="site-description" itemprop="description">大人者，不失其赤子之心</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">182</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Qeuroal" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Qeuroal" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2024/11/16/217/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="217. lua | Qeuroal's Blog">
      <meta itemprop="description" content="概览">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          217. lua
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-16 00:00:00" itemprop="dateCreated datePublished" datetime="2024-11-16T00:00:00+08:00">2024-11-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-02 07:18:39" itemprop="dateModified" datetime="2025-10-02T07:18:39+08:00">2025-10-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/lua/" itemprop="url" rel="index"><span itemprop="name">lua</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">概览</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="初识Lua"><a href="#初识Lua" class="headerlink" title="初识Lua"></a>初识Lua</h2><p>Lua 是一种轻量小巧的脚本语言，它用标准C语言编写并以源代码形式开放。这意味着什么呢？这意味着Lua虚拟机可以<strong>很方便的嵌入别的程序里</strong>，从而为应用程序提供灵活的扩展和定制功能。而整个Lua虚拟机编译后仅仅一百余K，经过适当的裁剪还能做到更小，十分适合嵌入式的开发。</p>
<p>同时，在目前脚本引擎中，Lua的运行速度占有绝对优势。这些都决定了Lua是作为嵌入式脚本的最佳选择。</p>
<p>在我们编写代码之前，需要做一下准备，就是：<strong>确保你输入标点符号时，用的不是中文输入法。</strong></p>
<hr>
<h2 id="第一个-Lua-程序"><a href="#第一个-Lua-程序" class="headerlink" title="第一个 Lua 程序"></a>第一个 Lua 程序</h2><p>几乎所有语言的第一行代码，都是输出<code>hello world</code>，本教程也不意外。</p>
<p>在<code>Lua</code>中，打印结果只需要使用<code>print</code>这个<code>函数</code>即可。同时，如果需要使用<code>函数</code>，只需要在函数名后加上双括号，同时传入你想传入的值即可。</p>
<p>所以，我们来执行下面的代码，打印出<code>hello world</code>吧！</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello world!&quot;</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="输出数据"><a href="#输出数据" class="headerlink" title="输出数据"></a>输出数据</h2><p>上一部分，我们知道了，在<code>Lua</code>中，可以使用<code>print</code>函数来打印你想要得到的结果。</p>
<p>并且还知道了，<code>函数</code>是指可以实现某些功能的子程序，可以使用<code>函数名(参数)</code>来执行。</p>
<p>让我们试着输出一些其他东西吧！使用多个print函数，输出自己想输出的数据。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;测试&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;aabcdefg&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;xxxxx&quot;</span>,<span class="string">&quot;第二个参数&quot;</span>,<span class="string">&quot;第三个参数&quot;</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="代码注释"><a href="#代码注释" class="headerlink" title="代码注释"></a>代码注释</h2><p>代码<code>注释</code>就是在代码里，不会运行的部分。<code>注释</code>完全不会被运行。</p>
<p>这部分是为了在查看代码时，可以更好地立即现有代码含义用的。</p>
<p>我们可以用<code>--</code>开头，来写一段<code>单行注释</code></p>
<p>也可以用<code>--[[</code>开头，<code>]]</code>结尾，写一段多行注释。</p>
<p>下面是注释的例子：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;这段代码会运行&quot;</span>)</span><br><span class="line"><span class="comment">--print(&quot;我被注释掉了，所以不会运行&quot;)</span></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">    我是多行注释</span></span><br><span class="line"><span class="comment">    不管我写多少行</span></span><br><span class="line"><span class="comment">    都不会影响代码运行</span></span><br><span class="line"><span class="comment">]]</span></span><br></pre></td></tr></table></figure>

<hr>
<blockquote>
<p> 视频教程: <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1vf4y1L7Rb/?spm_id_from=888.80997.embed_other.whitelist&t=4.42559&bvid=BV1vf4y1L7Rb">基础教程</a>，学完入门教程后，可以继续学习<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1WR4y1E7ud">进阶教程</a></p>
</blockquote>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>nil</td>
<td>是一个空值</td>
</tr>
<tr>
<td>boolea</td>
<td>false、true</td>
</tr>
<tr>
<td>number</td>
<td>表示双精度的浮点数</td>
</tr>
<tr>
<td>string</td>
<td>字符串，由一堆双引号或者单引号包围</td>
</tr>
<tr>
<td>function</td>
<td>由C或者Lua编写的函数</td>
</tr>
<tr>
<td>userdate</td>
<td>表示任意存储在变量中的C数据结构</td>
</tr>
<tr>
<td>thread</td>
<td>表示执行的独立线程，用于执行协同程序</td>
</tr>
<tr>
<td>table</td>
<td>Lua中的表是一个关联数组，数组的索引可以是数字或者字符串。最简单的表是{}，表示是一个空表</td>
</tr>
</tbody></table>
<h2 id="number变量"><a href="#number变量" class="headerlink" title="number变量"></a>number变量</h2><p><code>变量</code>，可以看作是一个桶，在里面装你想要装的内容。这些内容可以是Lua包含的所有合法类型。</p>
<p>例如：我想要新建一个桶，名叫bucket，在里面放入233这个数字，就可以像下面一样：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bucket = <span class="number">233</span></span><br></pre></td></tr></table></figure>

<p>让我们试着自己新建几个变量吧！</p>
<ul>
<li>新建变量year，并将变量的值设置为1926</li>
<li>新建变量month，并将变量的值设置为8</li>
<li>新建变量day，并将变量的值设置为7</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--新建三个变量，并赋值</span></span><br><span class="line">year = <span class="number">1926</span></span><br><span class="line">month = <span class="number">8</span></span><br><span class="line">day = <span class="number">7</span></span><br><span class="line"><span class="comment">--打印出三个变量的值</span></span><br><span class="line"><span class="built_in">print</span>(year,month,day)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="了解nil"><a href="#了解nil" class="headerlink" title="了解nil"></a>了解nil</h2><p><code>nil</code>类型表示没有任何有效值，只要是没有声明的值，它就是<code>nil</code></p>
<p>比如我打印一个没有声明的值，便会输出<code>nil</code>：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ccc = <span class="number">233</span></span><br><span class="line"><span class="built_in">print</span>(ccc)</span><br><span class="line"><span class="built_in">print</span>(aaa)</span><br></pre></td></tr></table></figure>

<p><strong>这里需要你思考一下，运行以下代码，将会输出什么结果？</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="string">&#x27;2&#x27;</span></span><br><span class="line">c = a</span><br><span class="line"><span class="built_in">print</span>(a,b,c,d)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="赋值语句"><a href="#赋值语句" class="headerlink" title="赋值语句"></a>赋值语句</h2><p><code>赋值</code>是改变一个变量值的最基本的方法。</p>
<p>如下面一样，使用<code>等号</code>对<code>左边</code>的<code>变量</code>进行赋值</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">2</span></span><br><span class="line">n = <span class="number">3</span></span><br><span class="line">n = n + <span class="number">1</span></span><br><span class="line">b = n</span><br></pre></td></tr></table></figure>

<p><code>Lua</code>可以对多个变量同时赋值，变量用<code>逗号</code>分开，<code>赋值</code>语句<code>右边的值</code>会依次赋给<code>左边的变量</code>。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">1</span></span><br><span class="line">a, b = <span class="number">10</span>, <span class="number">2</span>*n</span><br></pre></td></tr></table></figure>

<p>当左右值的数量不一致时，Lua会进行下面的设定：</p>
<ul>
<li>变量个数 &gt; 值的个数：按变量个数补足nil</li>
<li>变量个数 &lt; 值的个数：多余的值会被忽略</li>
</ul>
<p>下面的例子可以展示这种设定：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a, b, c = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(a,b,c)</span><br><span class="line"><span class="comment">--输出0   1   nil</span></span><br><span class="line"></span><br><span class="line">a, b = a+<span class="number">1</span>, b+<span class="number">1</span>, b+<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(a,b)</span><br><span class="line"><span class="comment">--输出1   2</span></span><br><span class="line"></span><br><span class="line">a, b, c = <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>(a,b,c)</span><br><span class="line"><span class="comment">--输出0   nil   nil</span></span><br></pre></td></tr></table></figure>

<p><strong>这里需要你思考一下，运行以下代码，将会输出什么结果？</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a,b,c = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line">a,c = a+<span class="number">1</span>,b</span><br><span class="line">d = c,b</span><br><span class="line"><span class="built_in">print</span>(a,b,c,d)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="交换变量"><a href="#交换变量" class="headerlink" title="交换变量"></a>交换变量</h2><p>这部分需要你自己完成一个任务：</p>
<p>已知下面的代码，并且已知<code>a</code>和<code>b</code>的值，请在交换他们的值，使打印输出<code>12  34</code></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">34</span></span><br><span class="line">b = <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--你需要在这里进行交换变量的操作</span></span><br><span class="line"><span class="comment">--提示：新建一个变量来存放临时的值</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a,b)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="输出变量"><a href="#输出变量" class="headerlink" title="输出变量"></a>输出变量</h2><p>我们已经知道了，在Lua中，可以使用print函数来打印你想要得到的结果。</p>
<p>同时在上一节，我们学会了新建变量和设置变量的值。</p>
<p>让我们试着输出某个变量吧！使用<code>print函数</code>，输出已知变量。 我们已知变量<code>num</code>为某个数字，试着输出它的值吧！</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">123</span></span><br><span class="line"><span class="comment">--请补全代码，输出num的值</span></span><br><span class="line"><span class="built_in">print</span>(你要在这里填东西)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h2><p>运算符是一个特殊的符号，用于告诉解释器执行特定的数学或逻辑运算。</p>
<p>上一节中，新建的数字变量，我们称之为<code>number</code>类型的变量。</p>
<p>本节我们来学习使用<code>算术运算符</code>，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+ 加法</span><br><span class="line">- 减法</span><br><span class="line">* 乘法</span><br><span class="line">/ 除法</span><br><span class="line">% 取余，求出除法的余数</span><br><span class="line">^ 乘幂，计算次方</span><br><span class="line">- 负号，取负值</span><br></pre></td></tr></table></figure>

<p>我们可以通过以下实例来理解算术运算符的应用：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">21</span></span><br><span class="line">b = <span class="number">10</span></span><br><span class="line">c = a + b</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a + b 的值为 &#x27;</span>, c )</span><br><span class="line">c = a - b</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a - b 的值为 &#x27;</span>, c )</span><br><span class="line">c = a * b</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a * b 的值为 &#x27;</span>, c )</span><br><span class="line">c = a / b</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a / b 的值为 &#x27;</span>, c )</span><br><span class="line">c = a % b</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a % b 的值为 &#x27;</span>, c )</span><br><span class="line">c = a^<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a^2 的值为 &#x27;</span>, c )</span><br><span class="line">c = -a</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-a 的值为 &#x27;</span>, c )</span><br><span class="line">c = a * (b - a)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a * (b - a) 的值为 &#x27;</span>, c )</span><br></pre></td></tr></table></figure>

<p><strong>你需要完成下面的任务：</strong></p>
<p>已知，一个长方体的长宽高分别为a、b、c（单位米），且这个物体重量为m（单位克）</p>
<p>请打印出物体的密度（单位g&#x2F;m³）</p>
<p>注：密度计算公式 密度 &#x3D; 质量 &#x2F; 体积</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a,b,c = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span> <span class="comment">--长宽高</span></span><br><span class="line">m = <span class="number">10</span>        <span class="comment">--重量</span></span><br><span class="line"><span class="comment">--请打印出物体的密度</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><h2 id="string类型变量"><a href="#string类型变量" class="headerlink" title="string类型变量"></a>string类型变量</h2><p><code>字符串</code>（即<code>string</code>），就是一串文本数据，可以存储你要的文本。</p>
<p>在第二节中，<code>print</code>出的数据就是一个字符串。</p>
<p>Lua 语言中字符串可以使用以下三种方式来表示：</p>
<ol>
<li>单引号间的一串字符</li>
<li>双引号间的一串字符</li>
<li>[[和]]间的一串字符</li>
</ol>
<p>你可以参考下面的例子来深入理解：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--双引号间的一串字符</span></span><br><span class="line">str1 = <span class="string">&quot;Lua&quot;</span></span><br><span class="line"><span class="comment">--单引号间的一串字符</span></span><br><span class="line">str2 = <span class="string">&#x27;Lua&#x27;</span></span><br><span class="line"><span class="comment">--[[和]]</span><span class="comment">--间的一串字符</span></span><br><span class="line">str3 = <span class="string">[[Lua]]</span></span><br><span class="line">str4 = <span class="string">[[使用双括号时，甚至能包含换行数据</span></span><br><span class="line"><span class="string">换行了</span></span><br><span class="line"><span class="string">最后一行]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--输出所有字符串</span></span><br><span class="line"><span class="built_in">print</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(str2)</span><br><span class="line"><span class="built_in">print</span>(str3)</span><br><span class="line"><span class="built_in">print</span>(str4)</span><br></pre></td></tr></table></figure>

<p><strong>接下来你需要完成下面的练习：</strong></p>
<p>新建三个变量<code>s1</code>、<code>s2</code>、<code>s3</code></p>
<p>分别存入字符串数据：<code>str</code>、<code>abc</code>、<code>233</code>，使输出打印正确</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--请在空白处补全代码</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;s1,s2,s3的值：&quot;</span>,s1,s2,s3)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;s1,s2,s3的类型：&quot;</span>,<span class="built_in">type</span>(s1),<span class="built_in">type</span>(s2),<span class="built_in">type</span>(s3))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h2><p>在上一节中，我们学习了如何声明字符串。</p>
<p>但是我们有时候会遇到一些特殊的问题，如：<strong>如何输出单引号和双引号？如何输出回车换行？</strong></p>
<p>也许我们可以用下面的方式简单规避，输出单引号时，声明字符串用双引号括起来，像下面这样</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;&#x27;&quot;</span></span><br></pre></td></tr></table></figure>

<p>同理，输出双引号时，声明字符串用单引号括起来，像下面这样</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&#x27;&quot;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>但是，这样会出现一个问题：如何同时显示单引号和双引号？这里就需要<code>转义字符</code>登场了。</p>
<p>转义字符用于表示不能直接显示的字符，比如后退键、回车键、等。</p>
<p>以 <code>\</code> 开头的都是转义字符，下面时常用的转义字符格式：</p>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>\n</td>
<td>换行(LF),将当前位置移到下一行开头</td>
</tr>
<tr>
<td>\r</td>
<td>回车(CR),将当前位置移到本行开头</td>
</tr>
<tr>
<td>\\</td>
<td>反斜杠字符\</td>
</tr>
<tr>
<td>&#39;</td>
<td>单引号</td>
</tr>
<tr>
<td>&quot;</td>
<td>双引号</td>
</tr>
<tr>
<td>\0</td>
<td>空字符(NULL)</td>
</tr>
<tr>
<td>\ddd</td>
<td>1到3位八进制数所代表的任意字符</td>
</tr>
<tr>
<td>\xhh</td>
<td>1到2位十六进制所代表的任意字符</td>
</tr>
</tbody></table>
<p>例如，如果我们想给str赋值一个单引号，一个双引号（’”），那么我们可以这样写：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;\&#x27;\&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>下面需要你来完成一个简单的任务：</strong></p>
<p>新建一个变量<code>str</code>，给str赋值为</p>
<p><code>ab\\c\&quot;ef\&#39;\\h</code></p>
<p>并打印出来</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="comment">--补全代码</span></span><br><span class="line"><span class="built_in">print</span>(str)</span><br><span class="line"><span class="comment">--输出应为ab\cd&quot;ef&#x27;g\h]]</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="string拼接"><a href="#string拼接" class="headerlink" title="string拼接"></a>string拼接</h2><p>字符串和字符串可以相加吗？可以！我们可以用拼接符号来将两个独立的字符串拼起来。</p>
<p>我们使用<code>..</code>来表示字符串拼接符号，如下面的示例代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;abc&#x27;</span>..<span class="string">&#x27;def&#x27;</span>)</span><br><span class="line">str1 = <span class="string">&#x27;123&#x27;</span></span><br><span class="line">str2 = <span class="string">&#x27;999&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(str1..str2)</span><br></pre></td></tr></table></figure>

<p><strong>下面你要完成这个任务：</strong></p>
<p>已知三个字符串变量<code>s1</code>、<code>s2</code>、<code>s3</code></p>
<p>请将他们按顺序拼接起来，存入<code>all</code>，并使用print输出结果</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s1,s2,s3 = <span class="string">&quot;aaa&quot;</span>,<span class="string">&quot;bbb&quot;</span>,<span class="string">&quot;ccc&quot;</span></span><br><span class="line">all = <span class="comment">--请补全代码</span></span><br><span class="line"><span class="built_in">print</span>(all)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="number转string"><a href="#number转string" class="headerlink" title="number转string"></a>number转string</h2><p>上面一节学习了如何拼接字符串，这个方法固然很好用，但是有时候我们会遇到一个需求，那就是把<code>number</code>类型的变量和<code>string</code>类型的变量拼接起来，组成一个新的<code>string</code></p>
<p>比如下面的变量<code>n</code>和<code>s</code>，如何拼接起来呢？</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">123</span></span><br><span class="line">s = <span class="string">&#x27;m/s&#x27;</span></span><br></pre></td></tr></table></figure>

<p>我们可以直接将<code>number</code>类型的变量<code>n</code>转换成<code>string</code>类型的值，这样就可以拼接了</p>
<p>使用<code>tostring(value)</code>函数即可实现这一操作：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">123</span></span><br><span class="line">s = <span class="string">&#x27;m/s&#x27;</span></span><br><span class="line"></span><br><span class="line">result = <span class="built_in">tostring</span>(n)..s</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<p><strong>下面你要完成这个任务：</strong></p>
<p>已知三个变量<code>n1</code>、<code>s</code>、<code>n2</code></p>
<p>然后将他们按顺序拼接起来，存入变量<code>result</code>，使输出结果正确</p>
<p>小提示：在某些情况下，Lua会自动将number类型转换成string类型</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">n1,s,n2 = <span class="number">1</span>,<span class="string">&quot;abc&quot;</span>,<span class="number">2</span></span><br><span class="line">result = <span class="comment">--请补全代码</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="string转number"><a href="#string转number" class="headerlink" title="string转number"></a>string转number</h2><p>上面一节学习了如何将number转成string，这一节我们来学习如何将string转成number</p>
<p>比如下面的变量<code>s</code>，存储的内容是一个字符串，但是代表了一个数字，如何转成number再与n相加计算呢？</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">123</span></span><br><span class="line">s = <span class="string">&#x27;2333&#x27;</span></span><br></pre></td></tr></table></figure>

<p>我们可以直接将<code>string</code>类型的变量<code>s</code>转换成<code>number</code>类型的值，这样就可以计算了</p>
<p>使用<code>tonumber(value)</code>函数即可实现这一操作：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">123</span></span><br><span class="line">s = <span class="string">&#x27;2333&#x27;</span></span><br><span class="line"></span><br><span class="line">result = <span class="built_in">tonumber</span>(s) + n</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<p><strong>下面你要完成这个任务：</strong></p>
<p>已知三个字符串变量<code>s1</code>、<code>s2</code>、<code>s3</code>，其内容均为纯数字</p>
<p>请计算他们的算术和，赋值给新建的变量<code>result</code>，使下面代码输出正确结果</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s1,s2,s3 = <span class="string">&quot;11&quot;</span>,<span class="string">&quot;12&quot;</span>,<span class="string">&quot;100&quot;</span></span><br><span class="line">result = <span class="comment">--请补全代码</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h1><h2 id="布尔型和比较运算"><a href="#布尔型和比较运算" class="headerlink" title="布尔型和比较运算"></a>布尔型和比较运算</h2><p>布尔型（boolean）只有两个可选值：<code>true</code>（真） 和 <code>false</code>（假）</p>
<p>**Lua 把 false 和 nil 看作是<code>false</code>**，其他的都为true（包括0这个值，也是相当于<code>true</code>）</p>
<p>Lua 中也有许多的<code>关系运算符</code>，用于比较大小或比较是否相等，符号及其含义如下表：</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;&#x3D;</td>
<td>等于，检测两个值是否相等，相等返回 true，否则返回 false</td>
</tr>
<tr>
<td>~&#x3D;</td>
<td>不等于，检测两个值是否相等，相等返回 false，否则返回 true</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于，如果左边的值大于右边的值，返回 true，否则返回 false</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于，如果左边的值大于右边的值，返回 false，否则返回 true</td>
</tr>
<tr>
<td>&gt;&#x3D;</td>
<td>大于等于，如果左边的值大于等于右边的值，返回 true，否则返回 false</td>
</tr>
<tr>
<td>&lt;&#x3D;</td>
<td>小于等于， 如果左边的值小于等于右边的值，返回 true，否则返回 false</td>
</tr>
</tbody></table>
<p>我们可以通过以下实例来更加透彻的理解关系运算符的应用：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">21</span></span><br><span class="line">b = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;==的结果&#x27;</span>,a==b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;~=的结果&#x27;</span>,a~=b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&gt;的结果&#x27;</span>,a&gt;b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;的结果&#x27;</span>,a&lt;b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&gt;=的结果&#x27;</span>,a&gt;=b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;=的结果&#x27;</span>,a&lt;=b)</span><br></pre></td></tr></table></figure>

<p><strong>下面问题来了，运行以下代码，将会输出什么结果？请自行思考</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">c = a</span><br><span class="line">d = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a == b)</span><br><span class="line"><span class="built_in">print</span>(c == a)</span><br><span class="line"><span class="built_in">print</span>(a ~= b)</span><br><span class="line"><span class="built_in">print</span>(d &lt;= c)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><p>逻辑运算符基于布尔型的值来进行计算，并给出结果，下表列出了 Lua 语言中的常用逻辑运算符：</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>and</td>
<td>逻辑与操作符。 若 A 为 false，则返回 A，否则返回 B</td>
</tr>
<tr>
<td>or</td>
<td>逻辑或操作符。 若 A 为 true，则返回 A，否则返回 B</td>
</tr>
<tr>
<td>not</td>
<td>逻辑非操作符。与逻辑运算结果相反，如果条件为 true，逻辑非为 false</td>
</tr>
</tbody></table>
<p>我们可以通过以下实例来更加透彻的理解逻辑运算符的应用：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;true and false的结果&#x27;</span>,<span class="literal">true</span> <span class="keyword">and</span> <span class="literal">false</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;true or false的结果&#x27;</span>,<span class="literal">true</span> <span class="keyword">or</span> <span class="literal">false</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;true and true的结果&#x27;</span>,<span class="literal">true</span> <span class="keyword">and</span> <span class="literal">true</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;false or false的结果&#x27;</span>,<span class="literal">false</span> <span class="keyword">or</span> <span class="literal">false</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;not false的结果&#x27;</span>,<span class="keyword">not</span> <span class="literal">false</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;123 and 345的结果&#x27;</span>,<span class="number">123</span> <span class="keyword">and</span> <span class="number">345</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;nil and true的结果&#x27;</span>,<span class="literal">nil</span> <span class="keyword">and</span> <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<p><strong>下面问题来了，运行以下代码，将会输出什么结果？</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">c = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">and</span> b)</span><br><span class="line"><span class="built_in">print</span>(c <span class="keyword">or</span> a)</span><br><span class="line"><span class="built_in">print</span>(<span class="keyword">not</span> b)</span><br><span class="line"><span class="built_in">print</span>(d <span class="keyword">and</span> c)</span><br><span class="line"><span class="built_in">print</span>(<span class="number">1</span> &lt; <span class="number">2</span> <span class="keyword">and</span> <span class="number">3</span> &gt; <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="检验大小（自测题）"><a href="#检验大小（自测题）" class="headerlink" title="检验大小（自测题）"></a>检验大小（自测题）</h2><p>题目：如果已知number变量<code>n</code>，那么如果需要判断n是否符合下面的条件：</p>
<p>3&lt;n≤10</p>
<p>以下四行判断代码，正确的是？</p>
<p>（返回true即表示变量<code>n</code>符合要求）</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">1</span><span class="comment">--这个数可能是任意数字</span></span><br><span class="line"><span class="built_in">print</span>(n &gt; <span class="number">10</span> <span class="keyword">or</span> n &lt;= <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(n &lt;= <span class="number">10</span> <span class="keyword">or</span> n &gt; <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(n &lt; <span class="number">3</span> <span class="keyword">and</span> n &gt;= <span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(n &lt;= <span class="number">10</span> <span class="keyword">or</span> n &gt; <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="分支判断"><a href="#分支判断" class="headerlink" title="分支判断"></a>分支判断</h1><h2 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h2><p>上面一节学习了布尔类型，那么这个需要用到哪里呢？我们需要用它来进行某些判断。</p>
<p>在Lua中，可以使用<code>if</code>语句来进行判断，如下面所举例的代码，可以判断<code>n是否为小于10的数</code>：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">5</span></span><br><span class="line"><span class="keyword">if</span> n &lt; <span class="number">10</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;n小于10&#x27;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>我们整理一下，实际上if语句就是如下结构：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件 <span class="keyword">then</span></span><br><span class="line">    符合条件的代码</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p><strong>下面是你需要完成的事：</strong></p>
<p>已知变量<code>n</code>，请判断<code>n</code>是否为奇数，如果是，请给<code>n</code>的值加上1</p>
<p>如果你觉得有难度，请查看下面的提示：</p>
<ul>
<li>求出<code>n</code>除以2的余数：n % 2</li>
<li>给<code>n</code>的值加上1：n &#x3D; n + 1</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--已知一个number变量n</span></span><br><span class="line">n = <span class="number">5</span>   <span class="comment">--这个数字是几都有可能</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;n在判断前的值&quot;</span>,n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> 你的条件 <span class="keyword">then</span></span><br><span class="line">    要做的事</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;n在判断后的值&quot;</span>,n)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="多条件判断"><a href="#多条件判断" class="headerlink" title="多条件判断"></a>多条件判断</h2><p>上面一节学习了简单的if语句写法，这一节我们来学习多条件分支语句</p>
<p>在Lua中，可以使用<code>if</code>语句来进行判断，同时可以使用<code>else</code>语句，表示多个分支判断</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">    满足条件<span class="number">1</span></span><br><span class="line"><span class="keyword">elseif</span> 条件<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">    不满足条件<span class="number">1</span>，但是满足条件<span class="number">2</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    前面条件全都不满足</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>举个例子，比如有一个<code>数字n</code>：</p>
<ul>
<li>当它大于等于0、小于5时，输出<code>太小</code>，</li>
<li>当它大于等于5、小于10时，输出<code>适中</code>，</li>
<li>当它大于等于10时，输出<code>太大</code>，</li>
</ul>
<p>那么代码就像如下这样：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">1</span><span class="comment">--更改这个数多运行几次试试</span></span><br><span class="line"><span class="keyword">if</span> n &gt;= <span class="number">0</span> <span class="keyword">and</span> n &lt; <span class="number">5</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;太小&#x27;</span>)</span><br><span class="line"><span class="keyword">elseif</span> n &gt;= <span class="number">5</span> <span class="keyword">and</span> n &lt; <span class="number">10</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;适中&#x27;</span>)</span><br><span class="line"><span class="keyword">elseif</span> n &gt;= <span class="number">10</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;太大&#x27;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>注意：<code>else</code>和<code>elseif</code>都是可选的，可有可无，但是<code>end</code>不能省略</p>
<p><strong>下面是你需要完成的事：</strong></p>
<p>已知变量<code>n</code>，请判断<code>n</code>是否为奇数，</p>
<ul>
<li>如果是，请给<code>n</code>的值加上1</li>
<li>如果不是，请将<code>n</code>的值改为原来的两倍</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--已知一个number变量n</span></span><br><span class="line">n = <span class="number">5</span>   <span class="comment">--这个数字是几都有可能</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;n在判断前的值&quot;</span>,n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> 你的条件 <span class="keyword">then</span></span><br><span class="line">    要做的事</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    要做的事</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;n在判断后的值&quot;</span>,n)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="判断三角形合法性（自测题）"><a href="#判断三角形合法性（自测题）" class="headerlink" title="判断三角形合法性（自测题）"></a>判断三角形合法性（自测题）</h2><p>你需要使用前面几章的知识，来完成下面的题目</p>
<p>已知三个number类型的变量a、b、c，分别代表三根木棒的长度</p>
<p>请判断，使用这三根木棒，是否可以组成一个三角形（两短边之和大于第三边）</p>
<ul>
<li>如果可以组成，就打印出true</li>
<li>如果不可以，就打印false</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a,b,c = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span><span class="comment">--多改几个数值自行测试</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="if的判断依据（自测题）"><a href="#if的判断依据（自测题）" class="headerlink" title="if的判断依据（自测题）"></a>if的判断依据（自测题）</h2><p>我们在前面了解到，Lua 把 <code>false</code> 和 <code>nil</code> 看作是<code>false</code>，其他的都为<code>true</code>（包括<code>0</code>这个值，也是相当于<code>true</code>）</p>
<p><strong>那么问题来了，执行下面的代码，将会输出什么？</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">result = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">if</span> <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    result = result..<span class="string">&#x27;T,&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    result = result..<span class="string">&#x27;F,&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">if</span> a <span class="keyword">then</span></span><br><span class="line">    result = result..<span class="string">&#x27;T&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    result = result..<span class="string">&#x27;F&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="初识函数"><a href="#初识函数" class="headerlink" title="初识函数"></a>初识函数</h2><p><code>函数</code>是指一段在一起的、可以做某一件事儿的程序，也叫做子程序。</p>
<p>在前面的内容中，我们已经接触过了函数的调用，这个函数就是前面用到了很多次的<code>print(...)</code>。</p>
<p>调用函数只需要按下面的格式即可：</p>
<p><code>函数名(参数1,参数2,参数3,......)</code></p>
<p>为何要使用函数？因为很多事情都是重复性操作，我们使用函数，可以快速完成这些操作</p>
<p>下面我们举一个最简单的函数例子，这个函数没有传入参数、没有返回值</p>
<p>它实现了一个简单的功能，就是输出<code>Hello world!</code>：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello world!&#x27;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>这个函数名为<code>hello</code>，我们可以按下面的方法进行调用（执行）：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello world!&#x27;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">hello()</span><br></pre></td></tr></table></figure>

<p>这行代码会输出<code>Hello world!</code>。</p>
<p>同时，在Lua中，函数也是一种变量类型，也就是说，<code>hello</code>实际上也是一个变量，里面存储的是一个函数，我们可以用下面的代码来理解：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello world!&#x27;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">a = hello</span><br><span class="line"><span class="comment">--把hello函数同时赋值给a变量</span></span><br><span class="line">a()</span><br><span class="line">hello()</span><br><span class="line"><span class="comment">--a和hello变量指向同一个函数</span></span><br><span class="line"><span class="comment">--所以执行结果和hello()相同</span></span><br></pre></td></tr></table></figure>

<p>因为函数只是个变量，你甚至在一开始可以这样声明<code>hello</code>函数：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hello = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello world!&#x27;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">hello()</span><br></pre></td></tr></table></figure>

<p><strong>下面你需要做一件简单的事情：</strong></p>
<ul>
<li>新建一个函数变量<code>biu</code>，使其执行后会打印<code>biubiubiu</code>这个字符串，</li>
<li>新建一个函数变量<code>pong</code>，使其与<code>biu</code>指向的函数相同</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--请在此处补全代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--请使下面的调用可以正常打印出biubiubiu</span></span><br><span class="line">biu()</span><br><span class="line">pong()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;biu和pong相等吗？&quot;</span>,biu==pong)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="local变量"><a href="#local变量" class="headerlink" title="local变量"></a>local变量</h2><p><strong>之前我们创建的变量，都是全局变量，这种变量在代码运行周期从头到尾，都不会被销毁，而且随处都可调用。</strong></p>
<p>但是当我们代码量增加，很多时候大量新建全局变量会导致内存激增，我们需要一种可以临时使用、并且可以自动销毁释放内存资源的变量，要怎么解决呢？</p>
<p>我们可以使用<code>local</code>标志来新建临时变量，使用<code>local</code>创建一个局部变量，与全局变量不同，局部变量只在被声明的那个代码块内有效。</p>
<p>参考下面的代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">123</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> n = a+<span class="number">2</span></span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">add()</span><br><span class="line"><span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>

<p>上面的代码中，<code>n</code>就是一个局部变量，它只在<code>这个funcion</code>中有效，并且函数运行完后会自动回收这部分的内存。</p>
<p>我们应该尽可能的使用局部变量，以方便lua虚拟机自动回收内存空间，同时减少资源占用提高运行速度。</p>
<p>下面请阅读以下代码，思考一下，正确的输出结果是什么：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">connect</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> s = str..<span class="string">&#x27;def&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(s,str)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h2><p>在前几章的使用中，我们知道函数是可以传入参数的，如<code>print(123)</code></p>
<p>那么，我们如何编写可以传入参数的函数呢？可以按下面的模板来写</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名<span class="params">(参数1,参数2,...)</span></span></span><br><span class="line">    代码内容</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>这里传入的参数，等价于在函数内部新建了一个<code>local</code>的变量，修改这些数据不会影响外部的数据（除了后面还没有讲到的<code>table</code>等类型）</p>
<p>举个例子，比如下面的函数，可以实现打印出两个传入值的和：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(a,b)</span></span></span><br><span class="line">    <span class="built_in">print</span>(a+b)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">--会输出3</span></span><br></pre></td></tr></table></figure>

<p>这段代码其实等价于：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">local</span> b = <span class="number">2</span></span><br><span class="line">    <span class="built_in">print</span>(a+b)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">add()</span><br></pre></td></tr></table></figure>

<p>下面问题来了，请设计一个函数<code>p</code>，可以按下面的调用方式来打印出物体的密度：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--补全这个函数的代码，满足题目要求</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span><span class="params">(a,b,c,m)</span></span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--一个长方体的长宽高分别为a、b、c（单位米）</span></span><br><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="number">2</span></span><br><span class="line">c = <span class="number">3</span></span><br><span class="line"><span class="comment">--这个物体重量为m（单位克）</span></span><br><span class="line">m = <span class="number">230</span></span><br><span class="line"><span class="comment">--下面打印出密度</span></span><br><span class="line"><span class="comment">--注：密度计算公式 密度 = 质量 / 体积</span></span><br><span class="line">p(a,b,c,m)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="函数返回值"><a href="#函数返回值" class="headerlink" title="函数返回值"></a>函数返回值</h2><p>在前面的代码中，我们实现了一个函数，输入变量<code>a</code>、<code>b</code>，函数会自动输出两个数值的和。</p>
<p>但是一般来说，我们的需求远远不止这些，我们可能需要一个如下功能的函数：</p>
<p><code>执行函数，输入两个值，获取这两个值的和</code></p>
<p>如果还是按上面几节的内容，我们只会输出这个值，并不能把这个值传递给其他的变量进行后续使用，如何解决这个需求呢？</p>
<p>我们可以使用函数的返回值来实现这个需求，结合上面的需求，我们可以用下面的代码实现：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(a,b)</span></span></span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">all = add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">--这里all的值就是3了</span></span><br><span class="line"><span class="built_in">print</span>(all)</span><br></pre></td></tr></table></figure>

<p>这里的<code>return</code>表示返回一个值，<code>并且立刻结束这个函数的运行</code></p>
<p>同时，和输入值可以有多个一样，返回值也可以有多个</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(a,b)</span></span></span><br><span class="line">    <span class="keyword">return</span> a+b,<span class="string">&quot;ok&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">all, result = add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">--这里all的值就是3了</span></span><br><span class="line"><span class="comment">--这里result的值就是string &quot;ok&quot;</span></span><br><span class="line"><span class="built_in">print</span>(all,result)</span><br></pre></td></tr></table></figure>

<p>下面问题来了，请设计一个函数<code>p</code>，可以按下面的调用方式来返回出物体的密度，返回值为<code>number</code>类型：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span><span class="params">(a,b,c,m)</span></span></span><br><span class="line">    <span class="comment">--请补全代码</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--一个长方体的长宽高分别为a、b、c（单位米）</span></span><br><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="number">2</span></span><br><span class="line">c = <span class="number">3</span></span><br><span class="line"><span class="comment">--这个物体重量为m（单位克）</span></span><br><span class="line">m = <span class="number">230</span></span><br><span class="line"><span class="comment">--下面返回密度值</span></span><br><span class="line"><span class="comment">--注：密度计算公式 密度 = 质量 / 体积</span></span><br><span class="line">result = p(a,b,c,m)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="判断三角形合法性2（自测题）"><a href="#判断三角形合法性2（自测题）" class="headerlink" title="判断三角形合法性2（自测题）"></a>判断三角形合法性2（自测题）</h2><p>你需要使用前面几章的知识，来完成下面的题目</p>
<ul>
<li>已知三个number类型的变量，分别代表三根木棒的长度</li>
<li>请判断，使用这三根木棒，是否可以组成一个三角形（两短边之和大于第三边）</li>
<li>请新建一个函数triangle，并可以用如下形式调用（如果可以组成，就返回true）：</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">triangle</span><span class="params">(a,b,c)</span></span></span><br><span class="line">    <span class="comment">--请补全代码</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">result = triangle(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)<span class="comment">--传入值为三边长度，多改几个测试下</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="返回多个值（自测题）"><a href="#返回多个值（自测题）" class="headerlink" title="返回多个值（自测题）"></a>返回多个值（自测题）</h2><p>你需要使用前面几章的知识，来完成下面的题目</p>
<ul>
<li>已知2个number类型的变量，分别代表一个长方体的长和宽</li>
<li>请计算这个长方形的周长和面积</li>
<li>请新建一个函数<code>rectangle</code>，并可以用如下形式调用：</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rectangle</span><span class="params">(a,b)</span></span></span><br><span class="line">    <span class="comment">--补全代码</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">area,<span class="built_in">len</span> = rectangle(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">--结果：</span></span><br><span class="line"><span class="comment">--面积area为2</span></span><br><span class="line"><span class="comment">--周长len为6</span></span><br><span class="line"><span class="built_in">print</span>(area,<span class="built_in">len</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="table"><a href="#table" class="headerlink" title="table"></a>table</h1><h2 id="认识数组"><a href="#认识数组" class="headerlink" title="认识数组"></a>认识数组</h2><p>数组，使用一个变量名，存储一系列的值</p>
<p>很多语言中都有数组这个概念，在Lua中，我们可以使用<code>table</code>（表）来实现这个功能</p>
<p>在Lua中，table是一个一系列元素的集合，使用大括号进行表示，其中的元素之间以逗号分隔，类似下面的代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以直接使用<code>元素</code>的<code>下标</code>，来访问、或者对该<code>元素</code>进行赋值操作。</p>
<p>在上面的<code>table</code>变量<code>t</code>中，第一个元素的下标是<code>1</code>，第二个是<code>2</code>，以此类推。</p>
<p>我们可以用<code>变量名</code>+<code>中括号</code>，中括号里加上<code>下标</code>，来访问或更改这个<code>元素</code>，如下面的例子：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">4</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">1</span>]) <span class="comment">--打印1</span></span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">3</span>]) <span class="comment">--打印8</span></span><br><span class="line"></span><br><span class="line">t[<span class="number">2</span>] = <span class="number">99</span> <span class="comment">--更改第二个元素的值</span></span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">2</span>]) <span class="comment">--打印99</span></span><br><span class="line"></span><br><span class="line">t[<span class="number">6</span>] = <span class="number">2</span> <span class="comment">--凭空新建第六个元素并赋值</span></span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">6</span>]) <span class="comment">--打印2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">10</span>])</span><br><span class="line"><span class="comment">--因为不存在，打印nil</span></span><br></pre></td></tr></table></figure>

<p>以上就是table最简单的一个例子了，就是当作数组来用（注意，一般语言中的数组基本都为不可变长度，这里的table为可变长度）</p>
<p><strong>下面你需要完成：</strong></p>
<ul>
<li>新建一个table，名为cards，存入1-10十个数字</li>
<li>将第3个元素与第7个元素交换</li>
<li>将第9个元素与第2个元素交换</li>
<li>增加第11个变量，值为23</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--请补全代码</span></span><br><span class="line">cards =</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="简单table"><a href="#简单table" class="headerlink" title="简单table"></a>简单table</h2><p>上一节里，我们将<code>table</code>来表示<code>数组</code>，实际上，<code>table</code>中可以包括<code>任意类型的数据</code></p>
<p>比如我们可以在<code>table</code>中放置<code>number</code>和<code>string</code>数据，类似下面的代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="string">&quot;abc&quot;</span>,<span class="number">223</span>,<span class="string">&quot;,..a&quot;</span>,<span class="number">123123</span>&#125;</span><br></pre></td></tr></table></figure>

<p>我们甚至能在里面放<code>function</code>变量</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">return</span> <span class="number">123</span> <span class="keyword">end</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="built_in">print</span>(<span class="string">&quot;abc&quot;</span>) <span class="keyword">end</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span><span class="params">(a,b)</span></span> <span class="keyword">return</span> a+b <span class="keyword">end</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="built_in">print</span>(<span class="string">&quot;hello world&quot;</span>) <span class="keyword">end</span>,</span><br><span class="line">&#125;</span><br><span class="line">t[<span class="number">1</span>]()</span><br><span class="line">t[<span class="number">2</span>]()</span><br><span class="line">t[<span class="number">3</span>](<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">t[<span class="number">4</span>]()</span><br></pre></td></tr></table></figure>

<p>这些<code>table</code>访问每个元素的方式仍然是直接用下标，并且也能用下标来进行修改</p>
<p><strong>下面你需要完成：</strong></p>
<ul>
<li>新建一个<code>table</code>，名为<code>funcList</code>，并实现以下功能</li>
<li>调用<code>funcList[1](a,b)</code>，返回a和b的乘积</li>
<li>调用<code>funcList[2](a,b)</code>，返回a减b的差</li>
<li>调用<code>funcList[3](a)</code>，返回a的相反数（-a）</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--请补全代码</span></span><br><span class="line">funcList = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a,b = <span class="number">1</span>,<span class="number">2</span><span class="comment">--提供两个数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a,b值为&quot;</span>,a,b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a和b的乘积：&quot;</span>,funcList[<span class="number">1</span>](a,b))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a和b的差：&quot;</span>,funcList[<span class="number">2</span>](a,b))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a和相反数：&quot;</span>,funcList[<span class="number">3</span>](a))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="table下标"><a href="#table下标" class="headerlink" title="table下标"></a>table下标</h2><p>在前两节，我们的<code>table</code>都只是一些简单的List（列表），每个元素的<code>下标</code>都是自动从1排列的</p>
<p>实际上，Lua中，下标可以直接在声明时进行指定，像下面这样：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;</span><br><span class="line"><span class="comment">--上面和下面的代码等价</span></span><br><span class="line">t = &#123;</span><br><span class="line">    [<span class="number">1</span>] = <span class="number">6</span>,</span><br><span class="line">    [<span class="number">2</span>] = <span class="number">7</span>,</span><br><span class="line">    [<span class="number">3</span>] = <span class="number">8</span>,</span><br><span class="line">    [<span class="number">4</span>] = <span class="number">9</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--甚至你可以跳过某些下标</span></span><br><span class="line">t = &#123;</span><br><span class="line">    [<span class="number">1</span>] = <span class="number">6</span>,</span><br><span class="line">    [<span class="number">3</span>] = <span class="number">7</span>,</span><br><span class="line">    [<span class="number">5</span>] = <span class="number">8</span>,</span><br><span class="line">    [<span class="number">7</span>] = <span class="number">9</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">7</span>])</span><br><span class="line"><span class="comment">--输出9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--在声明后赋予元素值也是可以的</span></span><br><span class="line">t = &#123;&#125;<span class="comment">--空的table</span></span><br><span class="line">t[<span class="number">101</span>] = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">101</span>])</span><br><span class="line"><span class="comment">--输出10</span></span><br></pre></td></tr></table></figure>

<p><strong>下面你需要：</strong></p>
<ul>
<li>新建一个变量<code>t</code>，并按下面的格式声明</li>
<li>下标为<code>1</code>的元素，值为<code>123</code>（number）</li>
<li>下标为<code>13</code>的元素，值为<code>&quot;abc&quot;</code>（string）</li>
<li>下标为<code>666</code>的元素，值为<code>&quot;666&quot;</code>（string）</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--请补全代码</span></span><br><span class="line">t = &#123;</span><br><span class="line">    <span class="number">1</span>,</span><br><span class="line">    [<span class="number">13</span>] = <span class="string">&quot;abc&quot;</span>,</span><br><span class="line">    [<span class="number">666</span>] = <span class="string">&quot;111&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;下标为1的元素：&quot;</span>,t[<span class="number">1</span>],<span class="built_in">type</span>(t[<span class="number">1</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;下标为13的元素：&quot;</span>,t[<span class="number">13</span>],<span class="built_in">type</span>(t[<span class="number">13</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;下标为666的元素：&quot;</span>,t[<span class="number">666</span>],<span class="built_in">type</span>(t[<span class="number">666</span>]))</span><br><span class="line"></span><br><span class="line">t = &#123;</span><br><span class="line">    [<span class="number">1</span>] = <span class="number">1</span>,</span><br><span class="line">    [<span class="number">13</span>] = <span class="string">&quot;abc&quot;</span>,</span><br><span class="line">    [<span class="number">666</span>] = <span class="string">&quot;111&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;下标为1的元素：&quot;</span>,t[<span class="number">1</span>],<span class="built_in">type</span>(t[<span class="number">1</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;下标为13的元素：&quot;</span>,t[<span class="number">13</span>],<span class="built_in">type</span>(t[<span class="number">13</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;下标为666的元素：&quot;</span>,t[<span class="number">666</span>],<span class="built_in">type</span>(t[<span class="number">666</span>]))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="下标进阶"><a href="#下标进阶" class="headerlink" title="下标进阶"></a>下标进阶</h2><p>在上一节，我们学习了如何自定义下标，其实在Lua中，下标也可以是字符串，如下面的例子</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;</span><br><span class="line">    [<span class="string">&quot;apple&quot;</span>] = <span class="number">10</span>,</span><br><span class="line">    banana = <span class="number">12</span>,</span><br><span class="line">    pear = <span class="number">6</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--使用[&quot;下标&quot;] = 值</span></span><br><span class="line"><span class="comment">--和  下标 = 值</span></span><br><span class="line"><span class="comment">--都是正确写法</span></span><br><span class="line"><span class="comment">--当第二种方式有歧义时，应该用第一种方式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--可以用下面两种方式访问：</span></span><br><span class="line"><span class="built_in">print</span>(t[<span class="string">&quot;apple&quot;</span>])</span><br><span class="line"><span class="comment">--输出10</span></span><br><span class="line"><span class="built_in">print</span>(t.apple)</span><br><span class="line"><span class="comment">--输出10</span></span><br><span class="line"><span class="comment">--当第二种方式有歧义时，应该用第一种方式</span></span><br></pre></td></tr></table></figure>

<p>可见，在使用<code>string</code>作为下标时，<code>table</code>的灵活性提升了一个数量级。</p>
<p><code>string</code>作为下标时，也可以动态赋值：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;&#125; <span class="comment">-- 空table</span></span><br><span class="line">t[<span class="string">&quot;new&quot;</span>] = <span class="string">&quot;新的值&quot;</span></span><br><span class="line"><span class="built_in">print</span>(t.new)</span><br><span class="line"><span class="comment">--输出 新的值</span></span><br></pre></td></tr></table></figure>

<p><strong>下面你需要完成：</strong></p>
<ul>
<li>新建<code>table</code>变量<code>t</code></li>
<li>下标为<code>apple</code>的元素，值为<code>123</code>（number）</li>
<li>下标为<code>banana</code>的元素，值为<code>&quot;abc&quot;</code>（string）</li>
<li>下标为<code>1@1</code>的元素，值为<code>&quot;666&quot;</code>（string）</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--请补全代码</span></span><br><span class="line">t = &#123;</span><br><span class="line">    apple = <span class="string">&quot;apple&quot;</span>,</span><br><span class="line">    [<span class="string">&quot;banana&quot;</span>] = <span class="string">&quot;banana&quot;</span>,</span><br><span class="line">    [<span class="string">&quot;1@1&quot;</span>] = <span class="string">&quot;1@1&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;下标为apple的元素：&quot;</span>,t[<span class="string">&quot;apple&quot;</span>],<span class="built_in">type</span>(t[<span class="string">&quot;apple&quot;</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;下标为banana的元素：&quot;</span>,t[<span class="string">&quot;banana&quot;</span>],<span class="built_in">type</span>(t[<span class="string">&quot;banana&quot;</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;下标为1@1的元素：&quot;</span>,t[<span class="string">&quot;1@1&quot;</span>],<span class="built_in">type</span>(t[<span class="string">&quot;1@1&quot;</span>]))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="table小测验"><a href="#table小测验" class="headerlink" title="table小测验"></a>table小测验</h2><p><strong>下面的代码，将会打印什么？</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;</span><br><span class="line">    apple = &#123;</span><br><span class="line">        price = <span class="number">7.52</span>,</span><br><span class="line">        weight = <span class="number">2.1</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    banana = &#123;</span><br><span class="line">        price = <span class="number">8.31</span>,</span><br><span class="line">        weight = <span class="number">1.4</span>,</span><br><span class="line">        year = <span class="string">&#x27;2018&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    year = <span class="string">&#x27;2019&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(</span><br><span class="line">    t.price,</span><br><span class="line">    t.apple.price,</span><br><span class="line">    t.banana.weight,</span><br><span class="line">    t.year</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="table小测验2"><a href="#table小测验2" class="headerlink" title="table小测验2"></a>table小测验2</h2><p><strong>下面的代码，将会打印什么？</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        price = <span class="number">7.52</span>,</span><br><span class="line">        weight = <span class="number">2.1</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        price = <span class="number">8.31</span>,</span><br><span class="line">        weight = <span class="number">1.4</span>,</span><br><span class="line">        year = <span class="string">&#x27;2018&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    year = <span class="string">&#x27;2019&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(</span><br><span class="line">    t[<span class="string">&quot;price&quot;</span>],</span><br><span class="line">    t[<span class="number">1</span>].price,</span><br><span class="line">    t[<span class="number">2</span>].weight,</span><br><span class="line">    t[<span class="string">&quot;year&quot;</span>]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Lua全局变量与table"><a href="#Lua全局变量与table" class="headerlink" title="Lua全局变量与table"></a>Lua全局变量与table</h2><p>在前面我们知道了，在<code>table</code>中，可以直接用<code>table名[下标]</code>或<code>table名.string下标</code>来访问元素</p>
<p>实际上，在Lua中，所有的全局变量全部被存放在了一个大<code>table</code>中，这个<code>table</code>名为：<code>_G</code></p>
<p>我们可以用下面的例子来示范：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">123</span><span class="comment">--新建变量</span></span><br><span class="line"><span class="built_in">print</span>(n)<span class="comment">--输出123</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">_G</span>.n)<span class="comment">--输出123</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">_G</span>.abc = <span class="number">1</span><span class="comment">--相当于新建全局变量</span></span><br><span class="line"><span class="built_in">print</span>(abc)<span class="comment">--输出1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">_G</span>[<span class="string">&quot;def&quot;</span>] = <span class="number">23</span><span class="comment">--相当于新建全局变量</span></span><br><span class="line"><span class="built_in">print</span>(def)<span class="comment">--输出23</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--甚至你可以像下面这样</span></span><br><span class="line"><span class="built_in">_G</span>.<span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="built_in">_G</span>[<span class="string">&quot;print&quot;</span>](<span class="string">&quot;world&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>现在，你明白为什么说<code>万物基于table</code>了吧？</p>
<p><strong>你需要完成下面的任务：</strong></p>
<ul>
<li>已知有一个全局变量，名为<code>@#$</code></li>
<li>请新建一个变量<code>result</code></li>
<li>将<code>@#$</code>变量里的值赋值给<code>result</code></li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">_G</span>[<span class="string">&quot;@#$&quot;</span>] = <span class="number">123</span></span><br><span class="line"></span><br><span class="line">result = <span class="built_in">_G</span>[<span class="string">&quot;@#$&quot;</span>] <span class="comment">--请补全代码</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;result值为&quot;</span>,result)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="table小测试3"><a href="#table小测试3" class="headerlink" title="table小测试3"></a>table小测试3</h2><p><strong>请新建一个名为t的table，满足以下要求</strong></p>
<ul>
<li><code>t[10]</code>可获得<code>number</code>类型数据<code>100</code></li>
<li><code>t.num</code>可获得<code>number</code>类型数据<code>12</code></li>
<li><code>t.abc[3]</code>可获得<code>string</code>类型数据<code>abcd</code></li>
<li><code>t.a.b.c</code>可获得<code>number</code>类型数据<code>789</code></li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--请补全代码</span></span><br><span class="line">t = &#123;</span><br><span class="line">    <span class="comment">-- 10 ~= &quot;10&quot;</span></span><br><span class="line">    [<span class="number">10</span>] = <span class="number">100</span>,</span><br><span class="line">    [<span class="string">&quot;10&quot;</span>] = <span class="number">222</span>,</span><br><span class="line">    num = <span class="number">12</span>,</span><br><span class="line">    [<span class="string">&quot;abc&quot;</span>] = &#123;</span><br><span class="line">        [<span class="number">3</span>] = <span class="string">&quot;abcd&quot;</span>,</span><br><span class="line">        <span class="comment">-- 错误写法</span></span><br><span class="line">        <span class="comment">-- 3 = &quot;abcd&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    a = &#123;</span><br><span class="line">        <span class="comment">-- 错误写法</span></span><br><span class="line">        <span class="comment">-- [b] = &#123;&#125;</span></span><br><span class="line">        [<span class="string">&quot;b&quot;</span>] = &#123;</span><br><span class="line">            [<span class="string">&quot;c&quot;</span>] = <span class="number">789</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;t[10]可获得number类型数据100:&quot;</span>,t[<span class="number">10</span>],<span class="built_in">type</span>(t[<span class="number">10</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;t.num可获得number类型数据12:&quot;</span>,t.num,<span class="built_in">type</span>(t.num))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;t.abc[3]可获得string类型数据abcd:&quot;</span>,t.abc[<span class="number">3</span>],<span class="built_in">type</span>(t.abc[<span class="number">3</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;t.a.b.c可获得number类型数据789:&quot;</span>,t.a.b.c,<span class="built_in">type</span>(t.a.b.c))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="table-concat"><a href="#table-concat" class="headerlink" title="table.concat"></a>table.concat</h2><p>table.concat (table [, sep [, i [, j ] ] ])</p>
<p>将元素是<code>string</code>或者<code>number</code>类型的<code>table</code>，每个元素连接起来变成字符串并返回。</p>
<p>可选参数<code>sep</code>，表示连接间隔符，默认为空。</p>
<p><code>i</code>和<code>j</code>表示元素起始和结束的下标。</p>
<p>下面是例子：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> a = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="string">&quot;hello&quot;</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.<span class="built_in">concat</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.<span class="built_in">concat</span>(a, <span class="string">&quot;|&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;打印的结果：</span></span><br><span class="line"><span class="comment">--135hello</span></span><br><span class="line"><span class="comment">--1|3|5|hello</span></span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<ul>
<li>已知table变量t，</li>
<li>将t中的结果全部连起来</li>
<li>间隔符使用<code>,</code></li>
<li>并使用print打印出来</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;连接结果：&quot;</span>)</span><br><span class="line"><span class="comment">--补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="table删减"><a href="#table删减" class="headerlink" title="table删减"></a>table删减</h2><p>table.insert (table, [pos ,] value)</p>
<p>在（数组型）表 table 的 <strong>pos 索引位置</strong>插入 value，其它元素向后移动到空的地方。pos 的默认值是表的长度加一，即默认是插在表的最后。</p>
<p>table.remove (table [, pos])</p>
<p>在表 table 中删除索引为 pos（pos 只能是 number 型）的元素，并返回这个被删除的元素，它后面所有元素的索引值都会减一。pos 的默认值是表的长度，即默认是删除表的最后一个元素。</p>
<p>下面是例子：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> a = &#123;<span class="number">1</span>, <span class="number">8</span>&#125;             <span class="comment">--a[1] = 1,a[2] = 8</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(a, <span class="number">1</span>, <span class="number">3</span>)   <span class="comment">--在表索引为1处插入3</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">1</span>], a[<span class="number">2</span>], a[<span class="number">3</span>])</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(a, <span class="number">10</span>)    <span class="comment">--在表的最后插入10</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">1</span>], a[<span class="number">2</span>], a[<span class="number">3</span>], a[<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;打印的结果：</span></span><br><span class="line"><span class="comment">--3    1    8</span></span><br><span class="line"><span class="comment">--3    1    8    10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> a = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.<span class="built_in">remove</span>(a, <span class="number">1</span>)) <span class="comment">--删除速索引为1的元素</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">1</span>], a[<span class="number">2</span>], a[<span class="number">3</span>], a[<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.<span class="built_in">remove</span>(a))   <span class="comment">--删除最后一个元素</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">1</span>], a[<span class="number">2</span>], a[<span class="number">3</span>], a[<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;打印的结果：</span></span><br><span class="line"><span class="comment">--1</span></span><br><span class="line"><span class="comment">--2    3    4    nil</span></span><br><span class="line"><span class="comment">--4</span></span><br><span class="line"><span class="comment">--2    3    nil    nil</span></span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<ul>
<li>已知table变量<code>t</code>，</li>
<li>去除t中的第一个元素</li>
<li>然后这时，在t的第三个元素前，加上一个number变量，值为810</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--补全代码</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;第一个元素应为2：&quot;</span>,t[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;第三个元素应为810：&quot;</span>,t[<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h1><h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h2><p>在实际功能实现中，经常会遇到需要循环运行的代码，比如从1到100填充table数据，我们可以直接用循环语句来实现</p>
<p>我们首先来学习<code>while</code>这个循环语法，整体的格式如下：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 继续循环判断依据 <span class="keyword">do</span></span><br><span class="line">    执行的代码</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>下面举一个例子，我们计算从1加到100的结果：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> result = <span class="number">0</span></span><br><span class="line"><span class="keyword">local</span> num = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> num &lt;= <span class="number">100</span> <span class="keyword">do</span></span><br><span class="line">    result = result + num</span><br><span class="line">    num = num + <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<p>上面的代码，就是当num≤100时，result不断地加num，并且num每次循环后自己加1</p>
<p><strong>理解了上面的代码，我们来完成下面一个简单的任务吧：</strong></p>
<ul>
<li>已知两个number类型的变量<code>min</code>和<code>max</code></li>
<li>请计算从<code>min</code>与<code>max</code>之间，所有<code>3的倍数</code>的和</li>
<li>打印出结果</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">min</span>,<span class="built_in">max</span> = <span class="number">114</span>,<span class="number">514</span> <span class="comment">--这个结果应为42009</span></span><br><span class="line">result = <span class="number">0</span><span class="comment">--结果存放到这个变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> 请完善 <span class="keyword">do</span></span><br><span class="line">    <span class="comment">--补全代码</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结果：&quot;</span>,result)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><p>for循环在某些程度上，和while循环很相似，但是for循环可以更加简洁地表达中间累积的量</p>
<p>我们首先来学习<code>for</code>这个循环语法，整体的格式如下：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 临时变量名=开始值,结束值,步长 <span class="keyword">do</span></span><br><span class="line">    循环的代码</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>其中，<code>步长</code>可以省略，默认为1</p>
<p><code>临时变量名</code>可以直接在代码区域使用（但不可更改），每次循环会自动加<code>步长值</code>，并且在到达<code>结束值</code>后停止循环</p>
<p>下面举一个例子，我们计算从1加到100的结果：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> result = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">100</span> <span class="keyword">do</span></span><br><span class="line">    result = result + i</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<p>上面的代码，就是当i≤100时，result不断地加i，并且i每次循环后增加1</p>
<p><strong>理解了上面的代码，我们来完成下面一个简单的任务吧：</strong></p>
<ul>
<li>已知两个number类型的变量<code>min</code>和<code>max</code></li>
<li>请计算从<code>min</code>与<code>max</code>之间，所有7的倍数的和</li>
<li>打印出结果</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">min</span>,<span class="built_in">max</span> = <span class="number">114</span>,<span class="number">514</span> <span class="comment">--这个结果应为17955</span></span><br><span class="line">result = <span class="number">0</span><span class="comment">--结果存放到这个变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="comment">--补全代码</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结果：&quot;</span>,result)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="中断循环"><a href="#中断循环" class="headerlink" title="中断循环"></a>中断循环</h2><p>前面我们学习了循环语句，有些时候循环运行到一半，我们不想再继续运行了，怎么办呢？</p>
<p>我们可以在一个循环体中使用<code>break</code>，来立即结束本次循环，继续运行下面的代码</p>
<p>比如像下面这样，计算1-100相加途中，<code>小于100</code>的<code>最大的和</code>：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">result = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">100</span> <span class="keyword">do</span></span><br><span class="line">    result = result + i</span><br><span class="line">    <span class="keyword">if</span> result &gt; <span class="number">100</span> <span class="keyword">then</span></span><br><span class="line">        result = result - i</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<p>可以看见，当发现和大于100后，代码立即把<code>result</code>的值还原到了加上当前数字之前的状态，并且调用<code>break</code>语句，立即退出了本次循环</p>
<p>在<code>while</code>中，我们也可以使用<code>break</code>:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">result = <span class="number">0</span></span><br><span class="line">c = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">    result = result + c</span><br><span class="line">    <span class="keyword">if</span> result &gt; <span class="number">100</span> <span class="keyword">then</span></span><br><span class="line">        result = result - c  </span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    c = c + <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<p>我们在这里直接使用了死循环（因为<code>while</code>的继续运行判断依据始终为<code>true</code>），整体逻辑也和之前for的代码一致，当发现和大于100后，代码立即把<code>result</code>的值还原到了加上当前数字之前的状态，并且调用<code>break</code>语句，立即退出了本次循环</p>
<p><strong>现在你需要完成一项任务：</strong></p>
<ul>
<li>请求出小于变量max的13的倍数的最大值（max大于0）</li>
<li>并将结果打印出来</li>
<li>本题理论上不用循环就能实现，但是为了练习一下技巧，请用for循环来实现</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">max</span> = <span class="number">810</span> <span class="comment">--结果应为806</span></span><br><span class="line">result = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="comment">--请补全代码</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="循环测试题1（自测题）"><a href="#循环测试题1（自测题）" class="headerlink" title="循环测试题1（自测题）"></a>循环测试题1（自测题）</h2><p>前面我们学习了循环语句，我们需要完成下面的任务</p>
<p>我们知道，<code>print</code>函数可以打印一行完整的输出</p>
<p>那么，已知变量a，请打印出下面的结果：</p>
<p>（a为大于0的整数，且需要输出a行数据，数据从1开始，每行与上一行的差为2）</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line">（上面例子为当a为<span class="number">5</span>的情况）</span><br></pre></td></tr></table></figure>

<p>做题区域：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line"><span class="comment">--需要用print输出要求的结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输出结果：&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="comment">--请补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="循环测试题2（自测题）"><a href="#循环测试题2（自测题）" class="headerlink" title="循环测试题2（自测题）"></a>循环测试题2（自测题）</h2><p>我们需要完成下面的任务</p>
<p>那么，已知变量a，请打印出下面的结果：</p>
<p>（a为大于0的整数，且需要输出a行数据，第一行为一个<em>，后面每行多一个</em>）</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*</span><br><span class="line">**</span><br><span class="line">***</span><br><span class="line">****</span><br><span class="line">*****</span><br><span class="line">（上面例子为当a为<span class="number">5</span>的情况）</span><br></pre></td></tr></table></figure>

<p>做题区域：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line"><span class="comment">--需要用print输出要求的结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输出结果：&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="comment">--请补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="循环测试题3（自测题）"><a href="#循环测试题3（自测题）" class="headerlink" title="循环测试题3（自测题）"></a>循环测试题3（自测题）</h2><p>我们需要完成下面的任务</p>
<p>那么，已知变量a，请打印出下面的结果：</p>
<p>（a为大于0的整数，且需要输出a行数据，按图示规律输出）</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="number">1234</span></span><br><span class="line"><span class="number">12345</span></span><br><span class="line"><span class="number">123456</span></span><br><span class="line"><span class="number">1234567</span></span><br><span class="line"><span class="number">12345678</span></span><br><span class="line"><span class="number">123456789</span></span><br><span class="line"><span class="number">12345678910</span></span><br><span class="line"><span class="number">1234567891011</span></span><br><span class="line">（上面例子为当a为<span class="number">11</span>的情况）</span><br></pre></td></tr></table></figure>

<p>做题区域：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">20</span></span><br><span class="line"><span class="comment">--需要用print输出要求的结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输出结果：&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="comment">--请补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="循环测试题4（自测题）"><a href="#循环测试题4（自测题）" class="headerlink" title="循环测试题4（自测题）"></a>循环测试题4（自测题）</h2><ul>
<li>有一只猴子，第一天摘了若干个桃子 ，当即吃了一半，但还觉得不过瘾 ，就又多吃了一个。</li>
<li>第2天早上又将剩下的桃子吃掉一半，还是觉得不过瘾，就又多吃了两个。</li>
<li>以后每天早上都吃了前一天剩下的一半加天数个（例如，第5天吃了前一天剩下的一半加5个）。</li>
<li>到第n天早上再想吃的时候，就只剩下一个桃子了。</li>
<li>那么，已知变量a为最后一天的天数，请打印出第一天的桃子数。</li>
<li>如：a为5时，输出114</li>
</ul>
<p>做题区域：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">6</span></span><br><span class="line"><span class="comment">--需要用print输出要求的结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输出结果：&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="comment">--请补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="详解string库"><a href="#详解string库" class="headerlink" title="详解string库"></a>详解string库</h1><h2 id="string-sub"><a href="#string-sub" class="headerlink" title="string.sub"></a>string.sub</h2><p>接下来几节会讲解string库的各种接口</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>.<span class="built_in">sub</span>(s, i [, j])</span><br></pre></td></tr></table></figure>

<p>返回字符串 <code>s</code> 中，从索引 <code>i</code> 到索引 <code>j</code> 之间的子字符串。</p>
<p>i 可以为负数，表示倒数第几个字符。</p>
<p>当 j 缺省时，默认为 -1，也就是字符串 s 的最后位置。</p>
<p>当索引 i 在字符串 s 的位置在索引 j 的后面时，将返回一个空字符串。</p>
<p>下面是例子：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(<span class="string">&quot;Hello Lua&quot;</span>, <span class="number">4</span>, <span class="number">7</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(<span class="string">&quot;Hello Lua&quot;</span>, <span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(<span class="string">&quot;Hello Lua&quot;</span>, <span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(<span class="string">&quot;Hello Lua&quot;</span>, <span class="number">-3</span>, <span class="number">-1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;打印的结果：</span></span><br><span class="line">lo L</span><br><span class="line">ello Lua</span><br><span class="line"></span><br><span class="line">Lua</span><br></pre></td></tr></table></figure>

<p>值得注意的是，我们可以使用冒号来简化语法，像下面这样：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;12345&quot;</span></span><br><span class="line">s1 = <span class="built_in">string</span>.<span class="built_in">sub</span>(s, <span class="number">4</span>, <span class="number">7</span>)</span><br><span class="line">s2 = s:<span class="built_in">sub</span>(<span class="number">4</span>, <span class="number">7</span>)</span><br><span class="line"><span class="comment">--两种写法是等价关系</span></span><br><span class="line"><span class="built_in">print</span>(s1,s2)</span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<ul>
<li>已知字符串变量<code>s</code>，请分别打印出（每种一行）：</li>
<li><code>s</code>从<code>第4个字符开始，到最后</code>的值</li>
<li><code>s</code>从<code>第1个字符开始，到倒数第3个字符</code>的值</li>
<li><code>s</code>从<code>倒数第5个字符开始，到倒数第2个字符</code>的值</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;1919810&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--补全代码</span></span><br><span class="line"><span class="built_in">print</span>(s:<span class="built_in">sub</span>(<span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(s, <span class="number">1</span>, <span class="number">-3</span>))</span><br><span class="line"><span class="built_in">print</span>(s:<span class="built_in">sub</span>(<span class="number">5</span>, <span class="number">-2</span>))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="string-rep"><a href="#string-rep" class="headerlink" title="string.rep"></a>string.rep</h2><p>string.rep(s, n)</p>
<p>返回字符串 s 的 n 次拷贝。</p>
<p>示例代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">rep</span>(<span class="string">&quot;abc&quot;</span>, <span class="number">3</span>))</span><br><span class="line"><span class="comment">--输出结果：</span></span><br><span class="line"><span class="comment">--abcabcabc</span></span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<p><strong>打印一行数据，数据内容为810个114514</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--补全代码</span></span><br><span class="line"><span class="built_in">print</span>()</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="string-len"><a href="#string-len" class="headerlink" title="string.len"></a>string.len</h2><p>string.len(s)</p>
<p>接收一个字符串，返回它的长度。</p>
<p>示例代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;hello lua&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">len</span>(s))</span><br><span class="line"><span class="comment">--输出结果：</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--同时也可以使用简便语法</span></span><br><span class="line"><span class="built_in">print</span>(s:<span class="built_in">len</span>())</span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<ul>
<li>新建一个变量s，使数据内容为810个114514</li>
<li>并打印出字符串s的长度</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="comment">--补全代码</span></span><br><span class="line"><span class="built_in">print</span>()</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h2><p>string.lower(s)</p>
<p>接收一个字符串 s，返回一个把所有大写字母变成小写字母的字符串。</p>
<p>string.upper(s)</p>
<p>接收一个字符串 s，返回一个把所有小写字母变成大写字母的字符串。</p>
<p>示例代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;hello lua&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">upper</span>(s))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">lower</span>(s))</span><br><span class="line"><span class="comment">--输出结果：</span></span><br><span class="line">HELLO LUA</span><br><span class="line">hello lua</span><br><span class="line"></span><br><span class="line"><span class="comment">--同时也可以使用简便语法</span></span><br><span class="line"><span class="built_in">print</span>(s:<span class="built_in">upper</span>())</span><br><span class="line"><span class="built_in">print</span>(s:<span class="built_in">lower</span>())</span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<p>已知一个变量<code>s</code>，打印出全是大写字母的s字符串</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;asd8938KJjsidiajdl;(()k)&quot;</span></span><br><span class="line"><span class="built_in">print</span> <span class="comment">--补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="string-format"><a href="#string-format" class="headerlink" title="string.format"></a>string.format</h2><p>string.format(formatstring, …)</p>
<p>按照格式化参数<code>formatstring</code>，返回后面<code>...</code>内容的格式化版本。</p>
<p>编写格式化字符串的规则与标准 c 语言中 printf 函数的规则基本相同：</p>
<p>它由常规文本和指示组成，这些指示控制了每个参数应放到格式化结果的什么位置，及如何放入它们。</p>
<p>一个指示由字符<code>%</code>加上一个字母组成，这些字母指定了如何格式化参数，例如<code>d</code>用于十进制数、<code>x</code>用于十六进制数、<code>o</code>用于八进制数、<code>f</code>用于浮点数、<code>s</code>用于字符串等。</p>
<p>示例代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%.4f&quot;</span>, <span class="number">3.1415926</span>))     <span class="comment">-- 保留4位小数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%d %x %o&quot;</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">31</span>))<span class="comment">-- 十进制数31转换成不同进制</span></span><br><span class="line">d,m,y = <span class="number">29</span>,<span class="number">7</span>,<span class="number">2015</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%s %02d/%02d/%d&quot;</span>, <span class="string">&quot;today is:&quot;</span>, d, m, y))</span><br><span class="line"><span class="comment">--控制输出2位数字，并在前面补0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;输出</span></span><br><span class="line"><span class="comment">-- 3.1416</span></span><br><span class="line"><span class="comment">-- 31 1f 37</span></span><br><span class="line"><span class="comment">-- today is: 29/07/2015</span></span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<ul>
<li>已知一个变量<code>n</code>，为<code>number</code>类型整数</li>
<li>打印出<code>n:</code>连上<code>n</code>值的字符串</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">810</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;n:%d&quot;</span>, n))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="string的本质"><a href="#string的本质" class="headerlink" title="string的本质"></a>string的本质</h2><p>这一节我们来讲解字符串的本质</p>
<p><code>字符串</code>，是用来存储一串字符的，<code>但是它的本质就是一串数字</code>。如何用一串数字来代表一串字符呢？</p>
<p>在计算机中，每一个符号都对应着一个数字，但是在讲解这个知识之前，我们了解一下补充知识：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在大多数编程语言中，我们使用<span class="number">0</span>x开头来表示这个数字是<span class="number">16</span>进制的。</span><br><span class="line">比如</span><br><span class="line"><span class="number">10</span>等价于<span class="number">0x0a</span></span><br><span class="line"><span class="number">256</span>等价于<span class="number">0xff</span></span><br></pre></td></tr></table></figure>

<p>接下来，你需要了解，每一个符号都对应着一个数字，比如：</p>
<p><code>0</code>对应着<code>0x30</code>、<code>1</code>对应着<code>0x31</code><br><code>a</code>对应着<code>0x61</code>、<code>b</code>对应着<code>0x62</code><br><code>A</code>对应着<code>0x41</code>、<code>B</code>对应着<code>0x42</code></p>
<p>上面的编码规则，我们称之为ascii码，具体想了解可以打开下面的网址查看：</p>
<p><a target="_blank" rel="noopener" href="http://ascii.911cha.com/">http://ascii.911cha.com/</a></p>
<p>当然，1字节最大为0xff，即256，只能存下一部分符号，大部分的中文按某些编码，一个中文占用2或3个字节</p>
<p>计算机如何解析这些数据，我们不需要了解，当你知道了上面的知识后，你应该可以理解下面的描述：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">字符串<span class="string">&quot;apple&quot;</span>实际上的内容就是下面的一串数字：</span><br><span class="line"><span class="number">0x61</span>,<span class="number">0x70</span>,<span class="number">0x70</span>,<span class="number">0x6c</span>,<span class="number">0x65</span></span><br></pre></td></tr></table></figure>

<p>同时，lua的字符串中可以保存任何数值，即使是0x00这种不代表任何含义的数，也可以保存</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">补充：在其他语言中（如C），<span class="number">0x00</span>代表字符串结束，但是在lua中并不是这样。</span><br><span class="line">lua的字符串每字节可以存储任意的一字节数据。</span><br></pre></td></tr></table></figure>

<p>比如下面的描述：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">有一串lua字符串中的数据为：</span><br><span class="line"><span class="number">0x01</span>,<span class="number">0x02</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="number">0x44</span></span><br><span class="line">实际人能看到的（不可见字符用�代替）：</span><br><span class="line">��<span class="number">0</span>�D</span><br><span class="line">当然，你不能说你看不见的数据就不存在，他们都完好无损地在这个字符串中</span><br></pre></td></tr></table></figure>

<p>下面你需要思考一个问题：一串字符串数据如下，它的实际内容是什么（指人能看见的字符串内容，如abcd）？</p>
<p>0x62,0x61,0x6e,0x61,0x6e,0x61</p>
<hr>
<h2 id="string-char"><a href="#string-char" class="headerlink" title="string.char"></a>string.char</h2><p>string.char (…)</p>
<p>接收 0 个或更多的整数（整数范围：0~255），返回这些整数所对应的 ASCII 码字符组成的字符串。当参数为空时，默认是一个 0。</p>
<p>如果上一章节有认真学习过了的话，这段话应该是很好理解的。实质上就是把计算机认识的一串数字，变成字符串变量，并且字符串内的数据就是要存的那串数据。</p>
<p>示例代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="built_in">string</span>.<span class="built_in">char</span>(<span class="number">0x30</span>,<span class="number">0x31</span>,<span class="number">0x32</span>,<span class="number">0x33</span>)</span><br><span class="line">str2 = <span class="built_in">string</span>.<span class="built_in">char</span>(<span class="number">0x01</span>,<span class="number">0x02</span>,<span class="number">0x30</span>,<span class="number">0x03</span>,<span class="number">0x44</span>)</span><br><span class="line"><span class="built_in">print</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(str2)</span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;输出（不可见字符用�代替）</span></span><br><span class="line"><span class="comment">--0123</span></span><br><span class="line"><span class="comment">--��0�D</span></span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<ul>
<li>已知一个字符串的每个字符在数组t中按顺序排列</li>
<li>请根据t的值，打印出字符串内容（一行数据）</li>
<li>注：这个字符串存储的不一定是可见的字符</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = &#123;<span class="number">0x79</span>,<span class="number">0x6F</span>,<span class="number">0x75</span>,<span class="number">0x20</span>,<span class="number">0x61</span>,<span class="number">0x72</span>,<span class="number">0x65</span>,<span class="number">0x20</span>,<span class="number">0x72</span>,<span class="number">0x69</span>,<span class="number">0x67</span>,<span class="number">0x68</span>,<span class="number">0x74</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;真正的字符串内容：&quot;</span>)</span><br><span class="line"><span class="comment">--补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="string-byte"><a href="#string-byte" class="headerlink" title="string.byte"></a>string.byte</h2><p>string.byte(s [, i [, j ] ])</p>
<p>返回字符 s[i]、s[i + 1]、s[i + 2]、······、s[j] 所对应的 ASCII 码。i 的默认值为 1，即第一个字节,j 的默认值为 i 。</p>
<p>这个函数功能刚好和前面的string.char相反，是提取字符串中实际的数值。</p>
<p>示例代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;12345&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(str,<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(str:<span class="built_in">byte</span>(<span class="number">2</span>))<span class="comment">--也可以这样</span></span><br><span class="line"><span class="built_in">print</span>(str:<span class="built_in">byte</span>())<span class="comment">--不填默认是1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;输出（十进制数据）</span></span><br><span class="line"><span class="comment">--50</span></span><br><span class="line"><span class="comment">--50</span></span><br><span class="line"><span class="comment">--49</span></span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<ul>
<li>已知字符串s</li>
<li>请把s中代表的数据，全部相加，并打印出来</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">string</span>.<span class="built_in">char</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;s内数据的和是：&quot;</span>)</span><br><span class="line"><span class="comment">--补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="string-find"><a href="#string-find" class="headerlink" title="string.find"></a>string.find</h2><p>string.find(s, p [, init [, plain] ])</p>
<p>这个函数会在字符串<code>s</code>中，寻找匹配<code>p</code>字符串的数据。如果成功找到，那么会返回<code>p</code>字符串在<code>s</code>字符串中出现的开始位置和结束位置；如果没找到，那么就返回<code>nil</code>。</p>
<p>第三个参数<code>init</code>默认为<code>1</code>，表示从第几个字符开始匹配，当<code>init</code>为负数时，表示从<code>s</code>字符串的倒数第<code>-init</code>个字符处开始匹配。</p>
<p>第四个参数<code>plain</code>默认为<code>false</code>，当其为<code>true</code>时，只会把<code>p</code>看成一个字符串对待。</p>
<blockquote>
<p>可能你会奇怪，第四个参数有什么存在的必要吗？p不是本来就应该是个字符串吗？<br>实际上，lua中的匹配默认意义是正则匹配，同时，这里的正则与其它语言也有些许不同。</p>
</blockquote>
<blockquote>
<p>由于篇幅有限，本节和下面的几节涉及匹配内容时，均不会考虑正则的使用方法，Lua正则教程将会在最后几节单独详细地列出来。</p>
</blockquote>
<p>第四个参数为<code>true</code>时，便不会使用正则功能。</p>
<p>示例代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--只会匹配到第一个</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;abc abc&quot;</span>, <span class="string">&quot;ab&quot;</span>))</span><br><span class="line"><span class="comment">-- 从索引为2的位置开始匹配字符串：ab</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;abc abc&quot;</span>, <span class="string">&quot;ab&quot;</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment">-- 从索引为5的位置开始匹配字符串：ab</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;abc abc&quot;</span>, <span class="string">&quot;ab&quot;</span>, <span class="number">-3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;输出</span></span><br><span class="line"><span class="comment">--1  2</span></span><br><span class="line"><span class="comment">--5  6</span></span><br><span class="line"><span class="comment">--5  6</span></span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<ul>
<li>已知字符串s，里面有很多相同的字符串</li>
<li>请找出字符串s中，所有字符串awsl的位置</li>
<li>使用print打印结果，结果一行一个</li>
<li>如字符串12awslawslaw，输出3和7</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;12awsaslwlaawsllslllswasllalssawwlawslaw&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;两个awsl的位置分别是：&quot;</span>)</span><br><span class="line"><span class="comment">--补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="string-gsub"><a href="#string-gsub" class="headerlink" title="string.gsub"></a>string.gsub</h2><p>string.gsub(s, p, r [, n])</p>
<p>将目标字符串<code>s</code>中所有的子串<code>p</code>替换成字符串r。</p>
<p>可选参数<code>n</code>，表示限制替换次数。</p>
<p>返回值有两个，第一个是被替换后的字符串，第二个是替换了多少次。</p>
<blockquote>
<p>特别提示：这个函数的目标字符串s，也是支持正则的</p>
</blockquote>
<p>下面是例子：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;Lua Lua Lua&quot;</span>, <span class="string">&quot;Lua&quot;</span>, <span class="string">&quot;hello&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;Lua Lua Lua&quot;</span>, <span class="string">&quot;Lua&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="number">2</span>)) <span class="comment">--指明第四个参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--&gt;打印的结果：</span></span><br><span class="line"><span class="comment">-- hello hello hello   3</span></span><br><span class="line"><span class="comment">-- hello hello Lua     2</span></span><br></pre></td></tr></table></figure>

<p>同样的，我们也可以使用冒号来简化语法，像下面这样：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;12345&quot;</span></span><br><span class="line">r = s:<span class="built_in">gsub</span>(<span class="string">&quot;2&quot;</span>,<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(r)</span><br></pre></td></tr></table></figure>

<p><strong>请完成下面的任务：</strong></p>
<ul>
<li>已知字符串变量s，请分别打印出（每种一行）：</li>
<li>把字符串s中，前5个a，替换为b</li>
<li>把字符串s中，前3个c，替换为xxx</li>
<li>把结果打印出来，一行数据</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;asdicagydausckfugdaflgscdabgsdbahhacbshbsd&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;s变换前的值：&quot;</span>,s)</span><br><span class="line"><span class="comment">--补全代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="正则匹配相关内容等待更新"><a href="#正则匹配相关内容等待更新" class="headerlink" title="正则匹配相关内容等待更新"></a>正则匹配相关内容等待更新</h2><hr>
<h1 id="跨文件调用"><a href="#跨文件调用" class="headerlink" title="跨文件调用"></a>跨文件调用</h1><p>在编写代码时，随着逻辑逐渐复杂，我们的代码量也会变大。虽然有<code>函数</code>可以把一部分代码逻辑封装起来，但是所有代码都放到一个文件里，显然也不是个好办法。</p>
<p>所以我们需要将一些代码放到不同文件中，通过文件来区分这些代码的功能。</p>
<p>比如我们有下面这个函数：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---函数功能：</span></span><br><span class="line"><span class="comment">-- 生成从1-max的table</span></span><br><span class="line"><span class="comment">-- @输入值：table的最大值</span></span><br><span class="line"><span class="comment">-- @返回：  table结果</span></span><br><span class="line"><span class="comment">-- @例子：  local list = getNumberList(10)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNumberList</span><span class="params">(max)</span></span></span><br><span class="line">    <span class="keyword">local</span> t = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,<span class="built_in">max</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(t,i)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> t</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>我们新建一个文件叫<code>tools.lua</code>，把这个函数放进去，现在，整个文件如下面这样：</p>
<p><code>tools.lua</code></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---函数功能：</span></span><br><span class="line"><span class="comment">-- 生成从1-max的table</span></span><br><span class="line"><span class="comment">-- @输入值：table的最大值</span></span><br><span class="line"><span class="comment">-- @返回：  table结果</span></span><br><span class="line"><span class="comment">-- @例子：  local list = getNumberList(10)</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">getNumberList</span><span class="params">(max)</span></span></span><br><span class="line">    <span class="keyword">local</span> t = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,<span class="built_in">max</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(t,i)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> t</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--手动返回一个table，包含了上面的函数</span></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    getNumberList = getNumberList,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在，我们封装的这个函数就能在其他文件里被调用了，具体代码如下：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--引用tools.lua文件，并加载</span></span><br><span class="line"><span class="keyword">local</span> tool = <span class="built_in">require</span>(<span class="string">&quot;tools&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> list = tool.getNumberList(<span class="number">12</span>)</span><br></pre></td></tr></table></figure>

<p>当调用了<code>require</code>接口后，Lua虚拟机会自动加载你调用的文件，<code>执行文件的内容</code>，然后<code>返回你文件里return的结果</code>。</p>
<p>为了更好地理解这段话，我们可以看下面两个文件，其中run.lua是被运行的那个入口文件</p>
<p><code>test.lua</code></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--以便一会儿返回使用的table</span></span><br><span class="line"><span class="keyword">local</span> temp = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--把全局变量a更改了</span></span><br><span class="line">a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--local变量无法被外部调用</span></span><br><span class="line"><span class="comment">--但是可以在文件内被调用</span></span><br><span class="line"><span class="keyword">local</span> b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--文件在被require的时候，会被执行</span></span><br><span class="line"><span class="comment">--把全局变量c更改了</span></span><br><span class="line">c = a + b</span><br><span class="line"></span><br><span class="line"><span class="comment">--使函数在table里</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">temp.addB</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">--文件内部可以调用变量b</span></span><br><span class="line">    b = b + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--返回table</span></span><br><span class="line"><span class="keyword">return</span> temp</span><br></pre></td></tr></table></figure>

<p><code>run.lua</code></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> test = <span class="built_in">require</span>(<span class="string">&quot;test&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)<span class="comment">--输出1</span></span><br><span class="line"><span class="built_in">print</span>(b)<span class="comment">--输出nil，因为b是local变量</span></span><br><span class="line"><span class="built_in">print</span>(c)<span class="comment">--输出3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(test.addB())<span class="comment">--输出3</span></span><br><span class="line"><span class="built_in">print</span>(test.addB())<span class="comment">--输出4</span></span><br><span class="line"><span class="built_in">print</span>(test.addB())<span class="comment">--输出5</span></span><br></pre></td></tr></table></figure>

<p>同时，每个文件最多只会被<code>require</code>一次，如果有多个<code>require</code>，只有第一次会执行</p>
<h1 id="待添加"><a href="#待添加" class="headerlink" title="待添加"></a>待添加</h1><ul>
<li>table  -&gt; sort排序</li>
<li>string -&gt; 正则、gsub、find、match</li>
<li>迭代器  for xx in xx  、string.gmatch</li>
<li>元表</li>
<li>coroutine</li>
</ul>
<p>↓各种接口↓</p>
<ul>
<li>math库</li>
<li>os库</li>
<li>io库</li>
<li>位运算 （&gt;&gt; &lt;&lt;）</li>
<li>杂项接口</li>
<li>debug库</li>
</ul>
<script>
window.onload = function(){
    //在代码块附近加上快速测试代码链接
    $("pre").each(function () {
        if($(this).text().indexOf("print") >= 0)
            $(this).before('<a class="run-code-btn" href="https://wiki.luatos.com/_static/luatos-emulator/lua.html?'+escape($(this).text())+'" target="_blank">点我快速测试下面的代码</a>');
    });
}
</script>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Qeuroal
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://qeuroal.top/2024/11/16/217/" title="217. lua">http://qeuroal.top/2024/11/16/217/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/lua/" rel="tag"><i class="fa fa-tag"></i> lua</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/11/16/218/" rel="prev" title="218. lua">
                  <i class="fa fa-angle-left"></i> 218. lua
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/12/12/219/" rel="next" title="217. 配置">
                  217. 配置 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Qeuroal</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/Qeuroal" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.24/fancybox/fancybox.umd.js" integrity="sha256-oyhjPiYRWGXaAt+ny/mTMWOnN1GBoZDUQnzzgC7FRI4=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
