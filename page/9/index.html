<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/avatar.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.24/fancybox/fancybox.css" integrity="sha256-vQkngPS8jiHHH0I6ABTZroZk8NPZ7b+MUReOFE9UsXQ=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"qeuroal.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="大人者，不失其赤子之心">
<meta property="og:type" content="website">
<meta property="og:title" content="Qeuroal&#39;s Blog">
<meta property="og:url" content="http://qeuroal.top/page/9/index.html">
<meta property="og:site_name" content="Qeuroal&#39;s Blog">
<meta property="og:description" content="大人者，不失其赤子之心">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Qeuroal">
<meta property="article:tag" content="C&#x2F;C++, Python, Java">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://qeuroal.top/page/9/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/9/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Qeuroal's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Qeuroal's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">静幽正治</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Qeuroal"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Qeuroal</p>
  <div class="site-description" itemprop="description">大人者，不失其赤子之心</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">187</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Qeuroal" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Qeuroal" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2023/05/12/149/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/12/149/" class="post-title-link" itemprop="url">149. Arch Linux 安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-12 15:00:00" itemprop="dateCreated datePublished" datetime="2023-05-12T15:00:00+08:00">2023-05-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="pd-配置"><a href="#pd-配置" class="headerlink" title="pd 配置"></a>pd 配置</h1><h2 id="共享文件夹"><a href="#共享文件夹" class="headerlink" title="共享文件夹"></a>共享文件夹</h2><p>选择 整个 <code>$HOME</code> 目录吧</p>
<img data-src="/2023/05/12/149/image-20230512165115342.png" class="" title="image-20230512165115342">

<img data-src="/2023/05/12/149/image-20230525145603785.png" class="" title="image-20230525145603785">



<h2 id="应用程序"><a href="#应用程序" class="headerlink" title="应用程序"></a>应用程序</h2><img data-src="/2023/05/12/149/image-20230512165139951.png" class="" title="image-20230512165139951">

<h2 id="打印机"><a href="#打印机" class="headerlink" title="打印机"></a>打印机</h2><img data-src="/2023/05/12/149/image-20230512164127212.png" class="" title="image-20230512164127212">



<h2 id="启动顺序"><a href="#启动顺序" class="headerlink" title="启动顺序"></a>启动顺序</h2><p>启动顺序 -&gt; 高级 -&gt; BIOS:EFI 64位</p>
<img data-src="/2023/05/12/149/image-20230512164413647.png" class="" title="image-20230512164413647"> 



<h2 id="CD-DVD"><a href="#CD-DVD" class="headerlink" title="CD&#x2F;DVD"></a>CD&#x2F;DVD</h2><img data-src="/2023/05/12/149/image-20230512165321543.png" class="" title="image-20230512165321543">





<h2 id="隔离-linux-与-mac"><a href="#隔离-linux-与-mac" class="headerlink" title="隔离 linux 与 mac"></a>隔离 linux 与 mac</h2><p>不建议打开</p>
<h2 id="关闭3d加速"><a href="#关闭3d加速" class="headerlink" title="关闭3d加速"></a>关闭3d加速</h2><img data-src="/2023/05/12/149/image-20230525145635511.png" class="" title="image-20230525145635511">





<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="从-Live-USB-启动-Arch-Linux"><a href="#从-Live-USB-启动-Arch-Linux" class="headerlink" title="从 Live USB 启动 Arch Linux"></a>从 Live USB 启动 Arch Linux</h2><p>为 Arch Linux 创建实时 USB 后，关闭计算机，将 USB 插入其中，然后启动系统。</p>
<p>请记住，在某些情况下，您可能无法从启用安全启动的实时 USB 启动。如果您是这种情况，请先访问 BIOS 并禁用安全启动。</p>
<p>Arch Linux 安装有两种可能的选项——传统模式和 UEFI 模式。UEFI（统一可扩展固件接口）模式更新，大多数现代硬件仅支持 UEFI 安装。因此，本 Arch Linux 安装指南将使用 UEFI 模式。</p>
<p>正确启动到 Arch ISO 后，您应该会看到类似于下图所示的内容。</p>
<img data-src="/2023/05/12/149/image-20230512165720369.png" class="" title="image-20230512165720369">

<p>选择<code>Arch Linux install medium (x86_64, UEFI)</code>选项并点击<code>Enter</code>。</p>
<p>安装程序解压并加载 Linux 内核后， 您将自动跳转到具有 root 权限的终端。</p>
<h2 id="验证与-Internet-的连接"><a href="#验证与-Internet-的连接" class="headerlink" title="验证与 Internet 的连接"></a>验证与 Internet 的连接</h2><p>首先，检查互联网连接。要检查互联网连接，只需 ping 一个网站，如下例所示。</p>
<img data-src="/2023/05/12/149/image-20230512170255886.png" class="" title="image-20230512170255886">

<p>如果你收到一个错误信息，请检查你的互联网连接或路由器。</p>
<h2 id="对磁盘进行分区"><a href="#对磁盘进行分区" class="headerlink" title="对磁盘进行分区"></a>对磁盘进行分区</h2><p>我们 Arch Linux 安装指南的下一步是对硬盘进行分区。如果您不熟悉诸如 <code>fdisk</code> 或之类的分区工具，那么您很可能会在这里遇到最大的麻烦<code>cfdisk</code>。不过别担心，这很容易，你会看到。</p>
<p>首先列出您的磁盘：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512170403740.png" class="" title="image-20230512170403740">

<p>出于本指南的目的，我们创建一个虚拟机，其中包含一个由 <code>/dev/sda</code>。更改<code>/dev/sda</code>为您的设备名称。</p>
<p>对于基本分区，我们需要创建以下分区布局：</p>
<ul>
<li><code>/dev/sda1</code>: <strong>EFI 系统分区</strong>，大小为 512 MB，FAT32 格式。这为存储引导加载程序和引导所需的其他文件提供了空间。</li>
<li><code>/dev/sda2</code>：<strong>交换分区</strong>，4GB 大小。交换空间用于将虚拟内存扩展到已安装的物理内存 (RAM) 之外，或用于挂起磁盘支持。</li>
<li><code>/dev/sda3</code>：<strong>Linux分区</strong>，剩余可用磁盘空间大小，EXT4格式。这是存储我们的 Arch Linux 操作系统、文件和其他信息的根 (<code>/</code>) 分区。</li>
</ul>
<h3 id="创建-EFI-系统分区"><a href="#创建-EFI-系统分区" class="headerlink" title="创建 EFI 系统分区"></a>创建 EFI 系统分区</h3><p>现在让我们通过<code>cfdisk</code> 对机器硬盘驱动器运行命令来实际开始创建磁盘布局分区表 。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfdisk /dev/sda</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512170518014.png" class="" title="image-20230512170518014">

<p>选择 <code>GPT</code> 标签类型并点击<code>Enter</code>。</p>
<p>然后 从底部菜单中选择 <code>Free Space</code> 并点击 <code>New</code>。您可以使用<code>Tab</code>或 箭头键浏览菜单选项。</p>
<img data-src="/2023/05/12/149/image-20230512170642192.png" class="" title="image-20230512170642192">

<p>以 MB ( <code>1024M</code>) 为单位键入分区大小，然后按<code>Enter</code>键。</p>
<img data-src="/2023/05/12/149/image-20230512170800026.png" class="" title="image-20230512170800026">

<p>在<code>/dev/sda1</code>分区仍然被选中的情况下，从底部菜单中选择<code>Type</code>并选择<code>EFI System</code>分区类型。</p>
<img data-src="/2023/05/12/149/image-20230512170849132.png" class="" title="image-20230512170849132">

<p>现在，您已完成 EFI 系统分区的配置。</p>
<img data-src="/2023/05/12/149/image-20230512170921662.png" class="" title="image-20230512170921662">



<h3 id="创建交换分区"><a href="#创建交换分区" class="headerlink" title="创建交换分区"></a>创建交换分区</h3><p><code>j</code> 键下移选项</p>
<p>现在让我们使用相同的过程创建 Swap 分区。再次选择剩余的<code>Free space</code>和 并点击<code>New</code>。</p>
<img data-src="/2023/05/12/149/image-20230512171016454.png" class="" title="image-20230512171016454">

<p>以 GB ( <code>4G</code>) 为单位键入分区大小，然后按<code>Enter</code>键。</p>
<img data-src="/2023/05/12/149/image-20230512171132625.png" class="" title="image-20230512171132625">

<p>在<code>/dev/sda2</code>分区仍然被选中的情况下，从底部菜单中选择<code>Type</code>并选择<code>Linux swap</code>分区类型。</p>
<img data-src="/2023/05/12/149/image-20230512171205234.png" class="" title="image-20230512171205234">

<p>现在，您已经完成了 Swap 分区的配置。</p>
<img data-src="/2023/05/12/149/image-20230512171242011.png" class="" title="image-20230512171242011">



<h3 id="创建根分区"><a href="#创建根分区" class="headerlink" title="创建根分区"></a>创建根分区</h3><p>最后，您需要创建根 ( <code>/</code>) 分区。再次选择剩余的<code>Free space</code>并点击<code>New</code>。</p>
<img data-src="/2023/05/12/149/image-20230512171437402.png" class="" title="image-20230512171437402">

<p>对于 ( <code>/</code>) 大小，保留默认大小值。这意味着，所有剩余的可用空间。按<code>Enter</code>键。</p>
<p>在<code>/dev/sda3</code>分区仍然被选中的情况下，从底部菜单中选择<code>Type</code>并选择<code>Linux filesystem</code>分区类型。</p>
<img data-src="/2023/05/12/149/image-20230512171354628.png" class="" title="image-20230512171354628">

<p>现在，您已经完成了根分区的配置。</p>
<h3 id="将更改写入磁盘"><a href="#将更改写入磁盘" class="headerlink" title="将更改写入磁盘"></a>将更改写入磁盘</h3><p>接下来，您需要保存所做的更改。选择<code>Write</code>从底部菜单和命中<code>Enter</code>。</p>
<img data-src="/2023/05/12/149/image-20230512171641715.png" class="" title="image-20230512171641715">

<p>键入<code>yes</code>并按下<code>Enter</code>键。</p>
<img data-src="/2023/05/12/149/image-20230512171655542.png" class="" title="image-20230512171655542">

<p>我们到此结束。选择<code>Quit</code>并按下<code>Enter</code>即可。</p>
<img data-src="/2023/05/12/149/image-20230512171717589.png" class="" title="image-20230512171717589">



<h2 id="创建文件系统"><a href="#创建文件系统" class="headerlink" title="创建文件系统"></a>创建文件系统</h2><p>现在您已准备好磁盘分区，是时候在其上创建文件系统了。但是让我们首先通过运行来查看分区表摘要：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512171831589.png" class="" title="image-20230512171831589">



<p>该<code>/dev/sda</code>磁盘应该有三个分区（<code>/dev/sda1</code>，<code>dev/sda2</code>，和<code>/dev/sda3</code>）类似于上面所示的那些。</p>
<p>前面步骤中分区的创建只是在硬盘提供的存储空间上划出边界，并指定了每条边界线之间的空间类型。现在，是时候用所需的文件系统格式化分区了。</p>
<p>我们必须在这里创建 3 个文件系统，所以让我们开始吧。</p>
<p><strong>对于 EFI 分区类型，创建一个 FAT32 文件系统。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.fat -F32 /dev/sda1</span><br></pre></td></tr></table></figure>

<p><strong>准备交换分区：</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkswap /dev/sda2</span><br><span class="line">swapon /dev/sda2</span><br></pre></td></tr></table></figure>

<p><strong>对于根分区</strong>，创建一个 ext4 文件系统：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 /dev/sda3</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512172155180.png" class="" title="image-20230512172155180">





<h2 id="安装-Arch-Linux"><a href="#安装-Arch-Linux" class="headerlink" title="安装 Arch Linux"></a>安装 Arch Linux</h2><h3 id="修改镜像源"><a href="#修改镜像源" class="headerlink" title="修改镜像源"></a>修改镜像源</h3><p>进入<code>/etc/pacman.d</code>目录，修改<code>mirrorlist</code>文件，默认情况下，mirrorlist文件里面包含了许多源地址，这样会导致下载程序包速度很慢，我们只需要启用中国的源地址就可以：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/pacman.d</span><br><span class="line"><span class="built_in">cp</span> mirrorlist mirrorlist.backup</span><br><span class="line">vim mirrorlist</span><br></pre></td></tr></table></figure>

<p>修改<a target="_blank" rel="noopener" href="https://archlinux.org/mirrorlist/?country=CN&protocol=http&protocol=https&ip_version=4">镜像源</a></p>
<ul>
<li><p>全部下载, 打开China</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -o /etc/pacman.d/mirrorlist https://archlinux.org/mirrorlist/all/</span></span><br><span class="line"><span class="comment"># vim /etc/pacman.d/mirrorlist</span></span><br><span class="line"><span class="comment"># 找到 China, 删除 China 下的列表中的 &#x27;#&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>只下载China的</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -o /etc/pacman.d/mirrorlist https://archlinux.org/mirrorlist/\?country\=CN</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="同步-pacman-存储库"><a href="#同步-pacman-存储库" class="headerlink" title="同步 pacman 存储库"></a>同步 pacman 存储库</h3><p>首先同步 pacman 存储库，以便您可以下载和安装软件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Syy</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512172924523.png" class="" title="image-20230512172924523">



<h3 id="挂载根分区-安装"><a href="#挂载根分区-安装" class="headerlink" title="挂载根分区 &amp; 安装"></a>挂载根分区 &amp; 安装</h3><p>我们必须先将根分区 ( <code>/dev/sda3</code>)挂载到 <code>/mnt</code>目录中，然后才能执行所有的安装。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sda3 /mnt</span><br></pre></td></tr></table></figure>

<p>安装根分区后，是时候安装所有必要的包了。使用该 <code>pacstrap</code> 命令安装 Arch Linux 所需的软件包。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacstrap /mnt base base-devel linux linux-firmware sudo nano net-tools</span><br></pre></td></tr></table></figure>

<p>下载和安装这些软件包需要一些时间。现在我们可以开始配置我们的系统了。</p>
<p><em>注:</em> 若不放心,可以多运行几遍 <code>pacstrap /mnt base linux linux-firmware sudo nano</code></p>
<h2 id="配置已安装的-Arch-系统"><a href="#配置已安装的-Arch-系统" class="headerlink" title="配置已安装的 Arch 系统"></a>配置已安装的 Arch 系统</h2><h3 id="fstab文件"><a href="#fstab文件" class="headerlink" title="fstab文件"></a>fstab文件</h3><p>生成一下<code>fstab</code>文件，让系统明白自己是谁和自己在哪。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure>

<p>然后可以执行以下命令看看<code>fstab</code>文件是否生成正确。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /mnt/etc/fstab</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512173656961.png" class="" title="image-20230512173656961">



<h3 id="arch-chroot"><a href="#arch-chroot" class="headerlink" title="arch-chroot"></a>arch-chroot</h3><p>以root身份进入我们的新系统，这次是进来是为了配置系统的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /mnt</span><br></pre></td></tr></table></figure>

<p>先告诉系统现在的时间是基于哪个时区的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 设定时区</span><br><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line"></span><br><span class="line"># 设置硬件时钟</span><br><span class="line">hwclock -w</span><br></pre></td></tr></table></figure>



<h3 id="设置语言"><a href="#设置语言" class="headerlink" title="设置语言"></a>设置语言</h3><p>先安装个vim，当然也可以装nano，看哪个用得顺手。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># vim</span><br><span class="line">pacman -S vim</span><br><span class="line"></span><br><span class="line"># nano</span><br><span class="line">pacman -S nano</span><br></pre></td></tr></table></figure>



<p>编辑<code>/etc/locale.gen</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># vim 方式</span><br><span class="line">vim /etc/locale.gen</span><br><span class="line"></span><br><span class="line"># nano方式</span><br><span class="line">nano /etc/locale.gen</span><br></pre></td></tr></table></figure>



<p>把以下几行开头的<code>#</code>符号去掉。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">en_US.UTF-8 UTF-8</span><br><span class="line">en_GB.UTF-8 UTF-8  // 这行看是否需要</span><br><span class="line">zh_CN.UTF-8 UTF-8</span><br></pre></td></tr></table></figure>



<p>编辑完保存退出，然后执行下面的指令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">locale-gen</span><br></pre></td></tr></table></figure>



<p>现在来编辑一下<code>local.conf</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># vim 方式</span><br><span class="line">vim /etc/locale.conf</span><br><span class="line"></span><br><span class="line"># nano 方式</span><br><span class="line">nano /etc/locale.conf</span><br><span class="line"></span><br><span class="line">##### 编辑以下内容后保存退出</span><br><span class="line">LANG=en_US.UTF-8</span><br></pre></td></tr></table></figure>



<h3 id="配置网络"><a href="#配置网络" class="headerlink" title="配置网络"></a>配置网络</h3><p>创建编辑<code>/etc/hostname</code>，自己定义一个主机名，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost</span><br></pre></td></tr></table></figure>

<p>然后编辑<code>/etc/hosts</code>，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1    localhost</span><br><span class="line">::1          localhost</span><br><span class="line">127.0.1.1    localhost</span><br></pre></td></tr></table></figure>

<p>执行以下命令去应用网络服务自启动：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable systemd-networkd</span><br><span class="line">systemctl enable systemd-resolved</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pacman -S dhcpcd networkmanager</span><br><span class="line"></span><br><span class="line">systemctl enable dhcpcd</span><br><span class="line">systemctl enable NetworkManager</span><br><span class="line"></span><br><span class="line">使用无线网络的话，则需安装以下几个软件包（未验证）</span><br><span class="line">pacman -S iw wpa_supplicant dialog	（有线网络忽略这行）</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230513065956206.png" class="" title="image-20230513065956206">

<p>配置以太网：**(可选)**</p>
<p>编辑<code>/etc/systemd/network/20-wired.network</code>，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Match]</span><br><span class="line">Name=ens33</span><br><span class="line"></span><br><span class="line">[Network]</span><br><span class="line">DHCP=yes</span><br></pre></td></tr></table></figure>

<p><u>虽然没啥用，vmware 约等于静态ip了</u></p>
<h3 id="修改ROOT密码"><a href="#修改ROOT密码" class="headerlink" title="修改ROOT密码"></a>修改ROOT密码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512174500807.png" class="" title="image-20230512174500807">



<h2 id="在-Arch-Linux-上安装-GRUB-引导程序"><a href="#在-Arch-Linux-上安装-GRUB-引导程序" class="headerlink" title="在 Arch Linux 上安装 GRUB 引导程序"></a>在 Arch Linux 上安装 GRUB 引导程序</h2><p>现在我们安装引导加载程序，以便 Arch 在重新启动后启动。Linux 发行版和 Arch Linux 的默认引导加载程序也由 GRUB 包表示。</p>
<p>安装 GRUB 引导加载程序和 EFI 引导管理器包：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S grub efibootmgr os-prober mtools</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512174629602.png" class="" title="image-20230512174629602">



<p>然后创建挂载点 <code>/dev/sda1</code>并挂载它。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /boot/efi</span><br><span class="line">mount /dev/sda1 /boot/efi</span><br></pre></td></tr></table></figure>

<p>现在让我们安装我们的引导加载程序。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-install –-target=x86_64-efi –-bootloader-id=grub_uefi</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Installing for x86_64-efi platform.</span><br><span class="line">Installation finished. No error reported.</span><br></pre></td></tr></table></figure>

<p>最后，生成 <code>/boot/grub/grub.cfg</code> 文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512174940915.png" class="" title="image-20230512174940915">



<h2 id="创建一个普通用户帐户"><a href="#创建一个普通用户帐户" class="headerlink" title="创建一个普通用户帐户"></a>创建一个普通用户帐户</h2><p>用户帐户的创建方法也会自动为用户创建主目录。另外，我们可以给这个账号<code>sudo</code>权限。写比如我们的是<code>Qeuroal</code>。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -m -G wheel Qeuroal</span><br></pre></td></tr></table></figure>

<p>请务必为新用户设置密码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd Qeuroal</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512175410664.png" class="" title="image-20230512175410664">



<p>接下来，<code>sudo</code>为新创建的用户启用权限：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 使用vim编辑visudo</span><br><span class="line">EDITOR=vim visudo</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>向下滚动屏幕并找到以下行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># %wheel ALL=(ALL) ALL</span><br><span class="line">// 在文件中添加如下内容</span><br><span class="line">用户名 ALL=(ALL) ALL</span><br></pre></td></tr></table></figure>

<p>通过删除<code>#</code>符号取消注释。</p>
<img data-src="/2023/05/12/149/image-20230512175732962.png" class="" title="image-20230512175732962">



<h2 id="Arch-Linux-安装完成"><a href="#Arch-Linux-安装完成" class="headerlink" title="Arch Linux 安装完成"></a>Arch Linux 安装完成</h2><p>恭喜！<strong>现在我们已经完成了 Arch Linux 的安装，</strong>所以我们现在将从终端退出并卸载我们的根分区并<strong>重新启动到我们新安装的 Arch Linux 系统</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br><span class="line">umount -R /mnt</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<img data-src="/2023/05/12/149/image-20230512175942223.png" class="" title="image-20230512175942223">

<img data-src="/2023/05/12/149/image-20230512180002738.png" class="" title="image-20230512180002738">



<h2 id="parallels-tools"><a href="#parallels-tools" class="headerlink" title="parallels tools"></a>parallels tools</h2><img data-src="/2023/05/12/149/image-20230513071921603.png" class="" title="image-20230513071921603">



<h1 id="安装KDE桌面"><a href="#安装KDE桌面" class="headerlink" title="安装KDE桌面"></a>安装KDE桌面</h1><h2 id="集显驱动安装"><a href="#集显驱动安装" class="headerlink" title="集显驱动安装"></a>集显驱动安装</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep -e VGA -e 3D	//查看显卡类型</span><br><span class="line"></span><br><span class="line">pacman -Ss xf86-video		//查询所有开源驱动</span><br><span class="line"></span><br><span class="line">sudo pacman -S xf86-video-intel	//安装intel集显驱动</span><br></pre></td></tr></table></figure>



<h2 id="安装Xorg"><a href="#安装Xorg" class="headerlink" title="安装Xorg"></a>安装Xorg</h2><p><a href="https://link.zhihu.com/?target=https://wiki.archlinux.org/title/Xorg_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Xorg (简体中文) - ArchWiki (archlinux.org)</a></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg</span><br></pre></td></tr></table></figure>



<h2 id="安装sddm"><a href="#安装sddm" class="headerlink" title="安装sddm"></a>安装sddm</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pacman -S sddm</span><br><span class="line"></span><br><span class="line">systemctl enable sddm	// 设置开机自启</span><br></pre></td></tr></table></figure>



<h2 id="安装Plasma桌面"><a href="#安装Plasma桌面" class="headerlink" title="安装Plasma桌面"></a>安装Plasma桌面</h2><ul>
<li>kde-applications：KDE 的全套应用（软件太多了，很多用不到，在此不安装）</li>
<li>konsole：终端</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S plasma konsole</span><br></pre></td></tr></table></figure>



<h2 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>







<h1 id="How-to-Install-Parallels-Tools-on-Manjaro"><a href="#How-to-Install-Parallels-Tools-on-Manjaro" class="headerlink" title="How to Install Parallels Tools on Manjaro"></a>How to Install Parallels Tools on Manjaro</h1><blockquote>
<p>Steps required to install Paralells Tools on Manjaro Linux</p>
</blockquote>
<h2 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h2><ol>
<li><p>Install Manjaro Linux on a VM (it’s recommended to take a snapshot before installing Parallels Tools)</p>
</li>
<li><p>Update the OS</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Syu</span><br></pre></td></tr></table></figure>
</li>
<li><p>Install the latest LTS kernel and kernel headers (See <a target="_blank" rel="noopener" href="https://wiki.manjaro.org/index.php/Manjaro_Kernels">this</a>)</p>
<p>Note: To install the headers, run <code>uname -r</code> and look at the first two numbers to figure out the package name. For example if the output of <code>uname -r</code> is <code>4.19.32-1-MANJARO</code> the kernel headers package name for your kernel would be <code>linux419-headers</code>.</p>
</li>
<li><p>Install base-devel package group and DKMS</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S base-devel dkms</span><br></pre></td></tr></table></figure>
</li>
<li><p>Connect the Parallels Tools image and run the installer script</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/cdrom</span><br><span class="line">mount /dev/cdrom /mnt/cdrom</span><br><span class="line">/mnt/cdrom/install</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2023/05/12/148/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/12/148/" class="post-title-link" itemprop="url">148. zsh + powerlevel10</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-12 13:00:00" itemprop="dateCreated datePublished" datetime="2023-05-12T13:00:00+08:00">2023-05-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="安装-zsh"><a href="#安装-zsh" class="headerlink" title="安装 zsh"></a>安装 zsh</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># macOS</span></span><br><span class="line">brew install zsh zsh-completions</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ubuntu</span></span><br><span class="line">sudo apt-get install zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS</span></span><br><span class="line">sudo yum -y install zsh</span><br></pre></td></tr></table></figure>

<h3 id="切换"><a href="#切换" class="headerlink" title="切换"></a>切换</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>

<h2 id="安装zsh框架"><a href="#安装zsh框架" class="headerlink" title="安装zsh框架"></a>安装zsh框架</h2><p><em><strong>选择其中一个安装即可</strong></em></p>
<h3 id="安装-oh-my-zsh"><a href="#安装-oh-my-zsh" class="headerlink" title="安装 oh-my-zsh"></a>安装 oh-my-zsh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mac</span></span><br><span class="line">bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ubuntu</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>



<h3 id="安装-zim"><a href="#安装-zim" class="headerlink" title="安装 zim"></a>安装 zim</h3><ol>
<li><p>安装 <code>zim</code> 。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://raw.githubusercontent.com/zimfw/install/master/install.zsh | zsh</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑 Zsh 配置文件 <code>~/.zimrc</code> ：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zimrc</span><br></pre></td></tr></table></figure>
</li>
<li><p>在文件最后加入下面的一行文字，以添加 <code>powerlevel10k</code> 模块，然后退出。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zmodule romkatv/powerlevel10k</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 <code>powerlevel10k</code> 模块，在终端输入如下命令即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zimfw install</span><br></pre></td></tr></table></figure>

<p>安装之后，<code>powerlevel10k</code>会让你进行配置。</p>
<p>在此时配置时，很多图标符号看不到，因为 <code>powerlevel10k</code> 中包含许多特殊图标符号，需要与之兼容的字体。</p>
</li>
</ol>
<h2 id="安装-powerlevel10K-主题"><a href="#安装-powerlevel10K-主题" class="headerlink" title="安装 powerlevel10K 主题"></a>安装 powerlevel10K 主题</h2><h3 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h3><blockquote>
<p>方法1 (推荐)</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth=1 https://github.com/romkatv/powerlevel10k.git <span class="variable">$ZSH_CUSTOM</span>/themes/powerlevel10k</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方法2</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ./.oh-my-zsh/themes</span><br><span class="line">git <span class="built_in">clone</span>  https://github.com/romkatv/powerlevel10k.git</span><br></pre></td></tr></table></figure>

<h3 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a>配置主题</h3><p><code>~/.zshrc</code> 设置如下内容, 以使用p10k主题 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSH_THEME=&quot;powerlevel10k/powerlevel10k&quot;</span><br></pre></td></tr></table></figure>

<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><h3 id="语法高亮插件"><a href="#语法高亮插件" class="headerlink" title="语法高亮插件"></a>语法高亮插件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.oh-my-zsh/custom/plugins/ &amp;&amp; git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git</span><br></pre></td></tr></table></figure>



<h3 id="自动补全"><a href="#自动补全" class="headerlink" title="自动补全"></a>自动补全</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.oh-my-zsh/custom/plugins/ &amp;&amp; git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions</span><br></pre></td></tr></table></figure>

<h3 id="自动跳转"><a href="#自动跳转" class="headerlink" title="自动跳转"></a>自动跳转</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mac</span></span><br><span class="line">brew install autojump</span><br><span class="line"></span><br><span class="line"><span class="comment"># ubuntu</span></span><br><span class="line">sudo apt install autojump</span><br></pre></td></tr></table></figure>



<h2 id="zshrc-配置插件"><a href="#zshrc-配置插件" class="headerlink" title="zshrc 配置插件"></a>zshrc 配置插件</h2><h3 id="oh-my-zsh框架"><a href="#oh-my-zsh框架" class="headerlink" title="oh-my-zsh框架"></a>oh-my-zsh框架</h3><p>接下来 <code>~/.zshrc</code> 在插件配置处添加下载的这两个插件名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins=(</span><br><span class="line">     git</span><br><span class="line">     zsh-syntax-highlighting</span><br><span class="line">     zsh-autosuggestions</span><br><span class="line">     autojump</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>另外, 时间戳改一下格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HIST_STAMPS=&quot;yyyy-mm-dd&quot;</span><br></pre></td></tr></table></figure>

<h3 id="zim框架"><a href="#zim框架" class="headerlink" title="zim框架"></a>zim框架</h3><ul>
<li><p>mac</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ -s /usr/local/etc/profile.d/autojump.sh  ]] &amp;&amp; . /usr/local/etc/profile.d/autojump.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>linux</p>
<ul>
<li><p>ubuntu</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ -s /usr/share/autojump/autojump.sh ]] &amp;&amp; . /usr/share/autojump/autojump.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>archlinux</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ -s /usr/share/autojump/autojump.bash ]] &amp;&amp; . /usr/share/autojump/autojump.bash</span><br></pre></td></tr></table></figure>

<blockquote>
<p>[!ERROR] &#x2F;usr&#x2F;share&#x2F;autojump&#x2F;autojump.bash:34: command not found: complete<br>在 <code>.zshrc</code> 文件中添加以下命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">autoload bashcompinit</span><br><span class="line">bashcompinit</span><br></pre></td></tr></table></figure></blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="安装依赖字体"><a href="#安装依赖字体" class="headerlink" title="安装依赖字体"></a>安装依赖字体</h1><p>运行 <code>p10k configure</code> 向导模式进行p10k的主题定制</p>
<p>完成后会生成一个配置文件 <code>~/.p10k.zsh</code>，并且在 <code>~/.zshrc</code> 中自动加入了</p>
<h2 id="下载字体"><a href="#下载字体" class="headerlink" title="下载字体"></a>下载字体</h2><p>推荐 <code>JetBrainsMono Nerd Font</code></p>
<blockquote>
<p>网站</p>
</blockquote>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.nerdfonts.com/font-downloads">Nert Fonts 下载</a></p>
<p> 推荐 <code>JetBrainsMono Nerd Font</code>, <a target="_blank" rel="noopener" href="https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/JetBrainsMono.zip">点击下载(v3.0.2)</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.nerdfonts.com/">Nert Fonts</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/ryanoasis/nerd-fonts/">Nerd Font Github</a> </p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/source-foundry/Hack/releases">Hack Nerd Font Github</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/microsoft/cascadia-code">Caskaydia Cove Nerd Font</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/romkatv/powerlevel10k">MesloLGS NF 官网地址</a></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> fonts</span><br><span class="line">curl -o ./fonts/MesloLGS\ NF\ Regular.ttf https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Regular.ttf</span><br><span class="line">curl -o ./fonts/MesloLGS\ NF\ Bold.ttf https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Bold.ttf</span><br><span class="line">curl -o ./fonts/MesloLGS\ NF\ Italic.ttf https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Italic.ttf</span><br><span class="line">curl -o ./fonts/MesloLGS\ NF\ Bold\ Italic.ttf https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/MesloLGS%20NF%20Bold%20Italic.ttf</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="安装字体"><a href="#安装字体" class="headerlink" title="安装字体"></a>安装字体</h2><ol>
<li><p>linux</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ./install.sh -of</span><br></pre></td></tr></table></figure>
</li>
<li><p>manually</p>
<ol>
<li>Unzip the archive (解压)</li>
<li>install the font (安装)<ul>
<li>macOS<br>  Select all font files in the folder and <strong>&#x3D;&#x3D;double-click&#x3D;&#x3D;</strong> the “Install Font” button.</li>
<li>Windows<br>  Select all font files in the folder, right-click any of them, then pick “**&#x3D;&#x3D;Install&#x3D;&#x3D;**” from the menu.</li>
<li>Linux<br>  Unpack fonts to <code>~/.local/share/fonts</code> (or <code>/usr/share/fonts</code>, to install fonts system-wide) and &#x3D;&#x3D;<code>fc-cache -f -v</code>&#x3D;&#x3D;</li>
</ul>
</li>
<li>Restart your software and choose the font</li>
</ol>
</li>
</ol>
<h2 id="设置字体"><a href="#设置字体" class="headerlink" title="设置字体"></a>设置字体</h2><p>从<code>Profiles -&gt; Open Profiles -&gt; Edit Profiles -&gt; Text</code>修改字体。红色矩形框勾选，字体其实有好几个，至于用哪个<code>Powerline</code>结尾的都行，只是大小和间距略有不同。</p>
<img data-src="/2023/05/12/148/1200.jpeg" class="" title="img">

<h1 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h1><table>
<thead>
<tr>
<th>快捷键</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>⌃ + u</code></td>
<td>清空当前行</td>
</tr>
<tr>
<td><code>⌃ + a</code></td>
<td>移动到行首</td>
</tr>
<tr>
<td><code>⌃ + e</code></td>
<td>移动到行尾</td>
</tr>
<tr>
<td><code>⌃ + f</code></td>
<td>向前移动 （front） 前面</td>
</tr>
<tr>
<td><code>⌃ + b</code></td>
<td>向后移动 （ before ）在某某之前</td>
</tr>
<tr>
<td><code>⌃ + p</code></td>
<td>上一条命令  （ prev ）</td>
</tr>
<tr>
<td><code>⌃ + n</code></td>
<td>下一条命令  ( next )</td>
</tr>
<tr>
<td><code>⌃ + r</code></td>
<td>搜索历史命令</td>
</tr>
<tr>
<td><code>⌃ + y</code></td>
<td>召回最近用命令删除的文字</td>
</tr>
<tr>
<td><code>⌃ + h</code></td>
<td>删除光标之前的字符</td>
</tr>
<tr>
<td><code>⌃ + d</code></td>
<td>删除光标所指的字符</td>
</tr>
<tr>
<td><code>⌃ + w</code></td>
<td>删除光标之前的单词</td>
</tr>
<tr>
<td><code>⌃ + k</code></td>
<td>删除从光标到行尾的内容</td>
</tr>
<tr>
<td><code>⌃ + t</code></td>
<td>交换光标和之前的字符</td>
</tr>
<tr>
<td><code>⌘ + Click</code></td>
<td>可以打开文件，文件夹和链接</td>
</tr>
<tr>
<td><code>⌘ + n</code></td>
<td>新建窗口</td>
</tr>
<tr>
<td><code>⌘ + t</code></td>
<td>新建标签页</td>
</tr>
<tr>
<td><code>⌘ + w</code></td>
<td>关闭当前页</td>
</tr>
<tr>
<td><code>⌘ + 数字&amp;⌘ + 方向键</code></td>
<td>切换标签页</td>
</tr>
<tr>
<td><code>⌥⌘ + 数字</code></td>
<td>切换窗口</td>
</tr>
<tr>
<td><code>⌘ + enter</code></td>
<td>切换全屏</td>
</tr>
<tr>
<td><code>⌘ + d</code></td>
<td>左右分屏</td>
</tr>
<tr>
<td><code>⇧⌘ + d</code></td>
<td>上下分屏</td>
</tr>
<tr>
<td><code>⌘ + ;</code></td>
<td>自动补全历史记录</td>
</tr>
<tr>
<td><code>⇧⌘ + h</code></td>
<td>自动补全剪贴板历史</td>
</tr>
<tr>
<td><code>⌥⌘ + e</code></td>
<td>查找所有来定位某个标签页</td>
</tr>
<tr>
<td><code>⌘ + r&amp;⌃ + l</code></td>
<td>清屏</td>
</tr>
<tr>
<td><code>⌘ + /</code></td>
<td>显示光标位置</td>
</tr>
<tr>
<td><code>⌥⌘ + b</code></td>
<td>历史回放</td>
</tr>
<tr>
<td><code>⌘ + f</code></td>
<td>查找，然后用tab和⇧ + tab可以向右和向左补全，补全之后的内容会被自动复制， 还可以用⌥ + enter将查找结果输入终端</td>
</tr>
</tbody></table>
<h1 id="QAs"><a href="#QAs" class="headerlink" title="QAs"></a>QAs</h1><ul>
<li><p>warning: completion was already initialized before completion module. Will call compinit again. See <a target="_blank" rel="noopener" href="https://github.com/zimfw/zimfw/wiki/Troubleshooting#completion-is-not-working">https://github.com/zimfw/zimfw/wiki/Troubleshooting#completion-is-not-working</a></p>
<ul>
<li>archlinux 运行命令: <code>echo &#39;skip_global_init=1&#39; &gt;&gt; ~/.zshenv</code></li>
<li>ubuntu 运行命令: <code>echo &#39;skip_global_compinit=1&#39; &gt;&gt; ~/.zshenv</code></li>
</ul>
</li>
<li><p>autojump (linux): ImportError: No module named autojump_argparse</p>
<p> 修改 <code>/usr/bin/autojump</code> 文件首行 <code>#!/usr/bin/env python</code> 或 <code>#!/usr/bin/python3</code>, 这两个有哪个 python 程序就写哪个路径.</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2023/05/11/147/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/11/147/" class="post-title-link" itemprop="url">147. vim 命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-11 13:00:00" itemprop="dateCreated datePublished" datetime="2023-05-11T13:00:00+08:00">2023-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/software/" itemprop="url" rel="index"><span itemprop="name">software</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="重要"><a href="#重要" class="headerlink" title="重要"></a><strong>重要</strong></h1><p>使用已经写好的脚本安装，github<a target="_blank" rel="noopener" href="https://github.com/Qeuroal/vimmars">地址</a></p>
<p>Readme上有使用方法</p>
<h2 id="安装-vimmars"><a href="#安装-vimmars" class="headerlink" title="安装 vimmars"></a>安装 vimmars</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Qeuroal/vimmars.git</span><br><span class="line"><span class="built_in">cd</span> ~/vimmars</span><br><span class="line">bash ./install.sh</span><br></pre></td></tr></table></figure>



<h2 id="安装-ycm"><a href="#安装-ycm" class="headerlink" title="安装 ycm"></a>安装 ycm</h2><h3 id="全部语言的安装"><a href="#全部语言的安装" class="headerlink" title="全部语言的安装"></a>全部语言的安装</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.vim/plugged/YouCompleteMe</span><br><span class="line">python3 ./install.py --all</span><br></pre></td></tr></table></figure>

<h3 id="c-c"><a href="#c-c" class="headerlink" title="c&#x2F;c++"></a>c&#x2F;c++</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.vim/plugged/YouCompleteMe</span><br><span class="line">python3 ./install.py --clang-completer</span><br></pre></td></tr></table></figure>



<h1 id="推荐几个-Vim-配置方案"><a href="#推荐几个-Vim-配置方案" class="headerlink" title="推荐几个 Vim 配置方案"></a>推荐几个 Vim 配置方案</h1><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/dofy/7th-vim">dofy &#x2F; <strong>7th-vim</strong></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kepbod/ivim">kepbod &#x2F; <strong>ivim</strong></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chxuan/vimplus">chxuan &#x2F; <strong>vimplus</strong></a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/SpaceVim/SpaceVim">SpaceVim &#x2F; <strong>SpaceVim</strong></a></li>
</ul>
<h1 id="推荐另外几个出色的-Vim-教程"><a href="#推荐另外几个出色的-Vim-教程" class="headerlink" title="推荐另外几个出色的 Vim 教程"></a>推荐另外几个出色的 Vim 教程</h1><ul>
<li>控制台运行 <code>vimtutor</code> 这是 Vim 官方实操教程</li>
<li><a target="_blank" rel="noopener" href="http://coolshell.cn/articles/5426.html">简明 Vim 练级攻略</a> 很不错的入门教程</li>
<li><a target="_blank" rel="noopener" href="https://github.com/mhinz/vim-galore">Vim Galore</a> 更新频繁，Vim 进阶必读</li>
<li><a target="_blank" rel="noopener" href="http://liuzhijun.iteye.com/category/270228">每日一Vim</a> 共 30 篇，内容比较全</li>
<li><a target="_blank" rel="noopener" href="https://vimjc.com/">Vim 教程网</a> 一个女生维护的 Vim 中文教程网站，持续更新中</li>
<li><a target="_blank" rel="noopener" href="https://github.com/iggredible/Learn-Vim">A book for learning the Vim editor</a> 另一个 Learn Vim （英语）</li>
<li><a target="_blank" rel="noopener" href="https://openvim.com/">Open Vim</a> 交互式 Vim 教程</li>
<li><a target="_blank" rel="noopener" href="https://quickref.me/vim">QuickRef.ME&#x2F;vim</a> Vim cheatsheet</li>
</ul>
<h1 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h1><img data-src="/2023/05/11/147/vim-cheat-sheet-en.png" class="" title="img">

<img data-src="/2023/05/11/147/preview.png" class="" title="img">



<h1 id="自动命令"><a href="#自动命令" class="headerlink" title="自动命令"></a>自动命令</h1><h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><table>
<thead>
<tr>
<th>类别</th>
<th>事件</th>
<th>触发条件</th>
</tr>
</thead>
<tbody><tr>
<td>读取</td>
<td>BufNewFile</td>
<td>编辑一个新文件时</td>
</tr>
<tr>
<td>读取</td>
<td>BufReadPre</td>
<td>读入新缓冲区之前</td>
</tr>
<tr>
<td>读取</td>
<td>BufRead, BufReadPost</td>
<td>读入新缓冲区之后</td>
</tr>
<tr>
<td>读取</td>
<td>BufReadCmd</td>
<td>开始编辑新缓冲区之前</td>
</tr>
<tr>
<td>读取</td>
<td>FileReadPre</td>
<td>使用:read命令读入文件之前</td>
</tr>
<tr>
<td>读取</td>
<td>FileReadPost</td>
<td>使用:read命令读入文件之后</td>
</tr>
<tr>
<td>读取</td>
<td>StdinReadPre</td>
<td>由标准输入设备读入缓冲区之前</td>
</tr>
<tr>
<td>读取</td>
<td>StdinReadPost</td>
<td>由标准输入设备读入缓冲区之后</td>
</tr>
<tr>
<td>写入</td>
<td>BufWrite, BufWritePre</td>
<td>将整个缓冲区写入文件时</td>
</tr>
<tr>
<td>写入</td>
<td>BufWritePost</td>
<td>将整个缓冲区写入文件之后</td>
</tr>
<tr>
<td>写入</td>
<td>BufWriteCmd</td>
<td>将整个缓冲区写入文件之前</td>
</tr>
<tr>
<td>缓冲区</td>
<td>BufAdd, BufCreate</td>
<td>将缓冲区加入缓冲区列表之后</td>
</tr>
<tr>
<td>缓冲区</td>
<td>BufDelete</td>
<td>从缓冲区列表中移除缓冲区之前</td>
</tr>
<tr>
<td>缓冲区</td>
<td>BufEnter</td>
<td>进入缓冲区之后</td>
</tr>
<tr>
<td>缓冲区</td>
<td>BufLeave</td>
<td>离开缓冲区之前</td>
</tr>
<tr>
<td>缓冲区</td>
<td>BufWinEnter</td>
<td>在窗口中显示缓冲区之后</td>
</tr>
<tr>
<td>缓冲区</td>
<td>BufWinLeave</td>
<td>从窗口中关闭缓冲区之前</td>
</tr>
<tr>
<td>缓冲区</td>
<td>BufNew</td>
<td>创建缓冲区之后</td>
</tr>
<tr>
<td>缓冲区</td>
<td>BufUnload</td>
<td>卸载缓冲区之前</td>
</tr>
<tr>
<td>选项</td>
<td>FileType</td>
<td>设置’filetype’选项之后</td>
</tr>
<tr>
<td>选项</td>
<td>Syntax</td>
<td>设置’syntax’选项之后</td>
</tr>
<tr>
<td>选项</td>
<td>EncodingChanged</td>
<td>‘encoding’选项改变之后触发命令；</td>
</tr>
<tr>
<td>选项</td>
<td>OptionSet</td>
<td>设置任何选项之后</td>
</tr>
<tr>
<td>启动退出</td>
<td>VimEnter</td>
<td>Vim启动并载入初始化文件之后</td>
</tr>
<tr>
<td>启动退出</td>
<td>GUIEnter</td>
<td>启动GUI之后</td>
</tr>
<tr>
<td>启动退出</td>
<td>VimLeavePre</td>
<td>改写viminfo文件之前，退出Vim之前</td>
</tr>
<tr>
<td>启动退出</td>
<td>VimLeave</td>
<td>改写viminfo文件之后，退出Vim之前</td>
</tr>
<tr>
<td>其他</td>
<td>FileChangedShell</td>
<td>当文件的最后修改时间等属性发生改变时</td>
</tr>
<tr>
<td>其他</td>
<td>InsertEnter</td>
<td>进入插入模式时</td>
</tr>
<tr>
<td>其他</td>
<td>InsertLeave</td>
<td>离开插入模式时</td>
</tr>
<tr>
<td>其他</td>
<td>FocusGained</td>
<td>Vim成为当前窗口时</td>
</tr>
<tr>
<td>其他</td>
<td>FocusLost</td>
<td>Vim不再是当前窗口时</td>
</tr>
<tr>
<td>其他</td>
<td>WinEnter</td>
<td>进入窗口时</td>
</tr>
<tr>
<td>其他</td>
<td>WinLeave</td>
<td>离开窗口时</td>
</tr>
<tr>
<td>其他</td>
<td>CursorMoved</td>
<td>在常规模式下移动光标时</td>
</tr>
<tr>
<td>其他</td>
<td>CursorMovedI</td>
<td>在插入模式下移动光标时</td>
</tr>
<tr>
<td>其他</td>
<td>CursorHold</td>
<td>当超过’updatetime’所指定时间用户没有输入时</td>
</tr>
<tr>
<td>其他</td>
<td>vimResized</td>
<td>窗口尺寸变化之后</td>
</tr>
</tbody></table>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><table>
<thead>
<tr>
<th>操作</th>
<th>事件</th>
</tr>
</thead>
<tbody><tr>
<td>启动Vim并创建默认窗口</td>
<td><code>BufWinEnter</code></td>
</tr>
<tr>
<td>创建默认缓冲区</td>
<td><code>BufEnter</code></td>
</tr>
<tr>
<td>:edit a.txt</td>
<td><code>VimEnter</code></td>
</tr>
<tr>
<td>创建新缓冲区</td>
<td><code>BufNew</code></td>
</tr>
<tr>
<td>将新缓冲区加入到缓冲区列表之中</td>
<td><code>BufAdd</code></td>
</tr>
<tr>
<td>退出默认缓冲区</td>
<td><code>BufLeave</code></td>
</tr>
<tr>
<td>退出默认窗口</td>
<td><code>BufWinLeave</code></td>
</tr>
<tr>
<td>将默认缓冲区从缓冲区列表之中移除</td>
<td><code>BufUnload</code></td>
</tr>
<tr>
<td>删除默认缓冲区</td>
<td><code>BufDelete</code></td>
</tr>
<tr>
<td>将a.txt文件读入新缓冲区</td>
<td><code>BufReadCmd</code></td>
</tr>
<tr>
<td>激活新缓冲区</td>
<td><code>BufEnter</code></td>
</tr>
<tr>
<td>激活新窗口</td>
<td><code>BufWinEnter</code></td>
</tr>
<tr>
<td>进入插入模式</td>
<td><code>InsertEnter</code></td>
</tr>
<tr>
<td>输入文本</td>
<td><code>CursorMovedI</code></td>
</tr>
<tr>
<td>退出插入模式</td>
<td><code>InsertLeave</code></td>
</tr>
<tr>
<td>:wq</td>
<td><code>BufWriteCmd</code></td>
</tr>
<tr>
<td>退出新窗口</td>
<td><code>BufWinLeave</code></td>
</tr>
<tr>
<td>将新缓冲区从缓冲区列表之中移除</td>
<td><code>BufUnload</code></td>
</tr>
<tr>
<td>准备退出Vim</td>
<td><code>VimLeavePre</code></td>
</tr>
<tr>
<td>退出Vim</td>
<td><code>VimLeave</code></td>
</tr>
</tbody></table>
<h1 id="命令模式常用快捷键"><a href="#命令模式常用快捷键" class="headerlink" title="命令模式常用快捷键"></a>命令模式常用快捷键</h1><ul>
<li><code>G</code> 移动到文件的最后一行。</li>
<li><code>nG</code> n为数字，移动到文件的第n行。</li>
<li><code>gf</code>　　 打开以光标所在字符串为文件名的文件</li>
<li><code>gg</code>　　 移动到文件的第一行。</li>
<li><code>N[Enter]</code>　　向下移动N行。</li>
<li><code>h</code> 　 向左移动光标（<code>←</code>）</li>
<li><code>j</code> 　 向下移动光标（<code>↓</code>）</li>
<li><code>k</code> 　 向上移动光标（<code>↑</code>）</li>
<li><code>l（小L）</code> 向右移动光标（<code>→</code>）</li>
<li><code>20j</code> 　向下移动20行</li>
<li><code>+</code> 或 <code>Enter</code>　　把光标移至下一行第一个非空白字符</li>
<li><code>-</code>　　把光标移至上一行第一个非空白字符</li>
<li><code>^</code> 把光标移至本行第一个非空白字符</li>
<li><code>0或Home</code> 移动光标至行首</li>
<li><code>$或End</code> 移动光标至行尾</li>
<li><code>w</code>　　 向右移动一个单词,光标停在下一个单词开头</li>
<li><code>W</code>  向右移动一个单词,光标移动时忽略一些标点</li>
<li><code>b</code>　　 向左移动一个单词,光标停在下一个单词开头</li>
<li><code>B</code>　　 向左移动一个单词，光标移动时忽略一些标点</li>
<li><code>e</code>　　 向右移动一个单词,光标停在下一个单词末尾</li>
<li><code>E</code>　　 向右移动一个单词，光标移动时忽略一些标点</li>
<li><code>ge</code>　　 向左移动一个单词,光标停在下一个单词末尾</li>
<li><code>gE</code>　　 向左移动一个单词，光标移动时忽略一些标点</li>
<li><code>H</code> 　 移动光标至屏幕的最上方那一行行首</li>
<li><code>M</code> 　 移动光标至屏幕的最中间那一行行首</li>
<li><code>L</code> 　 移动光标至屏幕的最下方那一行行首</li>
<li><code>(</code> 移动光标至上一句</li>
<li><code>)</code> 移动光标至下一句</li>
<li><code>&#123;</code> 移动光标至上一段</li>
<li><code>&#125;</code> 移动光标至上一段</li>
<li><code>ctrl+b</code>　　屏幕向上移动一页</li>
<li><code>ctrl+f</code>　　屏幕向下移动一页</li>
<li><code>ctrl+d</code>　　屏幕向上移动半页</li>
<li><code>ctrl+u</code>　　屏幕向下移动半页</li>
<li><code>ctrl+e</code>　　屏幕向下移动一行</li>
<li><code>n%</code> 到文件n%的位置，如1%，50%, 100%之类</li>
<li><code>zz</code> 将当前行移动到屏幕中央</li>
<li><code>zt</code> 将当前行移动到屏幕顶端</li>
<li><code>zb</code> 将当前行移动到屏幕底端</li>
<li><code>dd</code>　　 剪切当前行（不是删除，因为此时在缓存内保存了一份剪切的字符串）。</li>
<li><code>d$</code> 　 删除光标位置到该行最后一个字符(包括光标字元)。</li>
<li><code>d0</code> 　 删除光标字元至行首字符(不包括光标字元)。</li>
<li><code>dG</code> 　 删除光标所在行至最后一行所有字符(包括光标所在行)。</li>
<li><code>d1G</code> 　删除光标所在行（包括光标所在行）与首行间所有字符。</li>
<li><code>ndd</code>　　删除光标所在行（包括）向下的n行。</li>
<li><code>dw</code> 　 删除光标所在字符至下一个单词间所有字符(包括下一个单词前面的空格)。</li>
<li><code>daw</code>　　剪切光标所在位置的单词。</li>
<li><code>das</code>  剪切光标所在位置的句子。</li>
<li><code>x</code> 　 向后删除一个字符。</li>
<li><code>nx</code>　　 向后删除n个字符。</li>
<li><code>yy</code> 　 复制当前行。</li>
<li><code>nyy</code>　　复制n行（包含当前行）。</li>
<li><code>y1G</code>　　复制第一行至当前行所有字符。</li>
<li><code>yG</code>　　 复制当前行到最后一行所有字符。</li>
<li><code>y0</code>　　 复制当前行行首字符至光标字符间所有字符。</li>
<li><code>y$</code>　　 复制当前行光标字符到行尾字符间所有字符。</li>
<li><code>yaw</code>　　复制光标所在位置的单词。</li>
<li><code>yas</code>　　复制光标所在位置的句子。</li>
<li><code>ZZ</code>　　 保存更改并退出。</li>
<li><code>p</code> 　 将已经复制的数据粘贴到光标的下一行（若是使用y0,y$复制的行的一部分，则粘贴时，会粘贴到光标所在行的光标字符后面）。</li>
<li><code>P</code>　　 将已经复制的数据粘贴到光标的上一行（若是使用y0,y$复制的行的一部分，则粘贴时，会粘贴到光标所在行的光标字符前面）。</li>
<li><code>u</code>　　 复原上一操作（撤消）。</li>
<li><code>ctrl+R</code>　　重做上一操作。</li>
<li><code>.</code> 　 点号，重做上一操作。</li>
<li><code>J</code>　　 将当前行与下一行合并为一行。</li>
<li><code>gJ</code>　　 将当前行与下一行合并为一行,不过合并后不留空格。</li>
<li><code>&lt;&lt;</code> 段落向左缩进一个shiftwidth</li>
<li><code>&gt;&gt;</code> 段落向右缩进一个shiftwidth</li>
<li><code>gq</code> 对选中的长文字进行重排</li>
<li><code>o</code> 　 当前行下插入空行，并进入插入模式。</li>
<li><code>O</code>　　 当前行上插入空行，并进入插入模式。</li>
<li><code>i</code>　　 进入插入模式，从当前光标所在处插入。</li>
<li><code>I</code> 　 进入插入模式，从当前行第一个非空格处开始插入。</li>
<li><code>a</code>　　 进入插入模式，从当前光标所在处下一个字符开始插入。</li>
<li><code>A</code>　　进入插入模式，从当前光标所在行最后一个字符开始插入。</li>
<li><code>8i=&lt;ESC&gt;</code> 重复输入小技巧，先按数字<code>8</code>,再按<code>i</code>进入插入模式，再按<code>=</code>或其他字符，如<code>=-</code>，再按<code>Esc</code>退出键，再按一次键，就会出现<code>8</code>次<code>=-</code>组成的字符串。如<code>=-=-=-=-=-=-=-=-</code></li>
<li><code>ESC健</code> 　返回命令模式。</li>
</ul>
<h1 id="编辑模式"><a href="#编辑模式" class="headerlink" title="编辑模式"></a>编辑模式</h1><p>在命令模式下按<code>i</code>、<code>o</code>、<code>a</code>等键可进入插入模式（编辑模式）。</p>
<ul>
<li><code>o</code>　　当前行下插入空行，并进入插入模式。</li>
<li><code>O</code>　　当前行上插入空行，并进入插入模式。</li>
<li><code>i</code>　　进入插入模式，从当前光标所在处插入。</li>
<li><code>I</code>　　进入插入模式，从当前行第一个非空格处开始插入。</li>
<li><code>a</code>　　进入插入模式，从当前光标所在处下一个字符开始插入。</li>
<li><code>A</code>　　进入插入模式，从当前光标所在行最后一个字符开始插入。</li>
</ul>
<p>另外按字母<code>s</code>也可以进入插入模式：</p>
<ul>
<li><code>s</code>　　小s，删除光标字符，并进入编辑模式，并在光标所在位置开始编辑。</li>
<li><code>S</code>　　大S，删除光标所在行，并进入编辑模式，并在行首开始编辑。</li>
<li><code>ns</code>　删除包含光标字符在内的n个字符，并进入编辑模式。</li>
<li><code>nS</code>　大S，删除光标所在行在内及其后的n-1行，并进入编辑模式。</li>
</ul>
<h1 id="扩展命令模式常用操作键"><a href="#扩展命令模式常用操作键" class="headerlink" title="扩展命令模式常用操作键"></a>扩展命令模式常用操作键</h1><ul>
<li><code>:r filename</code> 在当前位置插入另一个文件的内容</li>
<li><code>:[n]r filename</code> 在当前文件第n行插入另一个文件的内容</li>
<li><code>:r !date</code> 在光标处插入当前日期与日期，同理，<code>:r !command</code>可以将其他<code>shell</code>命令的输出插入到当前文档</li>
<li><code>:r !cat filename|head -n N</code> 在当前文件光标的下一行插入文件filename的前N行</li>
<li><code>:w</code> 保存</li>
<li><code>:q</code>　 离开vim</li>
<li><code>:q!</code>　 强制离开</li>
<li><code>:wq</code>　 保存后离开</li>
<li><code>:w [filename]</code>　　　　将当前文本另存为filename</li>
<li><code>:n1,n2 w [filename]</code>　　将n1至n2行内容另存为filename</li>
<li><code>:ce(nter)</code> 本行文字居中</li>
<li><code>:le(ft)</code> 本行文字靠左</li>
<li><code>:ri(ght)</code> 本行文字靠右</li>
<li><code>/word</code> 　　　　　　　　 向下查找关键字word。</li>
<li><code>?word</code>　　　　　　　　　　向上查找关键字word。</li>
<li><code>:n1,n2s/word1/word2/g</code>　　在第n1行与第n2行之间查找word1字符串，并直接替换为word2。</li>
<li><code>:1,$s/word1/word2/g</code>　　　在第1行最后一行之间查找word1字符串，并直接替换为word2。</li>
<li><code>:1,$s/word1/word2/gc</code> 　　　在第1行最后一行之间查找word1字符串，并替换为word2（替换时询问用户是否替换）。</li>
<li><code>:.,+5s/^/#/g</code>　　　　　　　　将当前行及下面5行标记为注释(包括当前行，共6行)。</li>
<li><code>:6,9 de</code>　　　　　　　　　　删除第6至第9行。</li>
<li><code>:2,8 co 10</code>　　　　　　　　复制第2行至第8行内容至第10行后面(从下一行开始)</li>
<li><code>:set nu</code> 　　　　　　　　　显示行号。</li>
<li><code>:set nonu</code>　　　　　　　　不显示行号。</li>
<li><code>:set hlsearch</code>　　　　　　　　高亮度搜索显示</li>
<li><code>:set nohlsearch</code>　　　　　　不高亮度搜索显示</li>
<li><code>:set autoindent/noautoindent</code>　　自动缩进</li>
<li><code>:set ruler/noruler</code> 　　　　　设置右下角状态栏说明</li>
<li><code>:set showmode/noshowmode</code>　　设置是否显示左下角（-INSERT-）状态列</li>
<li><code>:set backspace=2</code>　　　　　　&#x3D;2时，退格键可删除任意字符，&#x3D;0或&#x3D;1时只能删除刚输入的字符。</li>
<li><code>:set</code> 　　　　　　　　　显示与系统预设值不同的设定参数。</li>
<li><code>:set all</code>　　　　　　　　　　显示所有的环境参数值</li>
<li><code>:syntax on/off</code> 　　　　　设置语法高亮</li>
<li><code>:set bg=dark/light</code>　　　　　　设置背景（background）为暗色&#x2F;亮色</li>
<li><code>:set tabstop=4</code>　　　　　　 设置Tab宽度</li>
<li><code>:set shiftwidth=4</code>　　　　　　设置每一级缩进的宽度</li>
<li><code>:Sex</code> 水平分割一个窗口，浏览文件系统</li>
<li><code>:Vex</code> 垂直分割一个窗口，浏览文件系统</li>
</ul>
<h1 id="vimrc常用环境变量设置"><a href="#vimrc常用环境变量设置" class="headerlink" title="vimrc常用环境变量设置"></a>vimrc常用环境变量设置</h1><ul>
<li>set hlsearch　　　　“设置高亮度反白</li>
<li>set backspace&#x3D;2　　　　“可随时用退格键删除</li>
<li>set ruler　　　　　　“可显示最后一行的状态</li>
<li>set showmode　　　　“显示状态</li>
<li>set nu　　　　　　“显示行号</li>
<li>set bg&#x3D;dark　　　　“显示不同的底色色调</li>
<li>set softtabstop&#x3D;4 “统一缩进为4</li>
<li>set tabstop&#x3D;4　　　　“设置Tab宽度</li>
<li>set shiftwidth&#x3D;4　　　　“设置每一级缩进的宽度</li>
<li>set fileencodings&#x3D;utf-8,gbk,gb18030,gk2312</li>
<li>syntax on　　　　　　“语法高亮</li>
<li>set showcmd　　　　“输入的命令显示出来，看的清楚些</li>
<li>set clipboard+&#x3D;unnamed　　　　“共享剪贴板</li>
<li>set cursorline　　　　“突出显示当前行</li>
<li>set noeb　　　　　　“去掉输入错误的提示声音</li>
<li>set confirm　　　　　　“在处理未保存或只读文件的时候，弹出确认</li>
<li>set autoindent　　　　“设置自动缩进</li>
<li>set cindent “设置自动缩进</li>
<li>set expandtab　　“用空格代替制表符</li>
<li>set smarttab　　　　“在行和段开始处使用制表符</li>
<li>set laststatus&#x3D;2　　　　“总是显示状态栏</li>
</ul>
<p><code>~/.vimrc</code>配置文件内容如下:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> hlsearch</span><br><span class="line"><span class="built_in">set</span> backspace=2</span><br><span class="line"><span class="built_in">set</span> ruler</span><br><span class="line"><span class="built_in">set</span> showmode</span><br><span class="line"><span class="built_in">set</span> nu</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">bg</span>=dark</span><br><span class="line"><span class="built_in">set</span> softtabstop=4</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="built_in">set</span> fileencodings=utf-8,gbk,gb18030,gk2312</span><br><span class="line">syntax on</span><br><span class="line"><span class="built_in">set</span> showcmd</span><br><span class="line"><span class="built_in">set</span> clipboard+=unnamed</span><br><span class="line"><span class="built_in">set</span> cursorline</span><br><span class="line"><span class="built_in">set</span> confirm</span><br><span class="line"><span class="built_in">set</span> autoindent</span><br><span class="line"><span class="built_in">set</span> cindent </span><br><span class="line"><span class="built_in">set</span> expandtab                                                            </span><br><span class="line"><span class="built_in">set</span> laststatus=2</span><br></pre></td></tr></table></figure>



<h1 id="可视模式"><a href="#可视模式" class="headerlink" title="可视模式"></a>可视模式</h1><ul>
<li>可视模式（<code>Visual Black</code>），也即区块选择模式，此时可以对列字符进行操作。</li>
<li>在命令模式下，按<code>v</code>或<code>V</code>或<code>ctrl+v</code>可以进入到可视模式。</li>
<li><code>v</code> 　　　进入可视模式，并进行单字符（反白）选择。</li>
<li><code>V</code>　　　　进入可视模式，并进行行（反白）选择。</li>
<li><code>ctrl+v</code> 　进入可视模式，并进行区块选择，以长方形的方式（反白）选择字符。</li>
<li><code>y</code> 　　　将反白的地方复制下来。</li>
<li><code>d</code>　　　　删除反白区域。</li>
<li>进入可视模式后，可以按方向键或<code>h</code>&#x2F;<code>j</code>&#x2F;<code>k</code>&#x2F;<code>l</code>(向左、向下、向上、向右)进行反白区域选择。</li>
</ul>
<h1 id="多视窗功能"><a href="#多视窗功能" class="headerlink" title="多视窗功能"></a>多视窗功能</h1><ul>
<li>输入<code>:sp</code>进入多视窗模式，此时，可以对文本进行前后对照或不同档案间进行对照。</li>
<li><code>:sp</code> 同一文件两个视窗，进行前后对照。</li>
<li><code>:sp [filename]</code> 两个文件进行对照。</li>
</ul>
<p>在多视窗模式下：</p>
<ul>
<li><code>ctrl+w</code> 可依次在多个视窗间进行上下循环切换。</li>
<li><code>ctrl+w+k</code> 可依次在多个视窗间进行从下到上切换（先按ctrl+w，松开后，再按k）。</li>
<li><code>ctrl+w+j</code> 可依次在多个视窗间进行从上到下切换（先按ctrl+w，松开后，再按j）。</li>
<li><code>ctrl+w+q</code> 关闭当前视窗下面的视窗（先按ctrl+w，松开后，再按q）。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2023/05/10/146/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/10/146/" class="post-title-link" itemprop="url">146. gdb</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-10 18:00:00" itemprop="dateCreated datePublished" datetime="2023-05-10T18:00:00+08:00">2023-05-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/debug/" itemprop="url" rel="index"><span itemprop="name">debug</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="GDB"><a href="#GDB" class="headerlink" title="GDB"></a>GDB</h1><p>GDB（GNU symbolic Debugger）是Linux系统下的强大的调试工具，可以用来调试ada, c, c++, asm, minimal, d, fortran, objective-c, go, java,pascal 等多种语言。</p>
<p>我们以调试<code>go</code>代码为示例来介绍GDB的使用。源码内容如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	sum = a + b</span><br><span class="line">	<span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	sum := add(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>构建二进制应用：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go build -gcflags=<span class="string">&quot;-N -l&quot;</span> -o <span class="built_in">test</span> main.go</span><br></pre></td></tr></table></figure>

<h2 id="启动调试"><a href="#启动调试" class="headerlink" title="启动调试"></a>启动调试</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gdb ./test</span><br><span class="line">gdb --args ./test arg1 arg2 <span class="comment"># 指定参数启动</span></span><br></pre></td></tr></table></figure>

<p>进入gdb调试界面之后，执行<code>run</code>命令运行程序。若程序已经运行，我们可以<code>attach</code>该程序的进程id进行调试:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gdb</span><br><span class="line">(gdb) attach 1785</span><br></pre></td></tr></table></figure>

<p>当执行<code>attach</code>命令的时候，GDB首先会在当前工作目录下查找进程的可执行程序，如果没有找到，接着会用源代码文件搜索路径。我们也可以用file命令来加载可执行文件。</p>
<p>或者通过命令设置进程id:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gdb <span class="built_in">test</span> 1785 </span><br><span class="line">gdb <span class="built_in">test</span> --pid 1785</span><br></pre></td></tr></table></figure>

<p>若已运行的进程不含调试信息，我们可以使用同样代码编译出一个带调试信息的版本，然后使用file和attach命令进行运行调试。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ gdb</span><br><span class="line">(gdb) file <span class="built_in">test</span></span><br><span class="line">Reading symbols from test...done.</span><br><span class="line">(gdb) attach 1785</span><br></pre></td></tr></table></figure>

<h3 id="可视化窗口"><a href="#可视化窗口" class="headerlink" title="可视化窗口"></a>可视化窗口</h3><p>GDB也支持多窗口图形启动运行，一个窗口显示源码信息，一个窗口显示调试信息：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gdb <span class="built_in">test</span> -tui</span><br></pre></td></tr></table></figure>

<p>GDB支持在运行过程中使用<code>Crtl+X+A</code>组合键进入多窗口图形界面， GDB支持的快捷操作有：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Crtl+X+A // 多窗口与单窗口界面切换</span><br><span class="line">Ctrl + X + 2 // 显示两个窗口</span><br><span class="line">Ctrl + X + 1 // 显示一个窗口</span><br></pre></td></tr></table></figure>

<h2 id="运行程序"><a href="#运行程序" class="headerlink" title="运行程序"></a>运行程序</h2><p>通过<code>run</code>命令运行程序：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) run</span><br></pre></td></tr></table></figure>

<p>指定命令行参数运行：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) run arg1 arg2</span><br></pre></td></tr></table></figure>

<p>或者通过<code>set</code>命令设置命令行参数：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) <span class="built_in">set</span> args arg1 arg2</span><br><span class="line">(gdb) run</span><br></pre></td></tr></table></figure>

<p>除了<code>run</code>命令外，我们也可以使用<code>start</code>命令运行程序。<code>start</code>命令会在在main函数的第一条语句前面停下来。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) start</span><br></pre></td></tr></table></figure>

<h2 id="断点设置、查看、删除、禁用"><a href="#断点设置、查看、删除、禁用" class="headerlink" title="断点设置、查看、删除、禁用"></a>断点设置、查看、删除、禁用</h2><h3 id="设置断点"><a href="#设置断点" class="headerlink" title="设置断点"></a>设置断点</h3><p>GDB中是通过<code>break</code>命令来设置断点(BreakPoint)，<code>break</code>可以简写成<code>b</code>。</p>
<ul>
<li><p><code>break function</code></p>
<p> 在指定函数出设置断点，设置断点后程序会在进入指定函数时停住</p>
</li>
<li><p><code>breshak linenum</code></p>
<p> 在指定行号处设置断点</p>
</li>
<li><p><code>break +offset/-offset</code></p>
<p> 在当前行号的前面或后面的offset行处设置断点。offset为自然数</p>
</li>
<li><p><code>break filename:linenum</code></p>
<p> 在源文件filename的linenum行处设置断点</p>
</li>
<li><p><code>break filename:function</code></p>
<p> 在源文件filename的function函数的入口处设置断点</p>
</li>
<li><p><strong><code>break \*address</code></strong></p>
<p> 在程序运行的内存地址处设置断点</p>
</li>
<li><p><code>break</code></p>
<p> break命令没有参数时，表示在下一条指令处停住。</p>
</li>
<li><p><code>break … if</code></p>
<p> …可以是上述的参数，condition表示条件，在条件成立时停住。比如在循环境体中，可以设置break if i&#x3D;100，表示当i为100时停住程序</p>
</li>
</ul>
<h3 id="查看断点"><a href="#查看断点" class="headerlink" title="查看断点"></a>查看断点</h3><p>我们可以通过<code>info</code>命令查看断点：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info breakpoint <span class="comment"># 查看所有断点</span></span><br><span class="line">(gdb) info breakpoint 3 <span class="comment"># 查看3号断点</span></span><br></pre></td></tr></table></figure>

<h3 id="删除断点"><a href="#删除断点" class="headerlink" title="删除断点"></a>删除断点</h3><p>删除断点是通过<code>delete</code>命令删除的，<code>delete</code>命令可以简写成<code>d</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) delete 3 # 删除3号断点</span><br></pre></td></tr></table></figure>

<h3 id="断点启用与禁用"><a href="#断点启用与禁用" class="headerlink" title="断点启用与禁用"></a>断点启用与禁用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) disable 3 # 禁用3号断点</span><br><span class="line">(gdb) enable 3 # 启用3号断点</span><br></pre></td></tr></table></figure>

<h2 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h2><h3 id="单步执行"><a href="#单步执行" class="headerlink" title="单步执行"></a>单步执行</h3><p><code>next</code>用于单步执行，会一行行执行代码，运到函数时候，不会进入到函数内部，跳过该函数，但会执行该函数，即<code>step over</code>。可以简写成<code>n</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) next</span><br></pre></td></tr></table></figure>

<h3 id="单步进入"><a href="#单步进入" class="headerlink" title="单步进入"></a>单步进入</h3><p><code>step</code>用于单步进入执行，跟<code>next</code>命令类似，但是遇到函数时候，会进入到函数内部一步步执行，即<code>step into</code>。可以简写成<code>s</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) step</span><br></pre></td></tr></table></figure>

<p>与<code>step</code>相关的命令<code>stepi</code>，用于每次执行每次执行一条机器指令。可以简写成<code>si</code>。</p>
<h3 id="继续执行到下一个断点"><a href="#继续执行到下一个断点" class="headerlink" title="继续执行到下一个断点"></a>继续执行到下一个断点</h3><p><code>continue</code>命令会继续执行程序，直到再次遇到断点处。可以简写成<code>c</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) continue</span><br><span class="line">(gdb) continue 3 # 跳过3个断点</span><br></pre></td></tr></table></figure>

<h3 id="继续运行到指定位置"><a href="#继续运行到指定位置" class="headerlink" title="继续运行到指定位置"></a>继续运行到指定位置</h3><p><code>until</code>命令可以帮助我们实现运行到某一行停住，可以简写成<code>u</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) until 5</span><br></pre></td></tr></table></figure>

<h3 id="跳过执行"><a href="#跳过执行" class="headerlink" title="跳过执行"></a>跳过执行</h3><p><code>skip</code>命令可以在step时跳过一些不想关注的函数或者某个文件的代码:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) skip function add   # step时跳过add函数</span><br><span class="line">(gdb) info skip   # 查看skip列表</span><br></pre></td></tr></table></figure>

<p>其他相关命令：</p>
<ul>
<li>skip delete [num] 删除skip</li>
<li>skip enable [num] 启动skip</li>
<li>skip disable [num] 关闭skip</li>
</ul>
<p><strong>注意：</strong> 当不带skip号时候，是针对所有skip进行设置。</p>
<h3 id="执行完成当前函数"><a href="#执行完成当前函数" class="headerlink" title="执行完成当前函数"></a>执行完成当前函数</h3><p><code>finish</code>命令用来将当前函数执行完成，并打印函数返回时的堆栈地址、返回值、参数值等信息，即<code>step out</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) finish</span><br></pre></td></tr></table></figure>

<h2 id="查看源码"><a href="#查看源码" class="headerlink" title="查看源码"></a>查看源码</h2><p>GDB中的<code>list</code>命令用来显示源码信息。<code>list</code>命令可以简写成<code>l</code>。</p>
<ul>
<li><p><strong>list</strong></p>
<p> 从第一行开始显示源码，继续输入list，可列出后面的源码</p>
</li>
<li><p><strong>list linenum</strong></p>
<p> 列出linenum行附近的源码</p>
</li>
<li><p><strong>list function</strong></p>
<p> 列出函数function的代码</p>
</li>
<li><p>list filename:linenum</p>
<p> 列出文件filename文件中，linenum行出的代码</p>
</li>
<li><p>list filename:function</p>
<p> 列出文件filename中，函数function的代码</p>
</li>
<li><p>list +offset&#x2F;-offset</p>
<p> 列出在当前行号的前面或后面的offset行附近的代码。offset为自然数。</p>
</li>
<li><p>list +&#x2F;-</p>
<p> 列出当前行后面或者前面的代码</p>
</li>
<li><p>list linenum1, linenum2</p>
<p> 列出行linenum1和linenum2之间的代码</p>
</li>
</ul>
<h2 id="查看信息"><a href="#查看信息" class="headerlink" title="查看信息"></a>查看信息</h2><p><code>info</code>命令用来显示信息，可以简写成<code>i</code>。</p>
<ul>
<li><p><strong>info files</strong></p>
<p> 显示当前的debug文件，包含程序入口地址，内存分段布局位置信息等</p>
</li>
<li><p>info breakpoints</p>
<p> 显示当前设置的断点列表</p>
</li>
<li><p>info registers</p>
<p> 显示当前寄存器的值，可以简写成<code>i r</code>。指定寄存器名称，可以查看具体寄存器信息：<code>i r rsp</code></p>
<p> 如: 查看 rax 寄存器的信息: <code>info reg rax</code></p>
</li>
<li><p>info all-registers</p>
<p> 显示所有寄存器的值。GDB提供四个标准寄存器：pc是程序计数器寄存器，sp是堆栈指针。fp用于记录当前堆栈帧的指针，ps用于记录处理器状态的寄存器，GDB会处理好不同架构系统寄存器不一致问题，比如对于amd64架构，pc对应就是rip寄存器。</p>
<p> 引用寄存器内容是将寄存器名前置<code>$</code>符作为变量来用。比如<code>$pc</code>就是程序计数器寄存器值。</p>
</li>
<li><p>info args</p>
<p> 显示当前函数参数</p>
</li>
<li><p>info locals</p>
<p> 显示当前局部变量</p>
</li>
<li><p><strong>info frame</strong></p>
<p> 查看当前栈帧的详细信息，包括rip信息，正在运行的指令所在文件位置</p>
</li>
<li><p>info variables</p>
<p> 查看程序中的变量符号</p>
</li>
<li><p>info functions</p>
<p> 查看程序中的函数符号</p>
</li>
<li><p>info functions regexp</p>
<p> 通过正则匹配来查看程序中的函数符号</p>
</li>
<li><p>info goroutines</p>
<p> 显示当前执行的goroutine列表，带*的表示当前执行的。注意需要加载go runtime支持。</p>
</li>
<li><p>info stack</p>
<p> 查看栈信息</p>
</li>
<li><p>info proc mappings</p>
<p> 可以简写成<code>i proc m</code>。用来查看应用内存映射</p>
</li>
<li><p>info proc [procid]</p>
<p> 显示进程信息</p>
</li>
<li><p>info proc status</p>
<p> 显示进程相关信息，包括user id和group id；进程内有多少线程；虚拟内存的使用；挂起的信号，阻塞的信号，忽略的信号；TTY；消耗的系统和用户时间；堆栈大小；nice值</p>
</li>
<li><p>info display</p>
</li>
<li><p>info watchpoints</p>
<p> 列出当前所设置了的所有观察点</p>
</li>
<li><p>info line [linenum]</p>
<p> 查看第linenum的代码指令地址信息，不带linenum时，显示的是当前位置的指令地址信息</p>
</li>
<li><p>info source</p>
<p> 显示此源代码的源代码语言</p>
</li>
<li><p>info sources</p>
<p> 显示程序中所有有调试信息的源文件名，一共显示两个列表：一个是其符号信息已经读过的，一个是还未读取过的</p>
</li>
<li><p>info types</p>
<p> 显示程序中所有类型符号</p>
</li>
<li><p>info types regexp</p>
<p> 通过正则匹配来查看程序中的类型符号</p>
</li>
</ul>
<p>其他类似命令有：</p>
<ul>
<li><p>show args</p>
<p> 查看命令行参数</p>
</li>
<li><p>show environment [envname]</p>
<p> 查看环境变量信息</p>
</li>
<li><p>show paths</p>
<p> 查看程序的运行路径</p>
</li>
<li><p>whatis var1</p>
<p> 显示变量var1类型</p>
</li>
<li><p>ptype var1</p>
<p> 显示变量var1类型，若是var1结构体类型，会显示该结构体定义信息。</p>
</li>
</ul>
<h2 id="查看调用栈"><a href="#查看调用栈" class="headerlink" title="查看调用栈"></a>查看调用栈</h2><p>通过<code>where</code>可以查看调用栈信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(gdb) where</span><br><span class="line">#0  _rt0_amd64 ()</span><br><span class="line">    at /usr/lib/go/src/runtime/asm_amd64.s:15</span><br><span class="line">#1  0x0000000000000001 in ?? ()</span><br><span class="line">#2  0x00007fffffffdd2c in ?? ()</span><br><span class="line">#3  0x0000000000000000 in ?? ()</span><br></pre></td></tr></table></figure>

<h2 id="设置观察点"><a href="#设置观察点" class="headerlink" title="设置观察点"></a>设置观察点</h2><p>通过<code>watch</code>命令，可以设置观察点。当观察点的变量发生变化时，程序会停下来。可以简写成<code>wa</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) watch sum</span><br></pre></td></tr></table></figure>

<h2 id="查看汇编代码"><a href="#查看汇编代码" class="headerlink" title="查看汇编代码"></a>查看汇编代码</h2><p>我们可以通过开启<code>disassemble-next-line</code>自动显示汇编代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) set disassemble-next-line on</span><br></pre></td></tr></table></figure>

<p>当面我们可以查看指定函数的汇编代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) disassemble main.main</span><br></pre></td></tr></table></figure>

<p><code>disassemble</code>可以简写成<code>disas</code>。我们也可以将源代码和汇编代码一一映射起来后，查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) disas /m main.main</span><br></pre></td></tr></table></figure>

<p>GDB默认显示汇编指令格式是AT&amp;T格式，我们可以改成intel格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) set disassembly-flavor intel</span><br></pre></td></tr></table></figure>

<h2 id="自动显示变量值"><a href="#自动显示变量值" class="headerlink" title="自动显示变量值"></a>自动显示变量值</h2><p><code>display</code>命令支持自动显示变量值功能。当进行next或者step等调试操作时候，GDB会自动显示<code>display</code>所设置的变量或者地址的值信息。</p>
<p><code>display</code>命令格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">display &lt;expr&gt;</span><br><span class="line">display /&lt;fmt&gt; &lt;expr&gt;</span><br><span class="line">display /&lt;fmt&gt; &lt;addr&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>expr是一个表达式</li>
<li>fmt表示显示的格式</li>
<li>addr表示内存地址</li>
</ul>
<p>其他相关命令：</p>
<ul>
<li>undisplay [num]: 不显示</li>
<li>delete display [num]: 删除</li>
<li>disable display [num]: 关闭自动显示</li>
<li>enable display [num]： 开启自动显示</li>
<li>info display: 查看display信息</li>
</ul>
<p><strong>注意：</strong> 当不带display号时候，是针对所有display进行设置。</p>
<h2 id="显示将要执行的汇编指令"><a href="#显示将要执行的汇编指令" class="headerlink" title="显示将要执行的汇编指令"></a>显示将要执行的汇编指令</h2><p>我们可以通过<code>display</code>命令，实现当程序停止时，查看将要执行的汇编指令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) display /i $pc # 为了让每次执行都能看到汇编代码</span><br><span class="line">(gdb) display /3i $pc # 一次性显示3条指令</span><br></pre></td></tr></table></figure>

<p><code>==&gt;</code> 指的那一行就是正准备执行的代码, 但还没有执行的</p>
<p>取消显示可以用undisplay命令进行操作。</p>
<h2 id="查看backtrace信息"><a href="#查看backtrace信息" class="headerlink" title="查看backtrace信息"></a>查看backtrace信息</h2><p><code>backtrace</code>命令用来查看栈帧信息。可以简写成<code>bt</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(gdb) backtrace # 显示当前函数的栈帧以及局部变量信息</span><br><span class="line">(gdb) backtrace full # 显示各个函数的栈帧以及局部变量值</span><br><span class="line">(gdb) backtrace full n # 从内向外显示n个栈桢，及其局部变量</span><br><span class="line">(gdb) backtrace full -n # 从外向内显示n个栈桢，及其局部变量</span><br></pre></td></tr></table></figure>

<h2 id="切换栈帧信息"><a href="#切换栈帧信息" class="headerlink" title="切换栈帧信息"></a>切换栈帧信息</h2><p><code>frame</code>命令可以切换栈帧信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) frame n # 其中n是层数，最内层的函数帧为第0帧</span><br></pre></td></tr></table></figure>

<p>其他相关命令：</p>
<ul>
<li>info frame: 查看栈帧列表</li>
</ul>
<h2 id="调试多线程"><a href="#调试多线程" class="headerlink" title="调试多线程"></a>调试多线程</h2><p>GDB中有一组命令能够辅助多线程的调试：</p>
<ul>
<li><p>info threads</p>
<p> 显示当前可调式的所有线程，线程 ID 前有 “*” 表示当前被调试的线程。</p>
</li>
<li><p>thread threadid</p>
<p> 切换线程到线程threadid</p>
</li>
<li><p>set scheduler-locking [on|off|step]</p>
<p> 多线程环境下，会存在多个线程运行，这会影响调试某个线程的结果，这个命令可以设置调试的时候多个线程的运行情况，on 表示只有当前调试的线程会继续执行，off 表示不屏蔽任何线程，所有线程都可以执行，step 表示在单步执行时，只有当前线程会执行。</p>
</li>
<li><p>thread apply [threadid] [all] args</p>
<p> 对线程列表执行命令。比如通过<code>thread apply all bt full</code>可以查看所有线程的局部变量信息。</p>
</li>
</ul>
<h2 id="查看运行时变量"><a href="#查看运行时变量" class="headerlink" title="查看运行时变量"></a>查看运行时变量</h2><p><code>print</code>命令可以用来查看变量的值。<code>print</code>命令可以简写成<code>p</code>。<code>print</code>命令格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print [&lt;/format&gt;] &lt;expr&gt;</span><br></pre></td></tr></table></figure>

<p>format用来设置显示变量的格式，可选的。可用值有如下：</p>
<ul>
<li>x 按十六进制格式显示变量</li>
<li>d 按十进制格式显示变量</li>
<li>u 按十六进制格式显示无符号整型</li>
<li>o 按八进制格式显示变量</li>
<li>t 按二进制格式显示变量</li>
<li>a 按十六进制格式显示变量</li>
<li>c 按字符格式显示变量</li>
<li>f 按浮点数格式显示变量</li>
<li>z 按十六进制格式显示变量，左侧填充零</li>
</ul>
<p>expr可以是一个变量，也可以是表达式，也可以是寄存器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p var1 # 打印变量var1</span><br><span class="line">(gdb) p &amp;var1 # 打印变量var1地址</span><br><span class="line">(gdb) p $rsp # 打印rsp寄存器地址</span><br><span class="line">(gdb) p $rsp + 8 # 打印rsp加8后的地址信息</span><br><span class="line">(gdb) p 0xc000068fd0 # 打印0xc000068fd0转换成10进制格式</span><br><span class="line">(gdb) p /x 824634150864 # 打印824634150864转换成16进制格式</span><br></pre></td></tr></table></figure>

<p><code>print</code>也支持查看连续内存，<code>@</code>操作符用于查看连续内存，<code>@</code>的左边是第一个内存的地址的值，<code>@</code>的右边则想查看内存的长度。</p>
<p>例如对于如下代码：<code>int arr[] = &#123;2, 4, 6, 8, 10&#125;;</code>，可以通过如下命令查看arr前三个单元的数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p *arr@3</span><br><span class="line">$2 = &#123;2, 4, 6&#125;</span><br></pre></td></tr></table></figure>

<h2 id="查看内存中的值"><a href="#查看内存中的值" class="headerlink" title="查看内存中的值"></a>查看内存中的值</h2><p><code>examine</code>命令用来查看内存地址中的值，可以简写成<code>x</code>。<code>examine</code>命令的语法如下所示：</p>
<blockquote>
<p>examine &#x2F;&lt;n&#x2F;f&#x2F;u&gt;</p>
</blockquote>
<ul>
<li>n 表示显示字段的长度，也就是说从当前地址向后显示几个地址的内容。</li>
<li>f 表示显示的格式<ul>
<li>d 数字 decimal</li>
<li>u 无符号数字 unsigned decimal</li>
<li>s 字符串 string</li>
<li>c 字符 char</li>
<li>u 无符号整数 unsigned integer</li>
<li>t 二进制 binary</li>
<li>o 八进制格式 octal</li>
<li>x 十六进制格式 hex</li>
<li>f 浮点数格式 float</li>
<li>i 指令 instruction</li>
<li>a 地址 address</li>
<li>z 十六进制格式，左侧填充零 hex, zero padded on the left</li>
</ul>
</li>
<li>u 表示从当前地址往后请求的字节数，默认是4个bytes<ul>
<li>b 一个字节 byte</li>
<li>h 两个字节 halfword</li>
<li>w 四个字节 word</li>
<li>g 八个字节 giantword</li>
</ul>
</li>
</ul>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(gdb) x/10c 0x4005d4 # 打印前10个字符</span><br><span class="line">(gdb) x/16xb a # 以16进制格式打印数组前a16个byte的值</span><br><span class="line">(gdb) x/16ub a # 以无符号10进制格式打印数组a前16个byte的值</span><br><span class="line">(gdb) x/16tb a # 以2进制格式打印数组前16个abyte的值</span><br><span class="line">(gdb) x/16xw a # 以16进制格式打印数组a前16个word（4个byte）的值</span><br><span class="line">(gdb) x $rsp # 打印rsp寄存器执行的地址的值</span><br><span class="line">(gdb) x $rsp + 8 # 打印rsp加8后的地址指向的值</span><br><span class="line">(gdb) x 0xc000068fd0 # 打印内存0xc000068fd0指向的值</span><br><span class="line">(gdb) x/5i schedule # 打印函数schedule前5条指令</span><br></pre></td></tr></table></figure>

<h2 id="修改变量或寄存器值"><a href="#修改变量或寄存器值" class="headerlink" title="修改变量或寄存器值"></a>修改变量或寄存器值</h2><p><code>set</code>命令支持修改变量以及寄存器的值：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(gdb) set var var1=123 # 设置变量var1值为123</span><br><span class="line">(gdb) set var $rax=123 # 设置寄存器值为123</span><br><span class="line">(gdb) set environment envname1=123 # 设置环境变量envname1值为123</span><br></pre></td></tr></table></figure>

<h2 id="查看命令帮助信息"><a href="#查看命令帮助信息" class="headerlink" title="查看命令帮助信息"></a>查看命令帮助信息</h2><p><code>help</code>命令支持查看GDB命令帮助信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) help status # 查看所有命令使用示例</span><br><span class="line">(gdb) help x # 查看x命令使用帮助</span><br></pre></td></tr></table></figure>

<h2 id="搜索源文件"><a href="#搜索源文件" class="headerlink" title="搜索源文件"></a>搜索源文件</h2><p><code>search</code>命令支持在当前文件中使用正则表达式搜索内容。<code>search</code>等效于<code>forward-search</code>命令，是从当前位置向前搜索，可以简写成<code>fo</code>。<code>reverse-search</code>命令功能跟<code>forward-search</code>恰好相反，其可以简写成<code>rev</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) search func add # 从当前位置向前搜索add方法</span><br><span class="line">(gdb) rev func add # 从当前为向后搜索add方法</span><br></pre></td></tr></table></figure>

<h2 id="执行shell命令"><a href="#执行shell命令" class="headerlink" title="执行shell命令"></a>执行shell命令</h2><p>我们可以通过<code>shell</code>指令来执行shell命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) shell cat /proc/27889/maps # 查看进程27889的内存映射。若想查看当前进程id，可以使用info proc命令获取</span><br><span class="line">(gdb) shell ls -alh</span><br></pre></td></tr></table></figure>

<h2 id="GDB对go-runtime支持"><a href="#GDB对go-runtime支持" class="headerlink" title="GDB对go runtime支持"></a>GDB对go runtime支持</h2><ul>
<li>runtime.Breakpoint()：触发调试器断点。</li>
<li>runtime&#x2F;debug.PrintStack()：显示调试堆栈。</li>
<li>log：适合替代 print显示调试信息</li>
</ul>
<h2 id="进一步阅读"><a href="#进一步阅读" class="headerlink" title="进一步阅读"></a>进一步阅读</h2><ul>
<li><a target="_blank" rel="noopener" href="http://beej.us/guide/bggdb/">Beej’s Quick Guide to GDB</a></li>
<li><a target="_blank" rel="noopener" href="https://wizardforcel.gitbooks.io/100-gdb-tips/content/index.html">100个gdb小技巧</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2023/05/10/145/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/10/145/" class="post-title-link" itemprop="url">145. hexo搭建博客</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-10 13:00:00" itemprop="dateCreated datePublished" datetime="2023-05-10T13:00:00+08:00">2023-05-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/github/" itemprop="url" rel="index"><span itemprop="name">github</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h1><h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p>接下来就需要安装 Hexo 了，这是一个博客框架，Hexo 官方还提供了一个命令行工具，用于快速创建项目、页面、编译、部署 Hexo 博客，所以在这之前我们需要先安装 Hexo 的命令行工具。 命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<h1 id="信息提前说明"><a href="#信息提前说明" class="headerlink" title="信息提前说明"></a>信息提前说明</h1><h2 id="配置文件说明"><a href="#配置文件说明" class="headerlink" title="配置文件说明"></a>配置文件说明</h2><p>在 Hexo 中有两份主要的配置文件，其名称都是 <code>_config.yml</code>。 其中，一份位于*<u>站点根目录</u><em>下，主要包含 Hexo 本身的配置；另一份位于</em><u>主题目录</u>*下，这份配置由主题作者提供，主要用于配置主题相关的选项。</p>
<p>为了描述方便，在以下说明中，将前者称为 <strong>站点配置文件</strong>， 后者称为 <strong>主题配置文件</strong>。</p>
<h1 id="初始化-hexo"><a href="#初始化-hexo" class="headerlink" title="初始化 hexo"></a>初始化 hexo</h1><ol>
<li><p>创建文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> io_github_qeuroal</span><br></pre></td></tr></table></figure>
</li>
<li><p>初始化</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br><span class="line">$ <span class="built_in">mkdir</span> ~/Desktop/hexo &amp;&amp; <span class="built_in">ls</span> -al &gt; ~/Desktop/hexo/hexo_init.info</span><br></pre></td></tr></table></figure>
</li>
<li><p>将 Hexo 编译生成 HTML 代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
</li>
<li><p>本地运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
</li>
<li><p>站点配置文件</p>
<ul>
<li><p>修改根目录下的 <code>_config.yml</code> 文件，找到 Site 区域，这里面可以配置站点标题 <code>title</code>、副标题 <code>subtitle</code> 等内容、关键字 <code>keywords</code> 等内容.</p>
<p> 例:</p>
 <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">NightTeam</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">一个专注技术的组织</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">涉猎的主要编程语言为</span> <span class="string">Python、Rust、C++、Go，领域涵盖爬虫、深度学习、服务研发和对象存储等。</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">&quot;Python, Rust, C++, Go, 爬虫, 深度学习, 服务研发, 对象存储&quot;</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">NightTeam</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>language</code> 的字段设置为 <code>zh-CN</code></p>
</li>
</ul>
</li>
</ol>
<h1 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a>配置主题</h1><h2 id="Pure-主题"><a href="#Pure-主题" class="headerlink" title="Pure 主题"></a>Pure 主题</h2><p>使用 pure, 教程<a target="_blank" rel="noopener" href="https://blog.cofess.com/archives/">见这里</a>的 《Hexo搭建个人博客并部署到Github》和《Hexo博客主题pure使用说明》</p>
<h3 id="下载主题"><a href="#下载主题" class="headerlink" title="下载主题"></a>下载主题</h3><ol>
<li><p>下载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/cofess/hexo-theme-pure.git themes/pure</span><br></pre></td></tr></table></figure>
</li>
<li><p>启用主题</p>
<p>修改 <em><u>站点配置文件</u></em></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">pure</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="更新主题-可选-暂未使用过"><a href="#更新主题-可选-暂未使用过" class="headerlink" title="更新主题 (可选, 暂未使用过)"></a>更新主题 (可选, 暂未使用过)</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> themes/pure</span><br><span class="line">$ git pull</span><br></pre></td></tr></table></figure>



<h3 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h3><h4 id="导航菜单"><a href="#导航菜单" class="headerlink" title="导航菜单"></a>导航菜单</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导航菜单</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">Home:</span> <span class="string">.</span> </span><br><span class="line">  <span class="attr">Archives:</span> <span class="string">archives</span> <span class="comment"># 归档</span></span><br><span class="line">  <span class="attr">Categories:</span> <span class="string">categories</span> <span class="comment"># 分类</span></span><br><span class="line">  <span class="attr">Tags:</span> <span class="string">tags</span> <span class="comment"># 标签</span></span><br><span class="line">  <span class="attr">Repository:</span> <span class="string">repository</span> <span class="comment"># github repositories</span></span><br><span class="line">  <span class="attr">Books:</span> <span class="string">books</span>     <span class="comment"># 书单</span></span><br><span class="line">  <span class="attr">Links:</span> <span class="string">links</span> <span class="comment"># 友链</span></span><br><span class="line">  <span class="attr">About:</span> <span class="string">about</span> <span class="comment"># 关于</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 导航菜单图标（font awesome）</span></span><br><span class="line"><span class="attr">menu_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 是否启用菜单图标</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">fa-dashboard</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">fa-delicious</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">fa-folder</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">fa-code</span></span><br><span class="line">  <span class="attr">books:</span> <span class="string">fa-leanpub</span></span><br><span class="line">  <span class="attr">links:</span> <span class="string">fa-gg</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">fa-coffee</span></span><br></pre></td></tr></table></figure>

<h4 id="主题配置-1"><a href="#主题配置-1" class="headerlink" title="主题配置"></a>主题配置</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># config</span></span><br><span class="line"><span class="attr">config:</span></span><br><span class="line">  <span class="attr">skin:</span> <span class="string">theme-black</span> <span class="comment"># 主题颜色 theme-blue theme-green theme-purple</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="string">main-center</span> <span class="comment"># 布局方式 main-left main-center main-right</span></span><br><span class="line">  <span class="attr">toc:</span> <span class="literal">true</span> <span class="comment"># 是否开启文章章节目录导航</span></span><br><span class="line">  <span class="attr">menu_highlight:</span> <span class="literal">false</span> <span class="comment"># 是否开启当前菜单高亮显示</span></span><br><span class="line">  <span class="attr">thumbnail:</span> <span class="literal">false</span> <span class="comment"># enable posts thumbnail, options: true, false</span></span><br><span class="line">  <span class="attr">excerpt_link:</span> <span class="string">Read</span> <span class="string">More</span></span><br><span class="line">  <span class="comment">#New</span></span><br><span class="line">  <span class="attr">isNewTabLinks:</span> <span class="literal">true</span> <span class="comment">#是否链接打开新标签页</span></span><br><span class="line">  <span class="attr">autoUnfold:</span> <span class="literal">true</span> <span class="comment"># 默认展开文章目录</span></span><br></pre></td></tr></table></figure>

<h4 id="页面显示"><a href="#页面显示" class="headerlink" title="页面显示"></a>页面显示</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="attr">pagination:</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">prev:</span> </span><br><span class="line">    <span class="attr">alwayShow:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">next:</span></span><br><span class="line">    <span class="attr">alwayShow:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">midSize:</span> <span class="number">2</span> <span class="comment"># 当前页码左右到省略号显示的页码数，默认2，表现为 1 ... 4 5 6 7 8 ... 10</span></span><br><span class="line">  <span class="attr">showContent:</span> <span class="literal">false</span> <span class="comment"># 页面文章小于2篇时显示文章内容</span></span><br></pre></td></tr></table></figure>

<h4 id="大图显示"><a href="#大图显示" class="headerlink" title="大图显示"></a>大图显示</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Fancybox</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="捐赠"><a href="#捐赠" class="headerlink" title="捐赠"></a>捐赠</h4><p>直接更改照片文件即可</p>
<h4 id="修改为自己的名字"><a href="#修改为自己的名字" class="headerlink" title="修改为自己的名字"></a>修改为自己的名字</h4><ul>
<li>改 <code>cofess</code> 为 <code>&lt;your name&gt;</code></li>
<li></li>
</ul>
<h4 id="修改-example-com"><a href="#修改-example-com" class="headerlink" title="修改 example.com"></a>修改 example.com</h4><p>全局搜索 <code>example.com</code> 将其替换成网站网址 <code>Qeuroal.top</code></p>
<h4 id="个人链接"><a href="#个人链接" class="headerlink" title="个人链接"></a>个人链接</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="attr">Github:</span> <span class="string">https://github.com/Qeuroal</span></span><br><span class="line">  <span class="attr">Blog:</span> <span class="string">http://blog.Qeuroal.com</span></span><br><span class="line">  <span class="string">微博:</span> <span class="string">http://weibo.com/Qeuroal</span></span><br><span class="line">  <span class="comment"># 花瓣: http://huaban.com/Qeuroal</span></span><br><span class="line">  <span class="comment"># Behance: https://www.behance.net/Qeuroal</span></span><br></pre></td></tr></table></figure>

<h4 id="个人标签"><a href="#个人标签" class="headerlink" title="个人标签"></a>个人标签</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># My Personal Labels</span><br><span class="line">labels:</span><br><span class="line">  - 后端</span><br></pre></td></tr></table></figure>

<h4 id="搜索-未处理"><a href="#搜索-未处理" class="headerlink" title="搜索 (未处理)"></a>搜索 (未处理)</h4><p>主题内置三种站内搜索方式：insight、swiftype、baidu</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Search</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">insight:</span> <span class="literal">true</span> <span class="comment"># you need to install `hexo-generator-json-content` before using Insight Search</span></span><br><span class="line">  <span class="attr">swiftype:</span> <span class="comment"># enter swiftype install key here</span></span><br><span class="line">  <span class="attr">baidu:</span> <span class="literal">false</span> <span class="comment"># you need to disable other search engines to use Baidu search</span></span><br></pre></td></tr></table></figure>

<h4 id="文章启用目录索引"><a href="#文章启用目录索引" class="headerlink" title="文章启用目录索引"></a>文章启用目录索引</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">title: 文章标题</span><br><span class="line">categories:</span><br><span class="line">  - 文章分类</span><br><span class="line">tags:</span><br><span class="line">  - 文章标签</span><br><span class="line">toc: true # 是否启用内容索引</span><br></pre></td></tr></table></figure>

<h4 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h4><p>支持<code>weibo,qq,qzone,wechat,tencent,douban,diandian,facebook,twitter,google,linkedin</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Share</span></span><br><span class="line"><span class="comment"># weibo,qq,qzone,wechat,tencent,douban,diandian,facebook,twitter,google,linkedin</span></span><br><span class="line"><span class="attr">share:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 是否启用分享</span></span><br><span class="line">  <span class="attr">sites:</span> <span class="string">weibo,qq,wechat,facebook,twitter</span>  <span class="comment"># PC端显示的分享图标</span></span><br><span class="line">  <span class="attr">mobile_sites:</span> <span class="string">weibo,qq,qzone</span>  <span class="comment"># 移动端显示的分享图标</span></span><br></pre></td></tr></table></figure>

<h4 id="分类-标签-仓库-about等菜单的配置"><a href="#分类-标签-仓库-about等菜单的配置" class="headerlink" title="分类, 标签, 仓库, about等菜单的配置"></a>分类, 标签, 仓库, about等菜单的配置</h4><p>将 <code>/theme/pure/_source</code> 下的所有文件复制到 <code>/source</code> 下</p>
<h4 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h4><p>复制<code>theme/pure/_source/</code> 目录下<code>links</code>文件夹到<code>blog path/source/</code> 目录下</p>
<p>在 hexo 目录下的 source 文件夹内创建一个名为 _data（禁止改名）的文件夹。</p>
<p>然后在文件内创建一个名为 links.yml 的文件,在其中添加相关数据即可。</p>
<p>单个友情链接的格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name:</span><br><span class="line">    link: http://example.com</span><br><span class="line">    avatar: http://example.com/avatar.png</span><br><span class="line">    desc: &quot;这是一个描述&quot;</span><br></pre></td></tr></table></figure>

<p>添加多个友情链接，我们只需要根据上面的格式重复填写即可。</p>
<ul>
<li><p>将 Name 改为友情链接的名字，例如 Cofess。</p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://example.com/">http://example.com</a> 为友情链接的地址。</p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://example.com/avatar.png">http://example.com/avatar.png</a> 为友情链接的头像。</p>
</li>
<li><p>这是一个描述 为友情链接描述。</p>
</li>
</ul>
<h4 id="数学公式"><a href="#数学公式" class="headerlink" title="数学公式"></a>数学公式</h4><p>Hexo默认使用 “hexo-renderer-marked” 引擎渲染网页，该引擎会把一些特殊的 markdown 符号转换为相应的 html 标签</p>
<h5 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h5><p>解决方案有很多，可以网上搜下，为了节省大家的时间，这里只提供亲身测试过的方法。</p>
<p>更换 Hexo 的 markdown 渲染引擎，<a target="_blank" rel="noopener" href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a> 引擎替换默认的渲染引擎 <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a> 即可。</p>
<h5 id="安装hexo-renderer-markdown-it-plus插件"><a href="#安装hexo-renderer-markdown-it-plus插件" class="headerlink" title="安装hexo-renderer-markdown-it-plus插件"></a>安装hexo-renderer-markdown-it-plus插件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it-plus --save</span><br></pre></td></tr></table></figure>

<h5 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h5><p>安装插件后，如果未正常渲染LaTeX数学公式，在博客配置文件<code>_config.yml</code>中添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">markdown_it_plus:</span><br><span class="line">  highlight: true</span><br><span class="line">  html: true</span><br><span class="line">  xhtmlOut: true</span><br><span class="line">  breaks: true</span><br><span class="line">  langPrefix:</span><br><span class="line">  linkify: true</span><br><span class="line">  typographer:</span><br><span class="line">  quotes: “”‘’</span><br><span class="line">  plugins:</span><br><span class="line">    - plugin:</span><br><span class="line">        name: markdown-it-katex</span><br><span class="line">        enable: true</span><br><span class="line">    - plugin:</span><br><span class="line">        name: markdown-it-mark</span><br><span class="line">        enable: false</span><br></pre></td></tr></table></figure>

<h5 id="文章启用mathjax"><a href="#文章启用mathjax" class="headerlink" title="文章启用mathjax"></a>文章启用mathjax</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">title: Hello World</span><br><span class="line">mathjax: true</span><br></pre></td></tr></table></figure>

<h4 id="文章简介内容不全显式"><a href="#文章简介内容不全显式" class="headerlink" title="文章简介内容不全显式"></a>文章简介内容不全显式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showContent: false # 页面文章小于2篇时显示文章内容</span><br></pre></td></tr></table></figure>

<h4 id="删除部分文件"><a href="#删除部分文件" class="headerlink" title="删除部分文件"></a>删除部分文件</h4><ul>
<li><code>themes/pure/_config.yml.example</code></li>
<li><code>themes/pure/README.cn.md</code></li>
<li><code>themes/pure/README.md</code></li>
</ul>
<h4 id="关闭订阅"><a href="#关闭订阅" class="headerlink" title="关闭订阅"></a>关闭订阅</h4><ul>
<li><pre><code class="yml"> # rss
 # rss: /atom.xml
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```yml</span><br><span class="line">     social:</span><br><span class="line">       links:</span><br><span class="line">         github: https://github.com/Qeuroal</span><br><span class="line">         weibo: http://weibo.com/Qeuroal</span><br><span class="line">         twitter: https://twitter.com/Qeuroal</span><br><span class="line">         # facebook: /</span><br><span class="line">         # dribbble: /</span><br><span class="line">         behance: https://www.behance.net/Qeuroal</span><br><span class="line">         # rss: atom.xml</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h4 id="更改头像"><a href="#更改头像" class="headerlink" title="更改头像"></a>更改头像</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">profile:</span></span><br><span class="line">  <span class="comment"># avatar: images/avatar.jpg</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">images/avatar.png</span></span><br></pre></td></tr></table></figure>

<h4 id="更改个人简介"><a href="#更改个人简介" class="headerlink" title="更改个人简介"></a>更改个人简介</h4><p>文件: <code>/source/about/index.md</code></p>
<h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><h4 id="hexo-deployer-git-must-common"><a href="#hexo-deployer-git-must-common" class="headerlink" title="hexo-deployer-git (must, common)"></a>hexo-deployer-git (must, common)</h4><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<h5 id="站点配置-根目录-config-yml"><a href="#站点配置-根目录-config-yml" class="headerlink" title="站点配置(根目录) config.yml"></a>站点配置(根目录) config.yml</h5><p><code>_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> &#123;<span class="string">git</span> <span class="string">repo</span> <span class="string">ssh</span> <span class="string">address</span>&#125;</span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<h4 id="hexo-generator-feed-normal-但不推荐订阅"><a href="#hexo-generator-feed-normal-但不推荐订阅" class="headerlink" title="hexo-generator-feed (normal, 但不推荐订阅)"></a>hexo-generator-feed (normal, 但不推荐订阅)</h4><p>Github：<a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-generator-feed">https://github.com/hexojs/hexo-generator-feed</a></p>
<h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><p>RSS的生成插件，你可以在配置显示你站点的RSS，文件路径\atom.xml。</p>
<h5 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>

<h5 id="配置："><a href="#配置：" class="headerlink" title="配置："></a>配置：</h5><p>在博客配置文件<code>_config.yml</code>中添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20</span><br><span class="line">  hub:</span><br><span class="line">  content:</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>type</strong> - Feed type. (atom&#x2F;rss2)</li>
<li><strong>path</strong> - Feed path. (Default: atom.xml&#x2F;rss2.xml)</li>
<li><strong>limit</strong> - Maximum number of posts in the feed (Use <code>0</code> or <code>false</code> to show all posts)</li>
<li><strong>hub</strong> - URL of the PubSubHubbub hubs (Leave it empty if you don’t use it)</li>
<li><strong>content</strong> - (optional) set to ‘true’ to include the contents of the entire post in the feed.</li>
</ul>
<h4 id="hexo-generator-json-content-must"><a href="#hexo-generator-json-content-must" class="headerlink" title="hexo-generator-json-content (must)"></a>hexo-generator-json-content (must)</h4><h5 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h5><p><a target="_blank" rel="noopener" href="https://github.com/alexbruno/hexo-generator-json-content">https://github.com/alexbruno/hexo-generator-json-content</a></p>
<h5 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h5><p>用于生成静态站点数据，提供搜索功能的数据源。</p>
<h5 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-json-content --save</span><br></pre></td></tr></table></figure>

<h5 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h5><p>在博客配置文件<code>_config.yml</code>中添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">jsonContent:</span><br><span class="line">  ignore:</span><br><span class="line">    - path/to/a/page</span><br><span class="line">    - url/to/one/post</span><br><span class="line">    - an-entire-category</span><br><span class="line">    - specific.file</span><br><span class="line">    - .ext # a file extension</span><br></pre></td></tr></table></figure>

<h4 id="hexo-image-link-must"><a href="#hexo-image-link-must" class="headerlink" title="hexo-image-link (must)"></a>hexo-image-link (must)</h4><p>在github上用hexo搭建了自己的博客，用typora写完一篇博文，满怀欣喜地deploy之后发现图片加载失败…真的很吐血。去网上一搜索，嗯，好像不少人都遇到了这个问题，解决方法看似一大堆实则无效或过时不匹配，绝大多数资料都是安装<code>hexo-asset-image</code>的插件，亲测对于markdown图片路径没有用啊！比出现问题更折磨人的是遇上一堆错误的解决方法…</p>
<p>我想要寻找在本地和网页上都能显示的办法，终于发现了一款插件<code>hexo-image-link</code>，是将markdown图片路径转换为asset_img语法，使得图片能够同时显示在typora和hexo上。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% asset_img "local-image.png" "image file label" %} -&gt; &#123;% asset_img label local-image.png %&#125;</span><br></pre></td></tr></table></figure>

<h5 id="具体步骤"><a href="#具体步骤" class="headerlink" title="具体步骤"></a>具体步骤</h5><ul>
<li><p>修改<code>_config.yml</code>中的<code>post_asset_folder: true</code></p>
</li>
<li><p>安装hexo-image-link</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-image-link --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改 <em><u>站点配置文件</u></em> 为 <code>post_asset_folder: true</code></p>
</li>
</ul>
<blockquote>
<p>注</p>
</blockquote>
<ul>
<li><p>如果 npm下载比较慢的话，尝试 cnpm下载</p>
</li>
<li><p>安装</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line">$ cnpm install hexo-image-link --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改md文件中的图片路径</p>
  </li>
</ul>
<h4 id="hexo-autonofollow-bad"><a href="#hexo-autonofollow-bad" class="headerlink" title="hexo-autonofollow (bad)"></a>hexo-autonofollow (bad)</h4><p>Github：<a target="_blank" rel="noopener" href="https://github.com/liuzc/hexo-autonofollow">https://github.com/liuzc/hexo-autonofollow</a></p>
<p>简介：自动为站外链接添加nofollow属性</p>
<p>安装：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-autonofollow --save</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<p>在博客配置文件<code>_config.yml</code>中添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nofollow:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line">    - exclude1.com</span><br><span class="line">    - exclude2.com</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>enable</strong> - 是否启用</li>
<li><strong>exclude</strong> - 排除域名</li>
</ul>
<h4 id="配置主题无意义的组件"><a href="#配置主题无意义的组件" class="headerlink" title="配置主题无意义的组件"></a>配置主题无意义的组件</h4><h5 id="豆瓣书单-关闭-毫无意义"><a href="#豆瓣书单-关闭-毫无意义" class="headerlink" title="豆瓣书单 (关闭, 毫无意义)"></a>豆瓣书单 (关闭, 毫无意义)</h5><p>复制<code>theme/pure/_source/</code> 目录下<code>books</code>文件夹到<code>blog path/source/</code> 目录下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># douban 豆瓣书单</span><br><span class="line">douban:</span><br><span class="line">  user: *** # 豆瓣用户名</span><br><span class="line">  start: 0 # 从哪一条记录开始</span><br><span class="line">  count: 100 # 获取豆瓣书单数据条数</span><br></pre></td></tr></table></figure>

<h5 id="评论-关闭-鸡肋"><a href="#评论-关闭-鸡肋" class="headerlink" title="评论 (关闭, 鸡肋)"></a>评论 (关闭, 鸡肋)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">comment:</span><br><span class="line">  type:   # 启用哪种评论系统, 不填即关闭</span><br></pre></td></tr></table></figure>

<h2 id="Next-主题"><a href="#Next-主题" class="headerlink" title="Next 主题"></a>Next 主题</h2><h3 id="下载主题-1"><a href="#下载主题-1" class="headerlink" title="下载主题"></a>下载主题</h3><ol>
<li><p>最新版本:</p>
<p> Download the <a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-theme-next/archive/master.zip">Latest Master Branch</a></p>
</li>
<li><p>稳定版本</p>
<p> Download the <a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-theme-next/releases/latest">Latest Release Version</a></p>
</li>
<li><p>指定版本</p>
<p> Download the <a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-theme-next/releases/latest">Specific Release Version</a></p>
<blockquote>
<p>In rare cases useful, but not recommended.<br>You must define version. Let’s take v8.0.0 as an example. Replace it with any version from <a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-theme-next/tags">tags list</a>.</p>
</blockquote>
</li>
<li><p>git 下载</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> io_github_qeuroal</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/next-theme/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>教程: <a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/getting-started/installation">Installation</a></p>
</blockquote>
<h3 id="主题配置-2"><a href="#主题配置-2" class="headerlink" title="主题配置"></a>主题配置</h3><p>修改 <code>theme/next/_config.yml</code></p>
<h4 id="主题配置文件"><a href="#主题配置文件" class="headerlink" title="主题配置文件"></a>主题配置文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#Schemes</span><br><span class="line">#scheme: Muse</span><br><span class="line">#scheme: Mist</span><br><span class="line">scheme: Pisces</span><br><span class="line">#scheme: Gemini</span><br></pre></td></tr></table></figure>

<h4 id="Menu-增加关于、标签、分类、404页面"><a href="#Menu-增加关于、标签、分类、404页面" class="headerlink" title="Menu 增加关于、标签、分类、404页面"></a>Menu 增加关于、标签、分类、404页面</h4><ol>
<li><p>将 about、tags、categories 前的 #号去掉，示例如下：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || fa fa-home</span><br><span class="line">  about: /about/ || fa fa-user</span><br><span class="line">  tags: /tags/ || fa fa-tags</span><br><span class="line">  categories: /categories/ || fa fa-th</span><br><span class="line">  archives: /archives/ || fa fa-archive</span><br><span class="line">  #schedule: /schedule/ || fa fa-calendar</span><br><span class="line">  #sitemap: /sitemap.xml || fa fa-sitemap</span><br><span class="line">  #commonweal: /404/ || fa fa-heartbeat</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建相关页面</p>
<p> 在博客根目录下执行下列命令</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page <span class="string">&quot;about&quot;</span></span><br><span class="line">$ hexo new page <span class="string">&quot;tags&quot;</span></span><br><span class="line">$ hexo new page <span class="string">&quot;categories&quot;</span></span><br><span class="line">$ hexo new page 404</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改生成页面的配置</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">source/about/index.md</span><br><span class="line">source/tags/index.md</span><br><span class="line">source/categories/index.md</span><br><span class="line">source/404/index.md</span><br></pre></td></tr></table></figure>
</li>
<li><p>404 相关</p>
<p> 在 <code>front-matter</code> 中添加 <code>permalink: /404</code>，表示指定该页面固定链接为 http:&#x2F;&#x2F;“主页”&#x2F;404.html</p>
 <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 404 Not Found：该页无法显示</span><br><span class="line">toc: false</span><br><span class="line">comments: false</span><br><span class="line"><span class="section">permalink: /404</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//www.qq.com/404/search_children.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">homePageUrl</span>=<span class="string">&quot;&lt;%- config.url %&gt;</span></span></span>&quot; homePageName=&quot;回到我的主页&quot;&gt;<span class="language-xml"><span class="tag"><span class="string">&lt;/script&gt;</span></span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="设置左上角或右上角-github-图标"><a href="#设置左上角或右上角-github-图标" class="headerlink" title="设置左上角或右上角 github 图标"></a>设置左上角或右上角 github 图标</h4><p>主题配置文件，启用 <code>github-banner</code> 如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">github_banner:</span><br><span class="line">  enable: true</span><br><span class="line">  permalink: https://https://github.com/Qeuroal</span><br><span class="line">  title: Follow me on GitHub</span><br></pre></td></tr></table></figure>

<h4 id="设置侧栏阅读进度百分比"><a href="#设置侧栏阅读进度百分比" class="headerlink" title="设置侧栏阅读进度百分比"></a>设置侧栏阅读进度百分比</h4><p>编辑站点配置文件，修改 <code>back2top</code> 部分如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">copyback2top:</span><br><span class="line">  enable: true</span><br><span class="line">  sidebar: true</span><br><span class="line">  scrollpercent: true</span><br></pre></td></tr></table></figure>

<h4 id="设置网页底部信息"><a href="#设置网页底部信息" class="headerlink" title="设置网页底部信息"></a>设置网页底部信息</h4><p>查看主题配置文件，修改 footer 配置如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">footer:</span><br><span class="line">  # Specify the year when the site was setup. If not defined, current year will be used.</span><br><span class="line">  #since: 2021</span><br><span class="line"></span><br><span class="line">  # Icon between year and copyright info.</span><br><span class="line">  icon:</span><br><span class="line">    # Icon name in Font Awesome. See: https://fontawesome.com/icons</span><br><span class="line">    name: fa fa-heart</span><br><span class="line">    # If you want to animate the icon, set it to true.</span><br><span class="line">    animated: false</span><br><span class="line">    # Change the color of icon, using Hex Code.</span><br><span class="line">    color: &quot;#ff0000&quot;</span><br><span class="line"></span><br><span class="line">  # If not defined, `author` from Hexo `_config.yml` will be used.</span><br><span class="line">  # Set to `false` to disable the copyright statement.</span><br><span class="line">  copyright:</span><br><span class="line"></span><br><span class="line">  # Powered by Hexo &amp; NexT</span><br><span class="line">  powered: true</span><br><span class="line"></span><br><span class="line">  # Beian ICP and gongan information for Chinese users. See: https://beian.miit.gov.cn, http://www.beian.gov.cn</span><br><span class="line">  beian:</span><br><span class="line">    enable: false</span><br><span class="line">    icp:</span><br><span class="line">    # The digit in the num of gongan beian.</span><br><span class="line">    gongan_id:</span><br><span class="line">    # The full num of gongan beian.</span><br><span class="line">    gongan_num:</span><br><span class="line">    # The icon for gongan beian. See: http://www.beian.gov.cn/portal/download</span><br><span class="line">    gongan_icon_url:</span><br></pre></td></tr></table></figure>

<h4 id="图片懒加载设置"><a href="#图片懒加载设置" class="headerlink" title="图片懒加载设置"></a>图片懒加载设置</h4><p>在主题配置文件中启用 <code>lazyload</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copylazyload: true</span><br></pre></td></tr></table></figure>

<h4 id="设置代码块复制和代码高亮"><a href="#设置代码块复制和代码高亮" class="headerlink" title="设置代码块复制和代码高亮"></a>设置代码块复制和代码高亮</h4><p>在主题配置文件中修改 codeblock</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">codeblock:</span><br><span class="line">  # Code Highlight theme</span><br><span class="line">  # All available themes: https://theme-next.js.org/highlight/</span><br><span class="line">  theme:</span><br><span class="line">    light: atom-one-dark</span><br><span class="line">    dark: stackoverflow-dark</span><br><span class="line">  prism:</span><br><span class="line">    light: prism</span><br><span class="line">    dark: prism-dark</span><br><span class="line">  # Add copy button on codeblock</span><br><span class="line">  copy_button:</span><br><span class="line">    enable: true</span><br><span class="line">    # Available values: default | flat | mac</span><br><span class="line">    style:</span><br><span class="line">  # Fold code block</span><br><span class="line">  fold:</span><br><span class="line">    enable: false</span><br><span class="line">    height: 500</span><br></pre></td></tr></table></figure>

<h4 id="修改文章底部标签样式"><a href="#修改文章底部标签样式" class="headerlink" title="修改文章底部标签样式"></a>修改文章底部标签样式</h4><p>在主题配置文件中修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copytag_icon: true</span><br></pre></td></tr></table></figure>

<h4 id="网站icon"><a href="#网站icon" class="headerlink" title="网站icon"></a>网站icon</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">favicon:</span><br><span class="line">  small: /images/favicon.png</span><br><span class="line">  medium: /images/favicon.png</span><br><span class="line">  apple_touch_icon: /images/avatar.jpg</span><br><span class="line">  safari_pinned_tab: /images/avatar.jpg</span><br><span class="line">  #android_manifest: /manifest.json</span><br></pre></td></tr></table></figure>

<h4 id="侧边栏头像"><a href="#侧边栏头像" class="headerlink" title="侧边栏头像"></a>侧边栏头像</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Sidebar Avatar</span><br><span class="line">avatar:</span><br><span class="line">  # Replace the default image and set the url here.</span><br><span class="line">  url: /images/avatar.png</span><br><span class="line">  # If true, the avatar will be displayed in circle.</span><br><span class="line">  rounded: true</span><br><span class="line">  # If true, the avatar will be rotated with the cursor.</span><br><span class="line">  rotated: true</span><br></pre></td></tr></table></figure>

<h4 id="侧边栏社交链接"><a href="#侧边栏社交链接" class="headerlink" title="侧边栏社交链接"></a>侧边栏社交链接</h4><p>修改主题配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">social:</span><br><span class="line">  GitHub: https://github.com/Qeuroal || fab fa-github</span><br><span class="line">  #E-Mail: mailto:yourname@gmail.com || fa fa-envelope</span><br><span class="line">  #Weibo: https://weibo.com/yourname || fab fa-weibo</span><br><span class="line">  #Twitter: https://twitter.com/yourname || fab fa-twitter</span><br><span class="line">  #FB Page: https://www.facebook.com/yourname || fab fa-facebook</span><br><span class="line">  #StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow</span><br><span class="line">  #YouTube: https://youtube.com/yourname || fab fa-youtube</span><br><span class="line">  #Instagram: https://instagram.com/yourname || fab fa-instagram</span><br><span class="line">  #Skype: skype:yourname?call|chat || fab fa-skype</span><br></pre></td></tr></table></figure>

<h4 id="在文章底部增加版权信息"><a href="#在文章底部增加版权信息" class="headerlink" title="在文章底部增加版权信息"></a>在文章底部增加版权信息</h4><p>编辑 主题配置文件，修改如下配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">creative_commons:</span><br><span class="line">  # Available values: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | cc-zero</span><br><span class="line">  license: by-nc-sa</span><br><span class="line">  # Available values: big | small</span><br><span class="line">  size: small</span><br><span class="line">  sidebar: false</span><br><span class="line">  post: true</span><br><span class="line">  # You can set a language value if you prefer a translated version of CC license, e.g. deed.zh</span><br><span class="line">  # CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org</span><br><span class="line">  language:</span><br></pre></td></tr></table></figure>

<h4 id="开启缓存"><a href="#开启缓存" class="headerlink" title="开启缓存"></a>开启缓存</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Allow to cache content generation. Introduced in NexT v6.0.0.</span><br><span class="line">cache:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure>

<h4 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Remove unnecessary files after hexo generate.</span><br><span class="line">minify: true</span><br></pre></td></tr></table></figure>

<h4 id="侧边栏显示分类条数"><a href="#侧边栏显示分类条数" class="headerlink" title="侧边栏显示分类条数"></a>侧边栏显示分类条数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Posts / Categories / Tags in sidebar.</span><br><span class="line">site_state: true</span><br></pre></td></tr></table></figure>

<h4 id="友链"><a href="#友链" class="headerlink" title="友链"></a>友链</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Blog rolls 友链</span><br><span class="line">links_settings:</span><br><span class="line">  icon: fa fa-link # 设置icon</span><br><span class="line">  title: 友情链接 # 设置标题</span><br><span class="line">  # Available values: block | inline</span><br><span class="line">  layout: block # css样式，是一行一条，还是自动换行</span><br><span class="line"></span><br><span class="line">links:</span><br><span class="line">  友链1: http://yoursite.com</span><br><span class="line">  #... 依次追加即可</span><br></pre></td></tr></table></figure>

<h4 id="文章toc"><a href="#文章toc" class="headerlink" title="文章toc"></a>文章toc</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true # 是否开启</span><br><span class="line">  number: true # 自动显示文章编号</span><br><span class="line">  wrap: false # 溢出是否换行</span><br><span class="line">  expand_all: true # 展开所有还是手风琴</span><br><span class="line">  max_depth: 4 # 显示最大深度</span><br></pre></td></tr></table></figure>

<h4 id="顶部元信息"><a href="#顶部元信息" class="headerlink" title="顶部元信息"></a>顶部元信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">post_meta:</span><br><span class="line">  item_text: true # 使用中文显示</span><br><span class="line">  created_at: true</span><br><span class="line">  updated_at:</span><br><span class="line">    enable: true</span><br><span class="line">    another_day: true</span><br><span class="line">  categories: true</span><br></pre></td></tr></table></figure>

<h4 id="首页摘要"><a href="#首页摘要" class="headerlink" title="首页摘要"></a>首页摘要</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">excerpt_description: false  # 关闭自动提取</span><br><span class="line">read_more_btn: trues # 显示阅读全文</span><br></pre></td></tr></table></figure>

<ol>
<li><p>手动控制</p>
<p> 使用<code>&lt;!--more--&gt;</code>控制</p>
</li>
<li><p>使用 <code>front-matter</code> 中添加 <code>description</code> 或 <code>excerpt</code> 字段</p>
 <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">description: your excerpt</span><br><span class="line"><span class="section">excerpt: your excerpt</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="安装插件-1"><a href="#安装插件-1" class="headerlink" title="安装插件"></a>安装插件</h3><h4 id="hexo-deployer-git-must-common-1"><a href="#hexo-deployer-git-must-common-1" class="headerlink" title="hexo-deployer-git (must, common)"></a>hexo-deployer-git (must, common)</h4><ol>
<li><p>安装</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>站点配置(根目录) config.yml</p>
<p> <code>_config.yml</code></p>
 <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> &#123;<span class="string">git</span> <span class="string">repo</span> <span class="string">ssh</span> <span class="string">address</span>&#125;</span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="hexo-image-link-must-1"><a href="#hexo-image-link-must-1" class="headerlink" title="hexo-image-link (must)"></a>hexo-image-link (must)</h4><p>在github上用hexo搭建了自己的博客，用typora写完一篇博文，满怀欣喜地deploy之后发现图片加载失败…真的很吐血。去网上一搜索，嗯，好像不少人都遇到了这个问题，解决方法看似一大堆实则无效或过时不匹配，绝大多数资料都是安装<code>hexo-asset-image</code>的插件，亲测对于markdown图片路径没有用啊！比出现问题更折磨人的是遇上一堆错误的解决方法…</p>
<p>我想要寻找在本地和网页上都能显示的办法，终于发现了一款插件<code>hexo-image-link</code>，是将markdown图片路径转换为asset_img语法，使得图片能够同时显示在typora和hexo上。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% asset_img "local-image.png" "image file label" %} -&gt; &#123;% asset_img label local-image.png %&#125;</span><br></pre></td></tr></table></figure>

<h5 id="具体步骤-1"><a href="#具体步骤-1" class="headerlink" title="具体步骤"></a>具体步骤</h5><ul>
<li><p>修改<code>_config.yml</code>中的<code>post_asset_folder: true</code></p>
</li>
<li><p>安装hexo-image-link</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-image-link --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改 <em><u>站点配置文件</u></em> 为 <code>post_asset_folder: true</code></p>
</li>
</ul>
<blockquote>
<p>注:</p>
</blockquote>
<ul>
<li><p>如果 npm下载比较慢的话，尝试 cnpm下载</p>
</li>
<li><p>安装</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line">$ cnpm install hexo-image-link --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改md文件中的图片路径</p>
  </li>
</ul>
<h4 id="hexo-generator-searchdb"><a href="#hexo-generator-searchdb" class="headerlink" title="hexo-generator-searchdb"></a>hexo-generator-searchdb</h4><ol>
<li><p>安装 exo-generator-searchdb 这个插件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置 主题配置文件: <code>_config.yml</code></p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Local Search</span><br><span class="line"># Dependencies: https://github.com/next-theme/hexo-generator-searchdb</span><br><span class="line">local_search:</span><br><span class="line">  enable: true</span><br><span class="line">  # If auto, trigger search by changing input.</span><br><span class="line">  # If manual, trigger search by pressing enter key or search button.</span><br><span class="line">  trigger: auto</span><br><span class="line">  # Show top n results per article, show all results by setting to -1</span><br><span class="line">  top_n_per_article: 1</span><br><span class="line">  # Unescape html strings to the readable one.</span><br><span class="line">  unescape: false</span><br><span class="line">  # Preload the search data when the page loads.</span><br><span class="line">  preload: false</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><ol>
<li><p>配置站点配置文件 <code>_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> &#123;<span class="string">git</span> <span class="string">repo</span> <span class="string">ssh</span> <span class="string">address</span>&#125;</span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>部署</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="自定义域名"><a href="#自定义域名" class="headerlink" title="自定义域名"></a>自定义域名</h1><h2 id="添加-CNAME-文件"><a href="#添加-CNAME-文件" class="headerlink" title="添加 CNAME 文件"></a>添加 CNAME 文件</h2><p>在 <code>/source</code> 文件夹下添加 <code>CNAME</code> 文件, 如下所示:</p>
<img data-src="/2023/05/10/145/image-20230510121540937.png" class="">

<h1 id="hexo-常用命令"><a href="#hexo-常用命令" class="headerlink" title="hexo 常用命令"></a>hexo 常用命令</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;postName&quot;</span> <span class="comment"># 新建文章</span></span><br><span class="line">$ hexo new page <span class="string">&quot;pageName&quot;</span> <span class="comment"># 新建页面</span></span><br><span class="line">$ hexo generate <span class="comment"># 生成静态页面至public目录</span></span><br><span class="line">$ hexo server <span class="comment"># 开启预览访问端口（默认端口4000，&#x27;ctrl + c&#x27;关闭server）</span></span><br><span class="line">$ hexo deploy <span class="comment"># 将.deploy目录部署到GitHub</span></span><br><span class="line">$ hexo <span class="built_in">help</span>  <span class="comment"># 查看帮助</span></span><br><span class="line">$ hexo version  <span class="comment"># 查看Hexo的版本</span></span><br></pre></td></tr></table></figure>

<h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><h2 id="删除远程仓库里的某个文件-文件夹"><a href="#删除远程仓库里的某个文件-文件夹" class="headerlink" title="删除远程仓库里的某个文件&#x2F;文件夹"></a>删除远程仓库里的某个文件&#x2F;文件夹</h2><p>在git中可以用git rm命令删除文件（删除远程仓库文件）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> 仓库地址</span><br><span class="line">git add .</span><br><span class="line">step1: git <span class="built_in">rm</span> 文件 //本地中该文件会被删除</span><br><span class="line">step2: git <span class="built_in">rm</span> -r 文件夹 //删除文件夹</span><br><span class="line">step3: git commit -m <span class="string">&#x27;删除某个文件&#x27;</span></span><br><span class="line">step4: git push （origin master）</span><br></pre></td></tr></table></figure>

<p>上面的方法会把对应的本地文件也删除掉，如果不想把本地文件删除，只把缓存区中的对应部分删除，则加上 <code>--cached</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">rm</span> --cached 文件 //本地中该文件不会被删除</span><br><span class="line">git <span class="built_in">rm</span> -r  --cached  文件夹 //删除文件夹</span><br></pre></td></tr></table></figure>

<p>在 <code>git add .</code> 后面执行上面的命令，再推送到 github 远程仓库上的时候，仓库里面对应的文件&#x2F;文件夹就会被删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> 仓库地址</span><br><span class="line">git add .</span><br><span class="line">step1: git <span class="built_in">rm</span> --cached 文件 		//本地中该文件不会被删除</span><br><span class="line">step2: git <span class="built_in">rm</span> -r  --cached  文件夹 //删除文件夹</span><br><span class="line">step3: git commit -m <span class="string">&#x27;删除某个文件&#x27;</span></span><br><span class="line">step4: git push （origin master）</span><br></pre></td></tr></table></figure>



<h2 id="git-commit后，如何撤销commit"><a href="#git-commit后，如何撤销commit" class="headerlink" title="git commit后，如何撤销commit"></a>git commit后，如何撤销commit</h2><p>修改了本地的代码，然后使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add file</span><br><span class="line">git commit -m <span class="string">&#x27;修改原因&#x27;</span></span><br></pre></td></tr></table></figure>

<p>复制</p>
<p>执行commit后，还没执行push时，想要撤销这次的commit，该怎么办？</p>
<p>解决方案： 使用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft HEAD^</span><br></pre></td></tr></table></figure>

<p>复制</p>
<p>这样就成功撤销了commit，如果想要连着add也撤销的话，–soft改为–hard（删除工作空间的改动代码）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HEAD^ 表示上一个版本，即上一次的commit，也可以写成HEAD~1</span><br><span class="line">如果进行两次的commit，想要都撤回，可以使用HEAD~2</span><br></pre></td></tr></table></figure>

<p>复制</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--soft</span><br><span class="line">不删除工作空间的改动代码 ，撤销commit，不撤销git add file</span><br></pre></td></tr></table></figure>

<p>复制</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--hard</span><br><span class="line">删除工作空间的改动代码，撤销commit且撤销add</span><br></pre></td></tr></table></figure>

<p>复制</p>
<p>另外一点，如果commit注释写错了，先要改一下注释，有其他方法也能实现，如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br><span class="line">这时候会进入vim编辑器，修改完成你要的注释后保存即可。</span><br></pre></td></tr></table></figure>



<h2 id="撤销-git-add-并保留修改的方法"><a href="#撤销-git-add-并保留修改的方法" class="headerlink" title="撤销 git add . 并保留修改的方法"></a>撤销 git add . 并保留修改的方法</h2><p>执行完 <code>git add .</code></p>
<h3 id="文件退出暂存区，但是修改保留："><a href="#文件退出暂存区，但是修改保留：" class="headerlink" title="文件退出暂存区，但是修改保留："></a>文件退出暂存区，但是修改保留：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --mixed</span><br></pre></td></tr></table></figure>



<h3 id="撤销所有的已经-add-的文件："><a href="#撤销所有的已经-add-的文件：" class="headerlink" title="撤销所有的已经 add 的文件："></a>撤销所有的已经 add 的文件：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD .</span><br></pre></td></tr></table></figure>



<h3 id="撤销某个文件或文件夹："><a href="#撤销某个文件或文件夹：" class="headerlink" title="撤销某个文件或文件夹："></a>撤销某个文件或文件夹：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD  -filename</span><br></pre></td></tr></table></figure>

<p>另外：可以用 <code>git status</code> Git 会告诉你可以通过那个命令来执行操作。</p>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>可以用 <code>git status</code> Git 会告诉你可以通过那个命令来执行操作。</p>
<h2 id="push-失败"><a href="#push-失败" class="headerlink" title="push 失败"></a>push 失败</h2><blockquote>
<p>case 1</p>
</blockquote>
<p><code>OpenSSL SSL_read: Connection was reset, errno 10054</code>的话就把代理关了</p>
<h2 id="删除未跟踪文件"><a href="#删除未跟踪文件" class="headerlink" title="删除未跟踪文件"></a>删除未跟踪文件</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除 untracked files</span></span><br><span class="line">git clean -f</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 连 untracked 的目录也一起删掉</span></span><br><span class="line">git clean -fd</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 连 gitignore 的untrack 文件/目录也一起删掉 （慎用，一般这个是用来删掉编译出来的 .o之类的文件用的）</span></span><br><span class="line">git clean -xfd</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在用上述 git clean 前，墙裂建议加上 -n 参数来先看看会删掉哪些文件，防止重要文件被误删</span></span><br><span class="line">git clean -nxfd</span><br><span class="line">git clean -nf</span><br><span class="line">git clean -nfd</span><br></pre></td></tr></table></figure>



<h1 id="多终端同步"><a href="#多终端同步" class="headerlink" title="多终端同步"></a>多终端同步</h1><h2 id="新建私有仓库"><a href="#新建私有仓库" class="headerlink" title="新建私有仓库"></a>新建私有仓库</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# Readme&quot;</span> &gt;&gt; README.md</span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m <span class="string">&quot;first commit&quot;</span></span><br><span class="line">git branch -M master</span><br><span class="line">git remote add origin &lt;your https repo address&gt;</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>



<h2 id="文件夹说明"><a href="#文件夹说明" class="headerlink" title="文件夹说明"></a>文件夹说明</h2><table>
<thead>
<tr>
<th>文件夹</th>
<th>说明</th>
<th>是否需要上传github</th>
</tr>
</thead>
<tbody><tr>
<td>node_modules</td>
<td>hexo需要的模块，就是一些基础的npm安装模块，比如一些美化插件，在执行<code>npm install</code>的时候会重新生成</td>
<td>不需要</td>
</tr>
<tr>
<td>themes</td>
<td>主题文件</td>
<td>&#x3D;&#x3D;需要&#x3D;&#x3D;</td>
</tr>
<tr>
<td>public</td>
<td>hexo g命令执行后生成的静态页面文件</td>
<td>不需要</td>
</tr>
<tr>
<td>packages.json</td>
<td>记录了hexo需要的包的信息，之后换电脑了npm根据这个信息来安装hexo环境</td>
<td>&#x3D;&#x3D;需要&#x3D;&#x3D;</td>
</tr>
<tr>
<td>_config.yml</td>
<td>全局配置文件，这个不用多说了吧</td>
<td>&#x3D;&#x3D;需要&#x3D;&#x3D;</td>
</tr>
<tr>
<td>.gitignore</td>
<td>hexo生成的默认的.gitignore模块</td>
<td>&#x3D;&#x3D;需要&#x3D;&#x3D;</td>
</tr>
<tr>
<td>scaffolds</td>
<td>文章的模板</td>
<td>&#x3D;&#x3D;需要&#x3D;&#x3D;</td>
</tr>
<tr>
<td>.deploy_git</td>
<td>hexo g自动生成的</td>
<td>不需要</td>
</tr>
</tbody></table>
<h3 id="gitignore内容"><a href="#gitignore内容" class="headerlink" title=".gitignore内容"></a>.gitignore内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br></pre></td></tr></table></figure>



<h2 id="删除-git文件"><a href="#删除-git文件" class="headerlink" title="删除.git文件"></a>删除.git文件</h2><p>删除所有主题的 <code>.git</code> 文件，如：<code>rm -rf ./theme/pure/.git</code></p>
<blockquote>
<p>注</p>
</blockquote>
<p>查找 <code>.git</code> 文件</p>
<p>在&#x3D;&#x3D;根目录&#x3D;&#x3D;下执行以下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&quot;.git*&quot;</span></span><br></pre></td></tr></table></figure>



<h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;&lt;yout commit statement&gt;&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>



<h2 id="新电脑上的操作"><a href="#新电脑上的操作" class="headerlink" title="新电脑上的操作"></a>新电脑上的操作</h2><ol>
<li><p>下载</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;your repo&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装依赖</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p><code>npm install</code>其实就是读取了 <code>packages.json</code> 里面的信息，自动安装依赖，有的小伙伴可能只执行<code>npm install</code>就行了，不过按照上面的三步是最稳妥的</p>
</li>
<li><p>仓库更新</p>
<p>为了保证同步，推荐先合并更新再进行博客的编写</p>
<ul>
<li><p>pull (不推荐)</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure>
</li>
<li><p>fetch</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all    <span class="comment">#将远程git仓库上最新的内容拉取到本地,将本地库所关联的远程库更新至最新</span></span><br><span class="line">git reset --hard origin/master  <span class="comment">#强制将本地内容指向刚刚同步git云端内容</span></span><br></pre></td></tr></table></figure>

<p> <code>reset</code> 对所拉取的文件不做任何处理，此处不用 <code>pull</code> 是因为本地尚有许多文件，使用 <code>pull</code> 会有一些版本冲突，解决起来也麻烦，而本地的文件都是初始化生成的文件，较拉取的库里面的文件而言基本无用，所以直接丢弃。</p>
</li>
</ul>
</li>
<li><p>部署</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="更新脚本"><a href="#更新脚本" class="headerlink" title="更新脚本"></a>更新脚本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="QAs"><a href="#QAs" class="headerlink" title="QAs"></a>QAs</h1><h2 id="Error-Cannot-find-module-‘hexo-util’"><a href="#Error-Cannot-find-module-‘hexo-util’" class="headerlink" title="Error: Cannot find module ‘hexo-util’"></a>Error: Cannot find module ‘hexo-util’</h2><ul>
<li><p>方法1</p>
<ol>
<li><code>rm -rf node_modules</code></li>
<li><code>npm install hexo-util</code></li>
</ol>
</li>
<li><p>方法2</p>
<p> For those who also encounter this issue, please check your NPM version.</p>
<ul>
<li><code>&gt; 3</code>: Still not work. Please remove node_modules directory and reinstall using npm install.</li>
<li><code>&lt; 3</code>: Please add hexo-util explicitly via npm install –save-dev hexo-util to you site package deps.</li>
</ul>
<blockquote>
<p>reference: <a target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next/issues/1490">https://github.com/iissnan/hexo-theme-next/issues/1490</a></p>
</blockquote>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2023/05/08/144/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/08/144/" class="post-title-link" itemprop="url">144. Pytorch</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-08 13:00:00" itemprop="dateCreated datePublished" datetime="2023-05-08T13:00:00+08:00">2023-05-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="模型训练5要素"><a href="#模型训练5要素" class="headerlink" title="模型训练5要素"></a>模型训练5要素</h3><ul>
<li>数据：包括数据读取，数据清洗，进行数据划分和数据预处理，比如读取图片如何预处理及数据增强。</li>
<li>模型：包括构建模型模块，组织复杂网络，初始化网络参数，定义网络层。</li>
<li>损失函数：包括创建损失函数，设置损失函数超参数，根据不同任务选择合适的损失函数。</li>
<li>优化器：包括根据梯度使用某种优化器更新参数，管理模型参数，管理多个参数组实现不同学习率，调整学习率。</li>
<li>迭代训练：组织上面 4 个模块进行反复训练。包括观察训练效果，绘制 Loss&#x2F;Accuracy 曲线，用 TensorBoard 进行可视化分析</li>
</ul>
<h2 id="张量"><a href="#张量" class="headerlink" title="张量"></a>张量</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><blockquote>
<p>张量</p>
</blockquote>
<p><strong>官方定义</strong></p>
<p>A tensor is the primary data structure used by neural networks.</p>
<p><strong>官方定义2</strong></p>
<p>A PyTorch Tensor is conceptually identical to a numpy array: a Tensor is an n-dimensional array, and PyTorch provides many functions for operating on these Tensors. </p>
<p><strong>通俗理解</strong></p>
<p>多维数组(Tensors and nd-arrays are the same thing! So tensors are multidimensional arrays or nd-arrays for short.)</p>
<table>
<thead>
<tr>
<th align="center">Indexes required</th>
<th align="center">Computer science</th>
<th align="center">Mathematics</th>
</tr>
</thead>
<tbody><tr>
<td align="center">n</td>
<td align="center">nd-array</td>
<td align="center">nd-tensor</td>
</tr>
</tbody></table>
<ul>
<li>A scalar is a $0$ dimensional tensor</li>
<li>A vector is a $1$ dimensional tensor</li>
<li>A matrix is a $2$ dimensional tensor</li>
<li>A nd-array is an $n$ dimensional tensor</li>
</ul>
<p><strong>拓展</strong></p>
<p><em>We often see this kind of thing where different areas of study use different words for the same concept.</em> </p>
<blockquote>
<p>索引</p>
</blockquote>
<p>obvious: 访问一个多维数组, 需要几个索引</p>
<blockquote>
<p>秩</p>
</blockquote>
<p>即维数,或者说在张量中访问一个元素,需要的索引数</p>
<p><em>A tensor’s rank tells us how many indexes are needed to refer to a specific element within the tensor.</em></p>
<blockquote>
<p>轴</p>
</blockquote>
<p><em>An axis of a tensor is a specific dimension of a tensor.</em></p>
<h3 id="tensor-属性"><a href="#tensor-属性" class="headerlink" title="tensor 属性"></a>tensor 属性</h3><h4 id="torch-dtype"><a href="#torch-dtype" class="headerlink" title="torch.dtype"></a>torch.dtype</h4><table>
<thead>
<tr>
<th>Data type</th>
<th>dtype</th>
<th>CPU tensor</th>
<th>GPU tensor</th>
</tr>
</thead>
<tbody><tr>
<td>32-bit floating point</td>
<td>torch.float32</td>
<td>torch.FloatTensor</td>
<td>torch.cuda.FloatTensor</td>
</tr>
<tr>
<td>64-bit floating point</td>
<td>torch.float64</td>
<td>torch.DoubleTensor</td>
<td>torch.cuda.DoubleTensor</td>
</tr>
<tr>
<td>16-bit floating point</td>
<td>torch.float16</td>
<td>torch.HalfTensor</td>
<td>torch.cuda.HalfTensor</td>
</tr>
<tr>
<td>8-bit integer (unsigned)</td>
<td>torch.uint8</td>
<td>torch.ByteTensor</td>
<td>torch.cuda.ByteTensor</td>
</tr>
<tr>
<td>8-bit integer (signed)</td>
<td>torch.int8</td>
<td>torch.CharTensor</td>
<td>torch.cuda.CharTensor</td>
</tr>
<tr>
<td>16-bit integer (signed)</td>
<td>torch.int16</td>
<td>torch.ShortTensor</td>
<td>torch.cuda.ShortTensor</td>
</tr>
<tr>
<td>32-bit integer (signed)</td>
<td>torch.int32</td>
<td>torch.IntTensor</td>
<td>torch.cuda.IntTensor</td>
</tr>
<tr>
<td>64-bit integer (signed)</td>
<td>torch.int64</td>
<td>torch.LongTensor</td>
<td>torch.cuda.LongTensor</td>
</tr>
</tbody></table>
<h4 id="torch-device"><a href="#torch-device" class="headerlink" title="torch.device"></a>torch.device</h4><blockquote>
<p>类型</p>
</blockquote>
<ul>
<li>CPU</li>
<li>GPU</li>
</ul>
<blockquote>
<p>指定GPU</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">device = torch.device(<span class="string">&#x27;cuda:0&#x27;</span>)</span><br></pre></td></tr></table></figure>



<blockquote>
<p>注意</p>
</blockquote>
<p>One thing to keep in mind about using multiple devices is that tensor operations between tensors must happen between tensors that &#x3D;&#x3D;exists on the same device&#x3D;&#x3D;.</p>
<h4 id="torch-layout"><a href="#torch-layout" class="headerlink" title="torch.layout"></a>torch.layout</h4><p><em><u>应该就是步长&#x3D;&#x3D;?????&#x3D;&#x3D;</u></em></p>
<h4 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h4><img data-src="/2023/05/08/144/v2-3bc1ff0ab920582a3491111b81a32fe5_b.jpg" class="" title="img">

<ul>
<li>data: 被包装的 Tensor。</li>
<li>grad: data 的梯度。</li>
<li>grad_fn: 创建 Tensor 所使用的 Function，是自动求导的关键，因为根据所记录的函数才能计算出导数。</li>
<li><strong>requires_grad</strong>: 指示是否需要梯度，并不是所有的张量都需要计算梯度。</li>
<li>is_leaf: 指示是否叶子节点(张量)，叶子节点的概念在计算图中会用到，后面详细介绍。</li>
<li>dtype: 张量的数据类型，如 torch.FloatTensor，torch.cuda.FloatTensor。</li>
<li>shape: 张量的形状。如 (64, 3, 224, 224)</li>
<li>device: 张量所在设备 (CPU&#x2F;GPU)，GPU 是加速计算的关键</li>
</ul>
<h3 id="构建tensor的方法"><a href="#构建tensor的方法" class="headerlink" title="构建tensor的方法"></a>构建tensor的方法</h3><h4 id="直接构造tensor"><a href="#直接构造tensor" class="headerlink" title="直接构造tensor"></a>直接构造tensor</h4><ul>
<li><code>torch.Tensor(data)</code></li>
<li><code>torch.tensor(data)</code></li>
<li><code>torch.as_tensor(data)</code></li>
<li><code>torch.from_numpy(data)</code></li>
</ul>
<h4 id="根据数值构造tensor"><a href="#根据数值构造tensor" class="headerlink" title="根据数值构造tensor"></a>根据数值构造tensor</h4><ul>
<li><p><code>torch.eye(k)</code>: 生成 k 阶的单位矩阵</p>
</li>
<li><p><code>torch.zeros(shape)</code>: 生成元素值都为 0, 形状为 shape 的张量</p>
</li>
<li><p><code>torch.zeros_like(input, dtype=None, layout=None, device=None, requires_grad=False, memory_format=torch.preserve_format)</code>: 根据 input 形状创建全 0 张量</p>
</li>
<li><p><code>torch.ones(shape)</code>: 生成元素值都为 1, 形状为 shape 的张量</p>
</li>
<li><p><code>torch.rand(shape)</code>: 生成元素值随机, 形状为 shape 的张量</p>
</li>
<li><p><code>torch.full()</code></p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.full(size, fill_value, out=<span class="literal">None</span>, dtype=<span class="literal">None</span>, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>size: 张量的形状，如 (3,3)</li>
<li>fill_value: 张量中每一个元素的值</li>
</ul>
</li>
<li><p><code>torch.full_like()</code></p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.full_like(<span class="built_in">input</span>, fill_value, dtype=<span class="literal">None</span>, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>, memory_format=torch.preserve_format) → Tensor</span><br></pre></td></tr></table></figure>

<ul>
<li>input: the size of <code>input</code> will determine size of the output tensor.</li>
<li>fill_value: the number to fill the output tensor with.</li>
</ul>
</li>
<li><p><code>torch.arange()</code>: 创建等差的 1 维张量。注意区间为 $[start, end)$</p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.arange(start=<span class="number">0</span>, end, step=<span class="number">1</span>, out=<span class="literal">None</span>, dtype=<span class="literal">None</span>, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>start: 数列起始值</li>
<li>end: 数列结束值，开区间，取不到结束值</li>
<li>step: 数列公差，默认为 1</li>
</ul>
</li>
<li><p><code>torch.linspace()</code> :  创建均分的 1 维张量。数值区间为 $[start, end]$</p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.linspace(start, end, steps=<span class="number">100</span>, out=<span class="literal">None</span>, dtype=<span class="literal">None</span>, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>start: 数列起始值</li>
<li>end: 数列结束值</li>
<li>steps: 数列长度 (元素个数)</li>
</ul>
</li>
<li><p><code>touch.logspace()</code> : 创建对数均分的 1 维张量, 数值区间为 $[start, end]$, 底为 base</p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.logspace(start, end, steps=<span class="number">100</span>, base=<span class="number">10.0</span>, out=<span class="literal">None</span>, dtype=<span class="literal">None</span>, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>start: 数列起始值</li>
<li>end: 数列结束值</li>
<li>steps: 数列长度 (元素个数)</li>
<li>base: 对数函数的底，默认为 10</li>
</ul>
</li>
</ul>
<h4 id="根据概率构造tensor"><a href="#根据概率构造tensor" class="headerlink" title="根据概率构造tensor"></a>根据概率构造tensor</h4><ul>
<li><p><code>torch.normal(mean, std, *, generator=None, out=None)</code>: 生成正态分布 (高斯分布)</p>
<ul>
<li>mean: 均值</li>
<li>std: 标准差</li>
</ul>
<p> <strong>4种模式</strong></p>
<ul>
<li><p>mean 为标量, std 为标量, 则&#x3D;&#x3D;需要设置 size&#x3D;&#x3D;</p>
<p> 如: <code>torch.normal(0., 1., size=(4,))</code></p>
</li>
<li><p>mean 为标量，std 为张量</p>
</li>
<li><p>mean 为张量，std 为标量</p>
</li>
<li><p>mean 为张量，std 为张量</p>
</li>
</ul>
</li>
<li><p><code>torch.randn()</code> 和 <code>torch.randn_like()</code>: 生成标准正态分布。</p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.randn(*size, out=<span class="literal">None</span>, dtype=<span class="literal">None</span>, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>size: 张量的形状</li>
</ul>
</li>
<li><p><code>torch.rand()</code> 和 <code>torch.rand_like()</code>: 在区间 $[0, 1)$ 上生成均匀分布</p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.rand(*size, out=<span class="literal">None</span>, dtype=<span class="literal">None</span>, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>torch.randint()</code> 和 <code>torch.randint_like()</code>: 在区间 $[low, high)$ 上生成整数均匀分布</p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">randint(low=<span class="number">0</span>, high, size, *, generator=<span class="literal">None</span>, out=<span class="literal">None</span>, dtype=<span class="literal">None</span>, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>size: 张量的形状</li>
</ul>
</li>
<li><p><code>torch.randperm()</code> ：生成从 0 到 n-1 的随机排列。常用于生成索引。</p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.randperm(n, out=<span class="literal">None</span>, dtype=torch.int64, layout=torch.strided, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>n: 张量的长度</li>
</ul>
</li>
<li><h3 id="torch-bernoulli"><a href="#torch-bernoulli" class="headerlink" title="torch.bernoulli()"></a>torch.bernoulli()</h3> <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.bernoulli(input, *, generator=None, out=None)</span><br></pre></td></tr></table></figure>

<p> 功能：以 input 为概率，生成伯努利分布 (0-1 分布，两点分布)</p>
<ul>
<li>input: 概率值</li>
</ul>
</li>
</ul>
<h3 id="使用data的构造方法的不同"><a href="#使用data的构造方法的不同" class="headerlink" title="使用data的构造方法的不同"></a>使用data的构造方法的不同</h3><h4 id="输出不同对比"><a href="#输出不同对比" class="headerlink" title="输出不同对比"></a>输出不同对比</h4><blockquote>
<p>code</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">data = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.int32)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;numpy: &quot;</span>, data, <span class="string">&quot;; dtype: &quot;</span>, data.dtype)</span><br><span class="line"></span><br><span class="line"><span class="comment"># torch.Tensor(data)</span></span><br><span class="line">tensor1 = torch.Tensor(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;tensor1: &quot;</span>, tensor1, <span class="string">&quot;; dtype: &quot;</span>, tensor1.dtype)</span><br><span class="line"></span><br><span class="line"><span class="comment"># torch.tensor(data)</span></span><br><span class="line">tensor2 = torch.tensor(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;tensor2: &quot;</span>, tensor2, <span class="string">&quot;; dtype: &quot;</span>, tensor2.dtype)</span><br><span class="line"></span><br><span class="line"><span class="comment"># torch.as_tensor(data)</span></span><br><span class="line">tensor3 = torch.as_tensor(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;tensor3: &quot;</span>, tensor3, <span class="string">&quot;; dtype: &quot;</span>, tensor3.dtype)</span><br><span class="line"></span><br><span class="line"><span class="comment"># torch.from_numpy(data)</span></span><br><span class="line">tensor4 = torch.from_numpy(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;tensor4: &quot;</span>, tensor4, <span class="string">&quot;; dtype: &quot;</span>, tensor4.dtype)</span><br></pre></td></tr></table></figure>



<blockquote>
<p>output</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">numpy:  [1 2 3] ; dtype:  int32</span><br><span class="line">tensor1:  tensor([1., 2., 3.]) ; dtype:  torch.float32</span><br><span class="line">tensor2:  tensor([1, 2, 3], dtype=torch.int32) ; dtype:  torch.int32</span><br><span class="line">tensor3:  tensor([1, 2, 3], dtype=torch.int32) ; dtype:  torch.int32</span><br><span class="line">tensor4:  tensor([1, 2, 3], dtype=torch.int32) ; dtype:  torch.int32</span><br></pre></td></tr></table></figure>



<h4 id="数据类型对比"><a href="#数据类型对比" class="headerlink" title="数据类型对比"></a>数据类型对比</h4><blockquote>
<p>torch.Tensor(data)</p>
</blockquote>
<table>
<thead>
<tr>
<th>数据</th>
<th>数据类型</th>
</tr>
</thead>
<tbody><tr>
<td>tensor([1., 2., 3.])</td>
<td>torch.float32</td>
</tr>
</tbody></table>
<blockquote>
<p>torch.tensor(data)</p>
</blockquote>
<table>
<thead>
<tr>
<th>数据</th>
<th>数据类型</th>
</tr>
</thead>
<tbody><tr>
<td>tensor([1, 2, 3], dtype&#x3D;torch.int32)</td>
<td>torch.int32</td>
</tr>
</tbody></table>
<blockquote>
<p>torch.as_tensor(data)</p>
</blockquote>
<table>
<thead>
<tr>
<th>数据</th>
<th>数据类型</th>
</tr>
</thead>
<tbody><tr>
<td>tensor([1, 2, 3], dtype&#x3D;torch.int32)</td>
<td>torch.int32</td>
</tr>
</tbody></table>
<blockquote>
<p>torch.from_numpy(data)</p>
</blockquote>
<table>
<thead>
<tr>
<th>数据</th>
<th>数据类型</th>
</tr>
</thead>
<tbody><tr>
<td>tensor([1, 2, 3], dtype&#x3D;torch.int32)</td>
<td>torch.int32</td>
</tr>
</tbody></table>
<h4 id="本质的不同"><a href="#本质的不同" class="headerlink" title="本质的不同"></a>本质的不同</h4><blockquote>
<p>torch.Tensor() 和 torch.tensor()</p>
</blockquote>
<ul>
<li><p><code>torch.Tensor(data)</code></p>
<p> 这是构造函数</p>
</li>
<li><p><code>torch.tensor(data)</code></p>
<ul>
<li><p>这是工厂函数 </p>
<p> You can think of the <code>torch.tensor()</code> function as a factory that builds tensors given some parameter inputs.</p>
</li>
<li><p>相比于 <code>torch.Tensor(data)</code> 更好</p>
<p> the factory function <code>torch.tensor()</code> has better documentation and more configuration options, so it gets the winning spot at the moment.</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>dtype 的对比</p>
</blockquote>
<ul>
<li><p>&#96;&#96;torch.Tensor()&#96;</p>
<p> 使用的是默认类型</p>
<p> <em><u>注意</u></em>: 这个函数中的dtype也而&#x3D;&#x3D;不可以&#x3D;&#x3D;显式的设置, 如: <code>torch.Tensor(data, dtype=torch.int32)</code> ❎ </p>
</li>
<li><p>other(<code>torch.tensor(), torch.as_tensor(), torch.from_numpy()</code>)</p>
<p> 使用的是推断类型(根据传入的原始数据, 自动推断出元素的类型)</p>
<p> <em><u>注意</u></em>: 这些函数中的dtype也而可以显式的设置, 如: <code>torch.tensor(data, dtype=torch.float32)</code></p>
</li>
</ul>
<blockquote>
<p>内存对比: copy vs share</p>
</blockquote>
<p><strong>代码</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">data = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.int32)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;numpy: &quot;</span>, data, <span class="string">&quot;; dtype: &quot;</span>, data.dtype)</span><br><span class="line"></span><br><span class="line"><span class="comment">## create tensor data</span></span><br><span class="line"><span class="comment"># torch.Tensor(data)</span></span><br><span class="line">tensor1 = torch.Tensor(data)</span><br><span class="line"><span class="comment"># torch.tensor(data)</span></span><br><span class="line">tensor2 = torch.tensor(data)</span><br><span class="line"><span class="comment"># torch.as_tensor(data)</span></span><br><span class="line">tensor3 = torch.as_tensor(data)</span><br><span class="line"><span class="comment"># torch.from_numpy(data)</span></span><br><span class="line">tensor4 = torch.from_numpy(data)</span><br><span class="line"></span><br><span class="line"><span class="comment">## show different</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;old: &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\ttensor1: &quot;</span>, tensor1, <span class="string">&quot;; dtype: &quot;</span>, tensor1.dtype)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\ttensor2: &quot;</span>, tensor2, <span class="string">&quot;; dtype: &quot;</span>, tensor2.dtype)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\ttensor3: &quot;</span>, tensor3, <span class="string">&quot;; dtype: &quot;</span>, tensor3.dtype)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\ttensor4: &quot;</span>, tensor4, <span class="string">&quot;; dtype: &quot;</span>, tensor4.dtype)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更改数据</span></span><br><span class="line">data[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;new:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\ttensor1: &quot;</span>, tensor1, <span class="string">&quot;; dtype: &quot;</span>, tensor1.dtype)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\ttensor2: &quot;</span>, tensor2, <span class="string">&quot;; dtype: &quot;</span>, tensor2.dtype)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\ttensor3: &quot;</span>, tensor3, <span class="string">&quot;; dtype: &quot;</span>, tensor3.dtype)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\ttensor4: &quot;</span>, tensor4, <span class="string">&quot;; dtype: &quot;</span>, tensor4.dtype)</span><br></pre></td></tr></table></figure>

<p>out:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">old: </span><br><span class="line">        tensor1:  tensor([<span class="number">1.</span>, <span class="number">2.</span>, <span class="number">3.</span>]) ; dtype:  torch.float32</span><br><span class="line">        tensor2:  tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=torch.int32) ; dtype:  torch.int32</span><br><span class="line">        tensor3:  tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=torch.int32) ; dtype:  torch.int32</span><br><span class="line">        tensor4:  tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=torch.int32) ; dtype:  torch.int32</span><br><span class="line">new:</span><br><span class="line">        tensor1:  tensor([<span class="number">1.</span>, <span class="number">2.</span>, <span class="number">3.</span>]) ; dtype:  torch.float32</span><br><span class="line">        tensor2:  tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=torch.int32) ; dtype:  torch.int32</span><br><span class="line">        tensor3:  tensor([<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=torch.int32) ; dtype:  torch.int32</span><br><span class="line">        tensor4:  tensor([<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=torch.int32) ; dtype:  torch.int32</span><br></pre></td></tr></table></figure>



<p><strong>总结</strong></p>
<table>
<thead>
<tr>
<th align="center">Share Data</th>
<th align="center">Copy Data</th>
</tr>
</thead>
<tbody><tr>
<td align="center">torch.as_tensor()</td>
<td align="center">torch.tensor()</td>
</tr>
<tr>
<td align="center">torch.from_numpy()</td>
<td align="center">torch.Tensor()</td>
</tr>
</tbody></table>
<ul>
<li>This <em><u>sharing</u></em> just means that the actual data in memory exists in a single place</li>
<li>Sharing data is <em><u>more efficient</u></em> and uses less memory than copying data because the data is not written to two locations in memory.</li>
</ul>
<p><strong>torch.as_tensor() 和 torch.from_numpy() 的选择</strong></p>
<ul>
<li>The <code>torch.from_numpy()</code> function only accepts <code>numpy.ndarray</code>s</li>
<li>the <code>torch.as_tensor()</code> function accepts a wide variety of <code>array-like objects</code> including other PyTorch tensors</li>
</ul>
<h3 id="张量操作"><a href="#张量操作" class="headerlink" title="张量操作"></a>张量操作</h3><h4 id="拼接"><a href="#拼接" class="headerlink" title="拼接"></a>拼接</h4><blockquote>
<p>torch.cat()</p>
</blockquote>
<p>将张量按照 dim 维度进行拼接</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.cat(tensors, dim=<span class="number">0</span>, out=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>tensors: 张量序列</li>
<li>dim: 要拼接的维度</li>
</ul>
<blockquote>
<p>torch.stack()</p>
</blockquote>
<p>将张量在新创建的 dim 维度上进行拼接</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.stack(tensors, dim=<span class="number">0</span>, out=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>tensors: 张量序列</li>
<li>dim: 要拼接的维度</li>
</ul>
<p><strong>意义</strong></p>
<p>使用<code>stack</code>可以保留两个信息：[1. 序列] 和 [2. 张量矩阵] 信息，属于【&#x3D;&#x3D;扩张&#x3D;&#x3D;再拼接】的函数</p>
<p><strong>例子</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 假设是时间步T1</span></span><br><span class="line"> T1 = torch.tensor([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                 [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">                 [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"> <span class="comment"># 假设是时间步T2</span></span><br><span class="line"> T2 = torch.tensor([[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>],</span><br><span class="line">                 [<span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>],</span><br><span class="line">                 [<span class="number">70</span>, <span class="number">80</span>, <span class="number">90</span>]])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(torch.stack((T1,T2),dim=<span class="number">0</span>).shape)</span><br><span class="line"><span class="built_in">print</span>(torch.stack((T1,T2),dim=<span class="number">1</span>).shape)</span><br><span class="line"><span class="built_in">print</span>(torch.stack((T1,T2),dim=<span class="number">2</span>).shape)</span><br><span class="line"><span class="built_in">print</span>(torch.stack((T1,T2),dim=<span class="number">3</span>).shape)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#################### outputs: ############# </span></span><br><span class="line">torch.Size([<span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>])</span><br><span class="line">torch.Size([<span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">torch.Size([<span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>])</span><br><span class="line"><span class="string">&#x27;选择的dim&gt;len(outputs)，所以报错&#x27;</span></span><br></pre></td></tr></table></figure>



<h4 id="切分"><a href="#切分" class="headerlink" title="切分"></a>切分</h4><blockquote>
<p>torch.chunk()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.chunk(<span class="built_in">input</span>, chunks, dim=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>功能：将张量按照维度 dim 进行平均切分。若不能整除，则最后一份张量小于其他张量。</p>
<ul>
<li>input: 要切分的张量</li>
<li>chunks: 要切分的份数</li>
<li>dim: 要切分的维度</li>
</ul>
<blockquote>
<p>torch.split()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.split(tensor, split_size_or_sections, dim=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>功能：将张量按照维度 dim 进行平均切分。可以指定每一个分量的切分长度。</p>
<ul>
<li>tensor: 要切分的张量</li>
<li>split_size_or_sections:<ul>
<li>为 int 时，表示每一份的长度，如果不能被整除，则最后一份张量小于其他张量；</li>
<li>为 list 时，按照 list 元素作为每一个分量的长度切分。如果 list 元素之和不等于切分维度 (dim) 的值，就会报错。</li>
</ul>
</li>
<li>dim: 要切分的维度</li>
</ul>
<h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><blockquote>
<p>torch.index_select()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.index_select(<span class="built_in">input</span>, dim, index, out=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>功能：在维度 dim 上，按照 index 索引取出数据拼接为张量返回。</p>
<ul>
<li>input: 要索引的张量</li>
<li>dim: 要索引的维度</li>
<li>index: 要索引数据的序号</li>
</ul>
<blockquote>
<p>torch.mask_select()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.masked_select(<span class="built_in">input</span>, mask, out=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>功能：按照 mask 中的 True 进行索引拼接得到一维张量返回。</p>
<ul>
<li>要索引的张量</li>
<li>mask: 与 input 同形状的布尔类型张量</li>
</ul>
<blockquote>
<p>t.le() t.ge()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t.le(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>



<h4 id="变换"><a href="#变换" class="headerlink" title="变换"></a>变换</h4><blockquote>
<p>torch.reshape()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.reshape(<span class="built_in">input</span>, shape)</span><br></pre></td></tr></table></figure>

<p>功能：变换张量的形状。当张量在内存中是连续时，返回的张量和原来的张量共享数据内存，改变一个变量时，另一个变量也会被改变。</p>
<ul>
<li>input: 要变换的张量</li>
<li>shape: 新张量的形状<ul>
<li><code>-1</code> 表示这个维度是根据其他维度计算得出的</li>
</ul>
</li>
</ul>
<blockquote>
<p>torch.transpose()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.transpose(<span class="built_in">input</span>, dim0, dim1)</span><br></pre></td></tr></table></figure>

<p>功能：交换张量的两个维度。常用于图像的变换，比如把 $c<em>h</em>w$ 变换为 $h<em>w</em>c$。</p>
<ul>
<li>input: 要交换的变量</li>
<li>dim0: 要交换的第一个维度</li>
<li>dim1: 要交换的第二个维度</li>
</ul>
<blockquote>
<p>torch.t()</p>
</blockquote>
<p>功能：2 维张量转置，对于 2 维矩阵而言，等价于<code>torch.transpose(input, 0, 1)</code>。</p>
<blockquote>
<p>torch.squeeze()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.squeeze(<span class="built_in">input</span>, dim=<span class="literal">None</span>, out=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>功能：压缩长度为 1 的维度。</p>
<ul>
<li>dim: 若为 None，则移除所有长度为 1 的维度；若指定维度，则&#x3D;&#x3D;当且仅当该维度长度为 1 时可以移除&#x3D;&#x3D;。</li>
</ul>
<blockquote>
<p>torch.unsqueeze()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.unsqueeze(<span class="built_in">input</span>, dim)</span><br></pre></td></tr></table></figure>

<p>功能：根据 dim 扩展维度，长度为 1。</p>
<h4 id="数学运算"><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h4><blockquote>
<p>torch.add()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.add(<span class="built_in">input</span>, other, out=<span class="literal">None</span>)</span><br><span class="line">torch.add(<span class="built_in">input</span>, other, *, alpha=<span class="number">1</span>, out=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>功能：逐元素计算 input + alpha * other。因为在深度学习中经常用到先乘后加的操作。</p>
<ul>
<li>input: 第一个张量</li>
<li>alpha: 乘项因子</li>
<li>other: 第二个张量</li>
</ul>
<blockquote>
<p>torch.addcdiv()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.addcdiv(<span class="built_in">input</span>, tensor1, tensor2, *, value=<span class="number">1</span>, out=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>计算公式: $out_i &#x3D; input_i + value \times \frac{tensor1_i}{tensor2_i}$</p>
<blockquote>
<p>torch.addcmul()</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.addcmul(<span class="built_in">input</span>, tensor1, tensor2, *, value=<span class="number">1</span>, out=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>计算公式: $out_i &#x3D; input_i + value \times tensor1_i \times tensor2_i$</p>
<h3 id="bridge-with-Numpy"><a href="#bridge-with-Numpy" class="headerlink" title="bridge with Numpy"></a>bridge with Numpy</h3><blockquote>
<p>Tensor to numpy array</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tensor.numpy()</span><br></pre></td></tr></table></figure>



<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p><a target="_blank" rel="noopener" href="https://pytorch.org/docs/stable/torch.html">见这里</a></p>
<h3 id="获取torch默认类型函数"><a href="#获取torch默认类型函数" class="headerlink" title="获取torch默认类型函数"></a>获取torch默认类型函数</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.get_default_dtype()</span><br></pre></td></tr></table></figure>



<h3 id="suffix-“-”"><a href="#suffix-“-”" class="headerlink" title="suffix “_”"></a>suffix “_”</h3><p>在函数的后面加上后缀 <code>_</code>, 将会改变作用的数据</p>
<blockquote>
<p>示例</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># source tensor</span></span><br><span class="line">tensor = torch.eye(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(tensor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># tensor after using add()</span></span><br><span class="line">tensor.add(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(tensor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># tensor after using add_()</span></span><br><span class="line">tensor.add_(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(tensor)</span><br></pre></td></tr></table></figure>

<p><strong>out</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">tensor([[<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>]])</span><br><span class="line">tensor([[<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>]])</span><br><span class="line">tensor([[<span class="number">6.</span>, <span class="number">5.</span>, <span class="number">5.</span>, <span class="number">5.</span>, <span class="number">5.</span>],</span><br><span class="line">        [<span class="number">5.</span>, <span class="number">6.</span>, <span class="number">5.</span>, <span class="number">5.</span>, <span class="number">5.</span>],</span><br><span class="line">        [<span class="number">5.</span>, <span class="number">5.</span>, <span class="number">6.</span>, <span class="number">5.</span>, <span class="number">5.</span>],</span><br><span class="line">        [<span class="number">5.</span>, <span class="number">5.</span>, <span class="number">5.</span>, <span class="number">6.</span>, <span class="number">5.</span>],</span><br><span class="line">        [<span class="number">5.</span>, <span class="number">5.</span>, <span class="number">5.</span>, <span class="number">5.</span>, <span class="number">6.</span>]])</span><br></pre></td></tr></table></figure>



<h2 id="自动求导-autograd"><a href="#自动求导-autograd" class="headerlink" title="自动求导(autograd)"></a>自动求导(autograd)</h2><p>只要搭建好前向计算图,利用 <code>torch.autograd</code> 自动求导得到所有张量的梯度</p>
<h3 id="torch-autograd-backward"><a href="#torch-autograd-backward" class="headerlink" title="torch.autograd.backward()"></a>torch.autograd.backward()</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.autograd.backward(tensors, grad_tensors=<span class="literal">None</span>, retain_graph=<span class="literal">None</span>, create_graph=<span class="literal">False</span>, grad_variables=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>功能</p>
</blockquote>
<ul>
<li>自动求取梯度</li>
</ul>
<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li><p><code>tensors</code>: 用于求导的张量，如 loss</p>
</li>
<li><p><code>retain_graph</code>: 保存计算图。PyTorch 采用动态图机制，默认每次反向传播之后都会释放计算图。这里设置为 True 可以不释放计算图。</p>
<p> <code>y.backward()</code> 方法调用的是 <code>torch.autograd.backward(self, gradient, retain_graph, create_graph)</code>。但是在第二次执行 <code>y.backward()</code> 时会出错。因为 PyTorch 默认是每次求取梯度之后不保存计算图的，因此第二次求导梯度时，计算图已经不存在了。在第一次求梯度时使用 <code>y.backward(retain_graph=True)</code> 即可。</p>
</li>
<li><p><code>create_graph</code>: 创建导数计算图，用于高阶求导</p>
</li>
<li><p><code>grad_tensors</code>: 多梯度权重。当有多个 loss 混合需要计算梯度时，设置每个 loss 的权重。</p>
</li>
</ul>
<p><strong>retain_grad 参数</strong></p>
<p>反向传播结束之后仍然需要保留非叶子节点的梯度</p>
<p><strong>grad_tensors 参数</strong> </p>
<p>给 loss 设置权重</p>
<h3 id="torch-autograd-grad"><a href="#torch-autograd-grad" class="headerlink" title="torch.autograd.grad()"></a>torch.autograd.grad()</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.autograd.grad(outputs, inputs, grad_outputs=<span class="literal">None</span>, retain_graph=<span class="literal">None</span>, create_graph=<span class="literal">False</span>, only_inputs=<span class="literal">True</span>, allow_unused=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>功能</p>
</blockquote>
<p>求取梯度</p>
<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>outputs: 用于求导的张量，如 loss</li>
<li>inputs: 需要梯度的张量</li>
<li>create_graph: 创建导数计算图，用于高阶求导</li>
<li>retain_graph:保存计算图</li>
<li>grad_outputs: 多梯度权重计算</li>
</ul>
<blockquote>
<p>返回值</p>
</blockquote>
<p>返回结果是一个 <code>tunple</code>，需要取出第 0 个元素才是真正的梯度。</p>
<blockquote>
<p>注意点</p>
</blockquote>
<ul>
<li><p>在每次反向传播求导时，计算的梯度不会自动清零。如果进行多次迭代计算梯度而没有清零，那么梯度会在前一次的基础上叠加。</p>
<p> 故使用 <code>w.grad.zero()</code> 将梯度清零</p>
</li>
<li><p>依赖与叶子节点的节点, <code>requires_grad</code> 属性默认为 <code>True</code></p>
</li>
<li><p>叶子节点不可以执行 <code>inplace</code> 操作</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## inplace 操作: 改变后的值和原来的值内存地址是同一个</span></span><br><span class="line">a += x</span><br><span class="line">a.add_(x)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 非inplace 操作: 改变后的值和原来的值内存地址不是同一个</span></span><br><span class="line">a = a + x</span><br><span class="line">a.add(x)</span><br></pre></td></tr></table></figure>

<p> <em>举例</em></p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;非 inplace 操作&quot;</span>)</span><br><span class="line">a = torch.ones((<span class="number">1</span>, ))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a), a)</span><br><span class="line"><span class="comment"># 非 inplace 操作，内存地址不一样</span></span><br><span class="line">a = a + torch.ones((<span class="number">1</span>, ))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a), a)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;inplace 操作&quot;</span>)</span><br><span class="line">a = torch.ones((<span class="number">1</span>, ))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a), a)</span><br><span class="line"><span class="comment"># inplace 操作，内存地址一样</span></span><br><span class="line">a += torch.ones((<span class="number">1</span>, ))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a), a)</span><br></pre></td></tr></table></figure>

<p> 结果自己跑一下嘛</p>
<p> <em>问题</em></p>
<p> 如果在反向传播之前 <code>inplace</code> 改变了叶子的值, 再执行 <code>backward()</code> 会报错</p>
</li>
</ul>
<h2 id="逻辑回归"><a href="#逻辑回归" class="headerlink" title="逻辑回归"></a>逻辑回归</h2><h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3><p>二分类模型</p>
<p>模型表达式 $y&#x3D;f(z)&#x3D;\frac{1}{1+e^{-z}}$，其中 $z&#x3D;WX+b$。$f(z)$ 称为 sigmoid 函数，也被称为 Logistic 函数</p>
<h3 id="分类原则"><a href="#分类原则" class="headerlink" title="分类原则"></a>分类原则</h3><p>逻辑回归是在线性回归的基础上加入了一个 sigmoid 函数，这是为了更好地描述置信度，把输入映射到 (0,1) 区间中，符合概率取值。</p>
<h3 id="训练步骤"><a href="#训练步骤" class="headerlink" title="训练步骤"></a>训练步骤</h3><ol>
<li><p>导入模型</p>
</li>
<li><p>计算误差 loss</p>
</li>
<li><p>后向传播 (call <code>loss.backward()</code>)</p>
</li>
<li><p>加载优化器 optimizer: 注册模型中的所有参数</p>
</li>
<li><p>梯度下降 (call <code>optim.step()</code>)</p>
<p>各参数的梯度保存在 <code>.grad</code> 属性中</p>
</li>
</ol>
<h2 id="反向传播"><a href="#反向传播" class="headerlink" title="反向传播"></a>反向传播</h2><p>To backpropagate the error all we have to do is to <code>loss.backward()</code>. You need to clear the existing gradients though, &#x3D;&#x3D;else gradients will be accumulated to existing gradients.&#x3D;&#x3D;</p>
<h2 id="模型构建总结"><a href="#模型构建总结" class="headerlink" title="模型构建总结"></a>模型构建总结</h2><h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li>加载数据</li>
<li>定义神经网络</li>
<li>定义损失函数</li>
<li>训练网络</li>
<li>测试网络</li>
</ol>
<h3 id="PyTorch-构建模型需要-5-大步骤："><a href="#PyTorch-构建模型需要-5-大步骤：" class="headerlink" title="PyTorch 构建模型需要 5 大步骤："></a>PyTorch 构建模型需要 5 大步骤：</h3><ul>
<li>数据：包括数据读取，数据清洗，进行数据划分和数据预处理，比如读取图片如何预处理及数据增强。</li>
<li>模型：包括构建模型模块，组织复杂网络，初始化网络参数，定义网络层。</li>
<li>损失函数：包括创建损失函数，设置损失函数超参数，根据不同任务选择合适的损失函数。</li>
<li>优化器：包括根据梯度使用某种优化器更新参数，管理模型参数，管理多个参数组实现不同学习率，调整学习率。</li>
<li>迭代训练：组织上面 4 个模块进行反复训练。包括观察训练效果，绘制 Loss&#x2F; Accuracy 曲线，用 TensorBoard 进行可视化分析。</li>
</ul>
<h1 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h1><h2 id="数据模块"><a href="#数据模块" class="headerlink" title="数据模块"></a>数据模块</h2><h3 id="细分"><a href="#细分" class="headerlink" title="细分"></a>细分</h3><ul>
<li>数据收集: 样本和标签</li>
<li>数据划分: 训练集, 验证集和测试集</li>
<li>数据读取：对应于PyTorch 的 DataLoader。其中 DataLoader 包括 Sampler 和 DataSet。Sampler 的功能是生成索引， DataSet 是根据生成的索引读取样本以及标签。</li>
<li>数据预处理：对应于 PyTorch 的 transforms</li>
</ul>
<h3 id="考虑"><a href="#考虑" class="headerlink" title="考虑"></a>考虑</h3><ul>
<li>Who created the dataset?</li>
<li>How was the dataset created?</li>
<li>What transformations were used?</li>
<li>What intent does the dataset have?</li>
<li>Possible unintentional consequences?</li>
<li>Is the dataset biased?</li>
<li>Are there ethical issues with the dataset?</li>
</ul>
<h2 id="DataLoader"><a href="#DataLoader" class="headerlink" title="DataLoader"></a>DataLoader</h2><h3 id="torch-utils-data-DataLoader"><a href="#torch-utils-data-DataLoader" class="headerlink" title="torch.utils.data.DataLoader()"></a>torch.utils.data.DataLoader()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.utils.data.DataLoader(dataset, batch_size=<span class="number">1</span>, shuffle=<span class="literal">False</span>, sampler=<span class="literal">None</span>, batch_sampler=<span class="literal">None</span>, num_workers=<span class="number">0</span>, collate_fn=<span class="literal">None</span>, pin_memory=<span class="literal">False</span>, drop_last=<span class="literal">False</span>, timeout=<span class="number">0</span>, worker_init_fn=<span class="literal">None</span>, multiprocessing_context=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>功能</p>
</blockquote>
<p>构建可迭代的装载器</p>
<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>dataset: Dataset 类，决定数据从哪里读取以及如何读取</li>
<li>batchsize: 批大小</li>
<li>num_works: 是否多进程读取数据</li>
<li>sheuffle: 每个 epoch 是否乱序</li>
<li>drop_last: 当样本数不能被 batchsize 整除时，是否舍弃最后一批数据</li>
</ul>
<p><strong>Epoch, I’t’eration, Batchsize</strong></p>
<ul>
<li>Epoch: &#x3D;&#x3D;所有训练样本&#x3D;&#x3D;都已经输入到模型中，称为一个 Epoch</li>
<li>Iteration: &#x3D;&#x3D;一批样本&#x3D;&#x3D;输入到模型中，称为一个 Iteration</li>
<li>Batchsize: &#x3D;&#x3D;批大小&#x3D;&#x3D;，决定一个 iteration 有多少样本，也决定了一个 Epoch 有多少个 Iteration</li>
</ul>
<p><em>举例</em>: 假设样本总数有 80，设置 Batchsize 为 8，则共有 $80 \div 8&#x3D;10$ 个 Iteration。这里 $1 Epoch &#x3D; 10 Iteration$。</p>
<h3 id="torch-utils-data-Dataset"><a href="#torch-utils-data-Dataset" class="headerlink" title="torch.utils.data.Dataset"></a>torch.utils.data.Dataset</h3><blockquote>
<p>功能</p>
</blockquote>
<p><code>Dataset</code> 是抽象类，所有自定义的 <code>Dataset</code> 都需要继承该类，并且重写<code>__getitem()__</code>方法和<code>__len__()</code>方法</p>
<ul>
<li><code>__getitem()__</code>方法的作用是接收一个索引，返回索引对应的样本和标签，这是我们自己需要实现的逻辑</li>
<li><code>__len__()</code>方法是返回所有样本的数量</li>
</ul>
<blockquote>
<p>数据读取</p>
</blockquote>
<ul>
<li>读取哪些数据：每个 Iteration 读取一个 Batchsize 大小的数据，每个 Iteration 应该读取哪些数据。</li>
<li>从哪里读取数据：如何找到硬盘中的数据，应该在哪里设置文件路径参数</li>
<li>如何读取数据：不同的文件需要使用不同的读取方法和库。</li>
</ul>
<blockquote>
<p>步骤</p>
</blockquote>
<ol>
<li>划分数据集为: 训练集, 验证集和测试集, 比例为 $8 : 1 : 1$, 并构造路径</li>
<li>实现 <code>get_img_info()</code> 和 <code>__getitem__(self, index)</code>, <code>__len__()</code> 函数</li>
<li>构建模型</li>
</ol>
<h2 id="DataSet"><a href="#DataSet" class="headerlink" title="DataSet"></a>DataSet</h2><h2 id="MNIST-数据集"><a href="#MNIST-数据集" class="headerlink" title="MNIST 数据集"></a>MNIST 数据集</h2><h1 id="损失函数"><a href="#损失函数" class="headerlink" title="损失函数"></a>损失函数</h1><h2 id="均方误差-MSE"><a href="#均方误差-MSE" class="headerlink" title="均方误差 MSE"></a>均方误差 MSE</h2><p>$MSE &#x3D; \frac{1}{m}\sum_{i &#x3D; 1}^{m}{(y_i-\hat{y_i})^2}$ </p>
<ul>
<li>$y_i$ 是预测值</li>
<li>$\hat{y_i}$ 是真实值</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2023/05/05/143/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/05/143/" class="post-title-link" itemprop="url">143. opencv</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-05 13:00:00" itemprop="dateCreated datePublished" datetime="2023-05-05T13:00:00+08:00">2023-05-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/opencv/" itemprop="url" rel="index"><span itemprop="name">opencv</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="http://www.juzicode.com/opencvpythontutorial/">学习链接</a></p>
<h1 id="常用变量"><a href="#常用变量" class="headerlink" title="常用变量"></a>常用变量</h1><h2 id="img"><a href="#img" class="headerlink" title="img"></a>img</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(filename)</span><br></pre></td></tr></table></figure>



<h1 id="图片相关"><a href="#图片相关" class="headerlink" title="图片相关"></a>图片相关</h1><h2 id="读图：imread"><a href="#读图：imread" class="headerlink" title="读图：imread"></a>读图：imread</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imread(&lt;文件名&gt;, flag)</span><br></pre></td></tr></table></figure>

<h3 id="imread-第二个参数-flag"><a href="#imread-第二个参数-flag" class="headerlink" title="imread 第二个参数: flag"></a>imread 第二个参数: flag</h3><table>
<thead>
<tr>
<th>imread 第二个参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>cv2.IMREAD_COLOR</td>
<td>缺省方式，读取图像为 BGR 8-bit 格式.</td>
</tr>
<tr>
<td>cv2.IMREAD_UNCHANGED</td>
<td>图像格式不做任何改变，可用在读取带 alpha 通道的图片</td>
</tr>
<tr>
<td>cv2.IMREAD_GRAYSCALE</td>
<td>读取图像为转换为灰度图</td>
</tr>
</tbody></table>
<h2 id="显示图：imshow"><a href="#显示图：imshow" class="headerlink" title="显示图：imshow"></a>显示图：imshow</h2><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imshow(&lt;窗口名称&gt;, &lt; 图像实例 &gt;)</span><br></pre></td></tr></table></figure>



<h2 id="waitkey"><a href="#waitkey" class="headerlink" title="waitkey"></a>waitkey</h2><p>waitKey() 传入的参数如果为 0，会无限等待直到任何按键按下，或者传入其他数值参数表示等待时长，单位为 ms，时长结束后显示图像窗口会关闭。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>无限等待直到任何按键按下</td>
</tr>
<tr>
<td>传入其他数值参数</td>
<td>表示等待时长 (单位: ms)，时长结束后显示图像窗口会关闭。</td>
</tr>
</tbody></table>
<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p><strong>返回</strong>: 键入的值</p>
<p><strong>使用</strong>: 检查按键，键入 <code>q or Q</code>  退出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">key = waitKey(<span class="number">20</span>) &amp; <span class="number">0xff</span></span><br><span class="line"><span class="keyword">if</span> (key == <span class="built_in">ord</span>(<span class="string">&#x27;q&#x27;</span>) <span class="keyword">or</span> key == <span class="built_in">ord</span>(<span class="string">&#x27;Q&#x27;</span>)):</span><br><span class="line">    <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<p>waityKey() 返回的数值和 0xff 相与后再和字符的 ord() 值比较，是为了规避某些系统中 waitKey() 返回的数值在高字节为非 0 值的情况。</p>
<h2 id="调整窗口"><a href="#调整窗口" class="headerlink" title="调整窗口"></a>调整窗口</h2><p>使用 imshow() 方法显示图像时，默认是以图像的像素大小显示的，可以通过 <strong>nameWindow(窗口名称, cv2.WINDOW_NORMAL)<strong>命名窗口，再使用</strong>resizeWindow(窗口名称, 窗口宽度, 窗口高度)</strong> 缩放窗口，最后使用 imshow() 显示图像，注意三者都 * 在同一个窗口名称上 * 操作。</p>
<h2 id="销毁窗口"><a href="#销毁窗口" class="headerlink" title="销毁窗口"></a>销毁窗口</h2><ul>
<li><code>destroyWindow(窗口名称)</code>: 单独关闭某个显示窗口</li>
<li><code>destroyAllWindows()</code>: 关闭所有显示窗口。</li>
</ul>
<h2 id="写入图片-imwrite"><a href="#写入图片-imwrite" class="headerlink" title="写入图片: imwrite"></a>写入图片: imwrite</h2><h3 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imwrite(&lt;写入的文件名称&gt;, &lt; 图像实例 &gt;)</span><br></pre></td></tr></table></figure>

<p>注：文件名称的后缀决定了图片文件的格式</p>
<h1 id="视频相关"><a href="#视频相关" class="headerlink" title="视频相关"></a>视频相关</h1><h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><table>
<thead>
<tr>
<th>方法</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>cap = cv2.VideoCapture(‘文件名称’)</code></td>
<td>构建视频文件的 cap 实例</td>
</tr>
<tr>
<td><code>cap.read()</code></td>
<td>逐帧提取视频，每一帧为一幅图像 &lt; br &#x2F;&gt; 方法返回的是一个二元组：<br />    下标 0 的元素值为 True 或 False 如果为 Flase 表示读取文件完成。<br />    下标 1 的元素为图像对象，也是一个 numpy 数组类型的数据。</td>
</tr>
<tr>
<td><code>cap.isOpened()</code></td>
<td>检查 cap 实例是否已经打开</td>
</tr>
<tr>
<td><code>cap.release()</code></td>
<td>释放实例</td>
</tr>
</tbody></table>
<h2 id="从视频文件获取图像"><a href="#从视频文件获取图像" class="headerlink" title="从视频文件获取图像"></a>从视频文件获取图像</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">cap = cv2.VideoCapture(<span class="string">&#x27;..\\vtest.avi&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> cap.isOpened():</span><br><span class="line">    ret, img = cap.read()</span><br><span class="line">    <span class="keyword">if</span> ret <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;读取完成，退出&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment">#处理 img</span></span><br><span class="line">    cv2.imshow(<span class="string">&#x27;vedio&#x27;</span>, img)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#检查按键</span></span><br><span class="line">    key = cv2.waitKey(<span class="number">20</span>) &amp; <span class="number">0xff</span></span><br><span class="line">    <span class="keyword">if</span>  key == <span class="built_in">ord</span>(<span class="string">&#x27;q&#x27;</span>) <span class="keyword">or</span> key == <span class="built_in">ord</span>(<span class="string">&#x27;Q&#x27;</span>) :</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;cap.isOpened():&#x27;</span>,cap.isOpened())</span><br><span class="line">cap.release()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;cap.isOpened():&#x27;</span>,cap.isOpened())</span><br></pre></td></tr></table></figure>

<h2 id="从相机获取图像"><a href="#从相机获取图像" class="headerlink" title="从相机获取图像"></a>从相机获取图像</h2><p>打开相机需要用相机的设备编号（数值型整数）作为入参传入 <code>VideoCapture(相机编号)</code>，比如 <code>cap = cv2.VideoCapture(0)</code> 构建编号为 0 的相机访问实例，第 2 台相机则传入 1，以此类推，后续步骤的处理方法和读取视频文件一样。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">cap = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> cap.isOpened():</span><br><span class="line">    ret, img = cap.read()</span><br><span class="line">    <span class="keyword">if</span> ret <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;读取失败，退出&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment">#处理 img</span></span><br><span class="line">    cv2.imshow(<span class="string">&#x27;vedio&#x27;</span>, img)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#检查按键</span></span><br><span class="line">    key = cv2.waitKey(<span class="number">20</span>) &amp; <span class="number">0xff</span></span><br><span class="line">    <span class="keyword">if</span>  key == <span class="built_in">ord</span>(<span class="string">&#x27;q&#x27;</span>) <span class="keyword">or</span> key == <span class="built_in">ord</span>(<span class="string">&#x27;Q&#x27;</span>) :</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;cap.isOpened():&#x27;</span>,cap.isOpened())</span><br><span class="line">cap.release()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;cap.isOpened():&#x27;</span>,cap.isOpened())</span><br></pre></td></tr></table></figure>

<h2 id="写入视频文件"><a href="#写入视频文件" class="headerlink" title="写入视频文件"></a>写入视频文件</h2><h3 id="VideoWriter-对象"><a href="#VideoWriter-对象" class="headerlink" title="VideoWriter 对象"></a><code>VideoWriter</code> 对象</h3><p><strong>参数</strong></p>
<ol>
<li>文件名称</li>
<li>编码方式，其中编码方式和文件名称后缀有对应关系</li>
<li>每秒写入的帧数，参考数值为 25，符合人眼习惯</li>
<li>图像大小，int 类型</li>
</ol>
<h3 id="常用的文件名称后缀和编码方式"><a href="#常用的文件名称后缀和编码方式" class="headerlink" title="常用的文件名称后缀和编码方式"></a>常用的文件名称后缀和编码方式</h3><table>
<thead>
<tr>
<th>文件后缀</th>
<th>编码方式</th>
</tr>
</thead>
<tbody><tr>
<td>avi</td>
<td>XVID</td>
</tr>
<tr>
<td>avi</td>
<td>MJPG</td>
</tr>
<tr>
<td>avi</td>
<td>mp4v（小写）</td>
</tr>
<tr>
<td>mp4</td>
<td>mp4v（小写）</td>
</tr>
</tbody></table>
<p><strong>使用</strong>：创建 <code>VideoWriter_fourcc</code> 对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法 1</span></span><br><span class="line">fourcc=cv2.VideoWriter_fourcc(<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;J&#x27;</span>,<span class="string">&#x27;P&#x27;</span>,<span class="string">&#x27;G&#x27;</span>)</span><br><span class="line"><span class="comment"># 方法 2</span></span><br><span class="line">fourcc=cv2.VideoWriter_fourcc(*<span class="string">&#x27;MJPG&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="图像大小获取"><a href="#图像大小获取" class="headerlink" title="图像大小获取"></a>图像大小获取</h3><p><code>cat.get(propId)</code> 方法获取，但是该方法获取的是 float 类型，需要转换为 int 类型再传入 <strong>VideoWriter</strong>。</p>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取图像宽高</span></span><br><span class="line">cap = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line">width = cap.get(cv2.CAP_PROP_FRAME_WIDTH)</span><br><span class="line">height = cap.get(cv2.CAP_PROP_FRAME_HEIGHT)</span><br><span class="line"><span class="comment"># 转为 int 型</span></span><br><span class="line">width = <span class="built_in">int</span>(width)</span><br><span class="line">height = <span class="built_in">int</span>(height)</span><br><span class="line"><span class="built_in">print</span>(width,height)</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建 VideoWriter 对象</span></span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(*<span class="string">&#x27;XVID&#x27;</span>)</span><br><span class="line">out = cv2.VideoWriter(<span class="string">&#x27;output.avi&#x27;</span>, fourcc, <span class="number">25.0</span>, (width,  height))</span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(*<span class="string">&#x27;MJPG&#x27;</span>)</span><br><span class="line">out2 = cv2.VideoWriter(<span class="string">&#x27;output2.avi&#x27;</span>, fourcc, <span class="number">25.0</span>, (width,  height))</span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(*<span class="string">&#x27;mp4v&#x27;</span>)</span><br><span class="line">out3 = cv2.VideoWriter(<span class="string">&#x27;output3.mp4&#x27;</span>, fourcc, <span class="number">25.0</span>, (width,  height))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> cap.isOpened():</span><br><span class="line">    ret, img = cap.read()</span><br><span class="line">    <span class="built_in">print</span>(img.shape)</span><br><span class="line">    <span class="keyword">if</span> ret <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;读取失败，退出&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#处理 img</span></span><br><span class="line">    cv2.imshow(<span class="string">&#x27;vedio&#x27;</span>, img)</span><br><span class="line">    out.write(img)</span><br><span class="line">    out2.write(img)</span><br><span class="line">    out3.write(img)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#检查按键</span></span><br><span class="line">    key = cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xff</span></span><br><span class="line">    <span class="keyword">if</span>  key == <span class="built_in">ord</span>(<span class="string">&#x27;q&#x27;</span>) <span class="keyword">or</span> key == <span class="built_in">ord</span>(<span class="string">&#x27;Q&#x27;</span>) :</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">cap.release()</span><br><span class="line">out.release()</span><br><span class="line">out2.release()</span><br><span class="line">out3.release()</span><br></pre></td></tr></table></figure>



<h1 id="输出文字"><a href="#输出文字" class="headerlink" title="输出文字"></a>输出文字</h1><h2 id="乱码问题-（还是不要用中文吧）"><a href="#乱码问题-（还是不要用中文吧）" class="headerlink" title="乱码问题 （还是不要用中文吧）"></a>乱码问题 （还是不要用中文吧）</h2><p>**1、指定已有字体 **</p>
<p>查看字体</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fontList = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">dir</span>(cv2) <span class="keyword">if</span> (i.startswith(<span class="string">&quot;FONT&quot;</span>))]</span><br></pre></td></tr></table></figure>

<p><strong>2、使用 pillow</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image,ImageDraw,ImageFont</span><br><span class="line"></span><br><span class="line"><span class="comment"># 白色背景</span></span><br><span class="line">img = np.full((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>),<span class="number">255</span>,np.uint8)</span><br><span class="line">img_pil = Image.fromarray(cv2.cvtColor(img,cv2.COLOR_BGR2RGB))</span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;VX: 桔子 code&#x27;</span></span><br><span class="line"><span class="comment"># 起始位置</span></span><br><span class="line">start = (<span class="number">10</span>,<span class="number">200</span>)</span><br><span class="line"><span class="comment"># 微软雅黑字体，和具体操作系统相关</span></span><br><span class="line">fonttype = <span class="string">&#x27;msyh.ttc&#x27;</span></span><br><span class="line"><span class="comment"># 字体大小</span></span><br><span class="line">fontscale = <span class="number">30</span></span><br><span class="line">font = ImageFont.truetype(fonttype,fontscale)</span><br><span class="line">draw = ImageDraw.Draw(img_pil)</span><br><span class="line"><span class="comment">#PIL 中 BGR=(255,0,0) 表示红色</span></span><br><span class="line">draw.text(start,text,font=font,fill=(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>))</span><br><span class="line"><span class="comment">#PIL 图片转换为 numpy</span></span><br><span class="line">img_ocv = np.array(img_pil)</span><br><span class="line"><span class="comment">#PIL 格式转换为 OpenCV 的 BGR 格式</span></span><br><span class="line">img = cv2.cvtColor(img_ocv,cv2.COLOR_RGB2BGR)</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">&#x27;juzicode.com&#x27;</span>,img)</span><br><span class="line">cv2.waitKey()</span><br></pre></td></tr></table></figure>



<h1 id="图像属性"><a href="#图像属性" class="headerlink" title="图像属性"></a>图像属性</h1><h2 id="shape-属性"><a href="#shape-属性" class="headerlink" title="shape 属性"></a>shape 属性</h2><h3 id="行列数"><a href="#行列数" class="headerlink" title="行列数"></a>行列数</h3><ul>
<li>行对应 <code>img.shape[0]</code></li>
<li>列对应 <code>img.shape[1]</code></li>
</ul>
<h3 id="通道数"><a href="#通道数" class="headerlink" title="通道数"></a>通道数</h3><ul>
<li>必须是非灰度图才有通道数 *，对应 <code>img.shape[2]</code></li>
</ul>
<h2 id="其他属性"><a href="#其他属性" class="headerlink" title="其他属性"></a>其他属性</h2><table>
<thead>
<tr>
<th>属性</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>ndim</td>
<td>维度 &lt;&#x3D;&gt; <code>len(img.shape)</code></td>
</tr>
<tr>
<td>itemsize</td>
<td>单个数据长度</td>
</tr>
<tr>
<td>size</td>
<td>总长度：有多少个数据</td>
</tr>
<tr>
<td>nbytes</td>
<td>占用的内存空间 &#x3D; $itemsize \times size$</td>
</tr>
<tr>
<td>shape</td>
<td>形状 (type: tuple)</td>
</tr>
<tr>
<td>data</td>
<td>数据 buffer</td>
</tr>
</tbody></table>
<h2 id="dtype-属性"><a href="#dtype-属性" class="headerlink" title="dtype 属性"></a>dtype 属性</h2><p>可以通过 <code>img.astype(&lt;np.uint32&gt;)</code> 转换得到，进行转换后看到 dtype 的变化，以及因为 dtype 变化引起 itemsize 相关属性的变化。</p>
<h1 id="像素操作"><a href="#像素操作" class="headerlink" title="像素操作"></a>像素操作</h1><h2 id="通道"><a href="#通道" class="headerlink" title="通道"></a>通道</h2><p><strong>三通道</strong>： RGB</p>
<p><strong>四通道</strong>: RGB + ahpha(透明度)</p>
<h2 id="通道分离"><a href="#通道分离" class="headerlink" title="通道分离"></a>通道分离</h2><h3 id="方法-1"><a href="#方法-1" class="headerlink" title="方法 1"></a>方法 1</h3><p>使用 <code>cv2.split(img)</code></p>
<h3 id="方法-2"><a href="#方法-2" class="headerlink" title="方法 2"></a>方法 2</h3><p>使用索引方式（切片），如：<code>r = img[:, :, 0]</code></p>
<h2 id="通道合并"><a href="#通道合并" class="headerlink" title="通道合并"></a>通道合并</h2><h3 id="方法-1-1"><a href="#方法-1-1" class="headerlink" title="方法 1"></a>方法 1</h3><p>使用 <code>cv2.merge((r, g, b))</code></p>
<h3 id="方法-2-1"><a href="#方法-2-1" class="headerlink" title="方法 2"></a>方法 2</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">newImg = np.zeros(img.shape, dtype=np.uint8)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(img.ndim):</span><br><span class="line">    newImg[:, :, i] = img[:, :, i]</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">&#x27;new img&#x27;</span>, newImg)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>注 *：np.zeros 一定要指定 dtype 为 <code>np.uint8</code></li>
</ul>
<h1 id="图像的加法"><a href="#图像的加法" class="headerlink" title="图像的加法"></a>图像的加法</h1><h2 id="add"><a href="#add" class="headerlink" title="add()"></a>add()</h2><p><code>cv2.add(img1, img2)</code>: 超过阈值会截断</p>
<h2 id=""><a href="#" class="headerlink" title="+"></a>+</h2><p><code>img1 + img2</code>: 超过阈值会溢出，也就是说对 255 取模</p>
<h2 id="addWeighted"><a href="#addWeighted" class="headerlink" title="addWeighted()"></a>addWeighted()</h2><p>参数</p>
<ol>
<li>第 1 个参数是图像 1</li>
<li>第 2 个参数是图像 1 的权值</li>
<li>第 3 个参数为图像 2</li>
<li>第 4 个参数为图像 2 的权值</li>
<li>第 5 个参数附加数值 gamma，单个数值，即使是多通道图像也使用单个数值；</li>
<li>第 6 个参数可选，返回图像的实例，等同于函数返回结果</li>
<li>第 7 个参数可选，dtype，表示像素值的数据类型</li>
</ol>
<h1 id="图像的减法"><a href="#图像的减法" class="headerlink" title="图像的减法"></a>图像的减法</h1><p>** 目的：** 比较 2 幅图像的差异，比如判断前后 2 个时间点的图像是否发生了变化</p>
<h2 id="subtract"><a href="#subtract" class="headerlink" title="subtract()"></a>subtract()</h2><p><code>subtract(img1, img2)</code> : img1 - img2，但是如果小于 0，那么就会截断为 0</p>
<h2 id="-1"><a href="#-1" class="headerlink" title="-"></a>-</h2><p>计算结果对 256 求模运算</p>
<h2 id="absdiff"><a href="#absdiff" class="headerlink" title="absdiff()"></a>absdiff()</h2><p>绝对值减法</p>
<h2 id="图像和标量加减"><a href="#图像和标量加减" class="headerlink" title="图像和标量加减"></a>图像和标量加减</h2><p>图像之间的加减运算可以看成是 2 个向量之间的加减，将相同下标之间的元素值进行加减运算，如果和标量进行加减，则是将图像的每一个元素都和这个标量值进行加减。</p>
<p>当标量值只是 1 个数值时，只会对多通道图像的第 1 个通道进行运算，如果要进行多通道运算，标量值则使用一个包含 4 个数值的元组表示，即使是 3 通道的彩色图像也要用 4 元组表示这个标量值。</p>
<h1 id="图像的乘法"><a href="#图像的乘法" class="headerlink" title="图像的乘法"></a>图像的乘法</h1><h2 id="multiply"><a href="#multiply" class="headerlink" title="multiply()"></a>multiply()</h2><h3 id="定义-3"><a href="#定义-3" class="headerlink" title="定义"></a>定义</h3><p><code>dst=cv2.multiply(src1, src2[, dst[, scale[, dtype]]])</code></p>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><ul>
<li>src1 和 src2 为图像对象</li>
<li>可选参数 scale 为放大倍数</li>
<li>结果 dst 等于 $saturate(scale \times src1 \times src2)$</li>
</ul>
<h3 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h3><p>multiply() 遵循 * 饱和运算规则 *，比如 uint8 类型的数据如果超过 255 会被截断到 255。</p>
<h2 id="符号乘法"><a href="#符号乘法" class="headerlink" title="符号乘法 *"></a>符号乘法 *</h2><p>实际上就是 Numpy 数组的乘法, 和用 +&#x2F;- 做 numpy 加减法一样, 在数值类型表示范围的上限加 1 取模，比如 uint8 类型的数据对 256 取模</p>
<h1 id="图像的除法"><a href="#图像的除法" class="headerlink" title="图像的除法"></a>图像的除法</h1><h2 id="divide"><a href="#divide" class="headerlink" title="divide()"></a>divide()</h2><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>** 用法 1**</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.divide(src1, src2[, dst[, scale[, dtype]]])</span><br></pre></td></tr></table></figure>

<ul>
<li>src1 和 src2 都是图像对象</li>
<li>scale: 制定 src1 的方法倍数</li>
<li>$dst &#x3D; saturate(src1 \times scale \div src2)$</li>
</ul>
<p>** 用法 2**</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.divide(scale, src2[, dst[, dtype]])</span><br></pre></td></tr></table></figure>

<ul>
<li>scale: 数值类型</li>
<li>src2: 图像对象</li>
<li>$dst &#x3D; saturate(scale \div src2)$</li>
</ul>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><ul>
<li>uint8 等整数类型的除法，运算后的结果会做四舍五入取整</li>
<li>divide() 遵守 * 饱和运算规则 *</li>
</ul>
<h2 id="-2"><a href="#-2" class="headerlink" title="&#x2F;"></a>&#x2F;</h2><p>对应元素直接进行数学运算</p>
<h2 id="divide-除法中的-0"><a href="#divide-除法中的-0" class="headerlink" title="divide() 除法中的 0"></a>divide() 除法中的 0</h2><p>当有元素为 0 且作为被除数时，divide() 计算仍然是有实际意义的</p>
<h2 id="scale-参数"><a href="#scale-参数" class="headerlink" title="scale 参数"></a>scale 参数</h2><p>scale 参数的用法比较特殊，要想实现 $scale \div src2$ 的用法，必须显式地声明形参的名称。</p>
<h1 id="图像位运算"><a href="#图像位运算" class="headerlink" title="图像位运算"></a>图像位运算</h1><h2 id="按位取反-bitwise-not"><a href="#按位取反-bitwise-not" class="headerlink" title="按位取反 bitwise_not()"></a>按位取反 bitwise_not()</h2><p>将数值根据每个 bit 位 1 变 0，0 变 1，比如 0xf0 按位取反就变成了 0x0f</p>
<p>如果是 uint8 类型的数据，取反前后的数据相加结果为 0xff(255)</p>
<h2 id="按位与-bitwise-and"><a href="#按位与-bitwise-and" class="headerlink" title="按位与 bitwise_and()"></a>按位与 bitwise_and()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.bitwise_or(src1, src2[, dst[, mask]])</span><br></pre></td></tr></table></figure>

<h2 id="按位或-bitwise-or"><a href="#按位或-bitwise-or" class="headerlink" title="按位或 bitwise_or()"></a>按位或 bitwise_or()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.bitwise_or(src1, src2[, dst[, mask]])</span><br></pre></td></tr></table></figure>

<h2 id="按位异或-bitwise-nor"><a href="#按位异或-bitwise-nor" class="headerlink" title="按位异或 bitwise_nor()"></a>按位异或 bitwise_nor()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.bitwise_or(src1, src2[, dst[, mask]])</span><br></pre></td></tr></table></figure>

<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ul>
<li>2 个图像的按位操作和算术运算一样，也要求 2 个图像的大小一样，通道数一样。不同于算术运算数据类型不一样时通过 dtype 声明新生成图像的数据类型，按位运算的接口中根本就没有 dtype 参数，所以位运算中 2 个图像的数据类型也必须一致。</li>
<li>处理标量数据时不会自动填充第 4 通道为 0 而直接报错了，所以在处理 4 通道图像时则必须使用四元组。一个好的编程习惯是不管图像是多少通道的都使用四元组表示这个标量，如果不想对某些通道进行位运算，则用相应的全 0 或全 f 代替，比如一个 3 通道的 uint8 类型的图像，只需要对 2 通道和 0x33 相与，构造的四元组就是（0xff，0x33，0xff，0xff）。</li>
</ul>
<h1 id="色彩空间变换"><a href="#色彩空间变换" class="headerlink" title="色彩空间变换"></a>色彩空间变换</h1><h2 id="cvtColor"><a href="#cvtColor" class="headerlink" title="cvtColor()"></a>cvtColor()</h2><h3 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst=cv2.cvtColor(src, code[, dst[, dstCn]])</span><br></pre></td></tr></table></figure>

<h3 id="遍历所有色彩空间转换名称"><a href="#遍历所有色彩空间转换名称" class="headerlink" title="遍历所有色彩空间转换名称"></a>遍历所有色彩空间转换名称</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">colors = [i <span class="keyword">for</span> <span class="keyword">in</span> <span class="built_in">dir</span>(cv) <span class="keyword">if</span> (i.startswith(<span class="string">&#x27;COLOR_&#x27;</span>))]</span><br></pre></td></tr></table></figure>



<h2 id="applyColorMap"><a href="#applyColorMap" class="headerlink" title="applyColorMap()"></a>applyColorMap()</h2><h3 id="原型-1"><a href="#原型-1" class="headerlink" title="原型"></a>原型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.applyColorMap(src, colormap[, dst])</span><br></pre></td></tr></table></figure>

<ul>
<li><p>src 为输入图像，可以是单通道或 3 通道的 8bit 图像。</p>
</li>
<li><p>colormap 为颜色图模式，可以传入整数 0~21 对应各种不同的颜色图，或者用 cv2.COLORMAP_AUTUMN（等价于 0）、cv2.COLORMAP_BONE（等价于 1）等方式传入，OpenCV 源码头文件中定义的 22 种模式如下：</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//! GNU Octave/MATLAB equivalent colormaps</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">ColormapTypes</span></span><br><span class="line">&#123;</span><br><span class="line">    COLORMAP_AUTUMN = <span class="number">0</span>,</span><br><span class="line">    COLORMAP_BONE = <span class="number">1</span>,</span><br><span class="line">    COLORMAP_JET = <span class="number">2</span>,</span><br><span class="line">    COLORMAP_WINTER = <span class="number">3</span>,</span><br><span class="line">    COLORMAP_RAINBOW = <span class="number">4</span>,</span><br><span class="line">    COLORMAP_OCEAN = <span class="number">5</span>,</span><br><span class="line">    COLORMAP_SUMMER = <span class="number">6</span>,</span><br><span class="line">    COLORMAP_SPRING = <span class="number">7</span>,</span><br><span class="line">    COLORMAP_COOL = <span class="number">8</span>,</span><br><span class="line">    COLORMAP_HSV = <span class="number">9</span>,</span><br><span class="line">    COLORMAP_PINK = <span class="number">10</span>,</span><br><span class="line">    COLORMAP_HOT = <span class="number">11</span>,</span><br><span class="line">    COLORMAP_PARULA = <span class="number">12</span>,</span><br><span class="line">    COLORMAP_MAGMA = <span class="number">13</span>,</span><br><span class="line">    COLORMAP_INFERNO = <span class="number">14</span>,</span><br><span class="line">    COLORMAP_PLASMA = <span class="number">15</span>,</span><br><span class="line">    COLORMAP_VIRIDIS = <span class="number">16</span>,</span><br><span class="line">    COLORMAP_CIVIDIS = <span class="number">17</span>,</span><br><span class="line">    COLORMAP_TWILIGHT = <span class="number">18</span>,</span><br><span class="line">    COLORMAP_TWILIGHT_SHIFTED = <span class="number">19</span>,</span><br><span class="line">    COLORMAP_TURBO = <span class="number">20</span>,</span><br><span class="line">    COLORMAP_DEEPGREEN = <span class="number">21</span> </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

 <img data-src="/2023/05/05/143/20-COLORMAP-1-1024x607.jpg" class="" title="img"></li>
</ul>
<h1 id="几何空间变换"><a href="#几何空间变换" class="headerlink" title="几何空间变换"></a>几何空间变换</h1><h2 id="缩放"><a href="#缩放" class="headerlink" title="缩放"></a>缩放</h2><h3 id="原型-2"><a href="#原型-2" class="headerlink" title="原型"></a>原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst=cv2.resize(src, dsize[, dst[, fx[, fy[, interpolation]]]])</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li>src：源图像；</li>
<li>dsize：缩放后目标图像的尺寸，如果设置为 0，目标图像则使用源图像的尺寸乘以 fx 和 fy 得到；dsize 优先级高于 fx 和 fy，如果设置了 dsize，后面的 fx 和 fy 设置无效；</li>
<li>fx 和 fy：dsize 未设置的情况下，使用 fx 和 fy 分别作为宽度和高度的放大倍数；</li>
<li>interpolation：插值方法，默认使用双线性插值 cv2.INTER_LINEAR；</li>
</ul>
<h2 id="转置"><a href="#转置" class="headerlink" title="转置"></a>转置</h2><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>实现像素下标的 x 和 y 轴坐标进行对调：<code>dst(i,j)=src(j,i)</code></p>
<h3 id="原型-3"><a href="#原型-3" class="headerlink" title="原型"></a>原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.transpose(src[, dst])</span><br></pre></td></tr></table></figure>

<h3 id="注意-1"><a href="#注意-1" class="headerlink" title="注意"></a>注意</h3><p>不可以使用 numpy 的 <code>transpose()</code> 转置和 <code>T</code> 属性，会出现数组下标访问越界</p>
<h2 id="翻转"><a href="#翻转" class="headerlink" title="翻转"></a>翻转</h2><h3 id="作用-1"><a href="#作用-1" class="headerlink" title="作用"></a>作用</h3><p>实现水平翻转、垂直翻转和双向翻转</p>
<h3 id="原型-4"><a href="#原型-4" class="headerlink" title="原型"></a>原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.flip(src, flipCode[, dst])</span><br></pre></td></tr></table></figure>

<p><strong>参数含义</strong></p>
<ul>
<li>src: 源图像</li>
<li>flipCode: 翻转方式，其中：0，水平轴翻转；大于 0 为垂直轴翻转；小于 0 作双向翻转</li>
</ul>
<h2 id="仿射变换"><a href="#仿射变换" class="headerlink" title="仿射变换"></a>仿射变换</h2><h3 id="原型-5"><a href="#原型-5" class="headerlink" title="原型"></a>原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst=cv2.warpAffine(src, M, dsize[, dst[, flags[, borderMode[, borderValue]]]])</span><br></pre></td></tr></table></figure>

<ul>
<li>src: 输入图像。</li>
<li>M: 2×3 2 行 3 列变换矩阵。</li>
<li>dsize: 输出图像的大小。</li>
<li>dst: 可选，输出图像，由 dsize 指定大小，type 和 src 一样。</li>
<li>flags: 可选，插值方法</li>
<li>borderMode: 可选，边界像素模式</li>
<li>borderValue: 可选，边界填充值; 默认为 0。</li>
</ul>
<h3 id="平移"><a href="#平移" class="headerlink" title="平移"></a>平移</h3><p>手动指定算子 <code>M=[[1,0,X],[0,1,Y]]</code> 可以实现图像的移位</p>
<ul>
<li>X 表示向图像 x 方向（向右）移动的像素值</li>
<li>Y 表示图像向 y 方向（向下）移动的像素值</li>
</ul>
<h3 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h3><blockquote>
<p>步骤</p>
</blockquote>
<p>用 getRotationMatrix2D() 方法构造出 warpAffine() 的算子 M</p>
<blockquote>
<p>getRotationMatrix2D() 原型</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">retval=cv2.getRotationMatrix2D(center, angle, scale)</span><br></pre></td></tr></table></figure>

<ul>
<li>center：旋转中心位置</li>
<li>angle：旋转角度</li>
<li>scale：缩放比例，不缩放时为 1</li>
</ul>
<h3 id="矫正"><a href="#矫正" class="headerlink" title="矫正"></a>矫正</h3><blockquote>
<p>概念</p>
</blockquote>
<p>因为拍摄角度或成像设备的原因发生畸变，可以用仿射变换进行矫正</p>
<blockquote>
<p>步骤</p>
</blockquote>
<p>使用 <code>getAffineTransform() </code> 构建 M 算子，入参为变换前和变化后的 2 组坐标点，每组坐标点包含 3 个位置参数</p>
<p>**getAffineTransform() 例子 **</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pts1 = np.float32([[<span class="number">10</span>,<span class="number">71</span>],[<span class="number">37</span>,<span class="number">320</span>],[<span class="number">550</span>,<span class="number">240</span>]])</span><br><span class="line">pts2 = np.float32([[<span class="number">10</span>,<span class="number">10</span>],[<span class="number">0</span>,<span class="number">300</span>],[<span class="number">550</span>,<span class="number">300</span>]])</span><br><span class="line">M = cv2.getAffineTransform(pts1,pts2)</span><br></pre></td></tr></table></figure>



<blockquote>
<p>例子</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">plt.rc(<span class="string">&#x27;font&#x27;</span>,family=<span class="string">&#x27;Youyuan&#x27;</span>,size=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">plt.rc(<span class="string">&#x27;axes&#x27;</span>,unicode_minus=<span class="string">&#x27;False&#x27;</span>)</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;..\\samples\\data\\imageTextR.png&#x27;</span>)</span><br><span class="line">rows,cols,_ = img.shape</span><br><span class="line"></span><br><span class="line">pts1 = np.float32([[<span class="number">10</span>,<span class="number">71</span>],[<span class="number">37</span>,<span class="number">320</span>],[<span class="number">550</span>,<span class="number">240</span>]])</span><br><span class="line">pts2 = np.float32([[<span class="number">10</span>,<span class="number">10</span>],[<span class="number">0</span>,<span class="number">300</span>],[<span class="number">550</span>,<span class="number">300</span>]])</span><br><span class="line">M = cv2.getAffineTransform(pts1,pts2)</span><br><span class="line">img_ret1 = cv2.warpAffine(img,M,(cols,rows))</span><br><span class="line"></span><br><span class="line">fig,ax = plt.subplots(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;VX: 桔子 code   原图&#x27;</span>)</span><br><span class="line">ax[<span class="number">0</span>].imshow(cv2.cvtColor(img,cv2.COLOR_BGR2RGB)) <span class="comment">#matplotlib 显示图像为 rgb 格式</span></span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;变换后&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>].imshow(cv2.cvtColor(img_ret1,cv2.COLOR_BGR2RGB))</span><br><span class="line"><span class="comment">#ax[0,0].axis(&#x27;off&#x27;);ax[0,1].axis(&#x27;off&#x27;);ax[1,0].axis(&#x27;off&#x27;);ax[1,1].axis(&#x27;off&#x27;)# 关闭坐标轴显示</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>



<h2 id="旋转-1"><a href="#旋转-1" class="headerlink" title="旋转"></a>旋转</h2><h3 id="原型-6"><a href="#原型-6" class="headerlink" title="原型"></a>原型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.rotate(src, rotateCode[, dst]) -&gt; dst</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li><p>src: 源图像</p>
</li>
<li><p>rotateCode: 可选 3 种参数</p>
<table>
<thead>
<tr>
<th>rotateCode</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>cv2.ROTATE_90_CLOCKWISE</td>
<td>顺时针旋转 90 度</td>
</tr>
<tr>
<td>cv2.ROTATE_180</td>
<td>旋转 180 度，不区分顺时针或逆时针，效果一样</td>
</tr>
<tr>
<td>cv2.ROTATE_90_COUNTERCLOCKWISE</td>
<td>逆时针旋转 90 度，等同于顺时针 270 度</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h3><p>是对 <code>flip()</code> 和 <code>transpose()</code> 的封装实现的</p>
<h2 id="透视变换"><a href="#透视变换" class="headerlink" title="透视变换"></a>透视变换</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>和仿射变换一样，透视变换也需要先构建变换 kernel，不过仿射变换只需要 3 个点构建，透视变换则需要找到 4 个点构建 kernel。</p>
<h3 id="原型-7"><a href="#原型-7" class="headerlink" title="原型"></a>原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.warpPerspective(src,M,dsize[,dst[,flags[,borderMode[,borderValue]]]])-&gt;dst</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src: 输入图像。</li>
<li>M: 3×3 3 行 3 列变换矩阵。</li>
<li>dsize: 输出图像的大小。</li>
<li>dst: 可选，输出图像，由 dsize 指定大小，数据类型和 src 一样。</li>
<li>flags: 可选，插值方法</li>
<li>borderMode: 可选，边界像素模式</li>
<li>borderValue: 可选，边界填充值; 默认为 0。</li>
</ul>
<h3 id="例"><a href="#例" class="headerlink" title="例"></a>例</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">plt.rc(<span class="string">&#x27;font&#x27;</span>,family=<span class="string">&#x27;Youyuan&#x27;</span>,size=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">plt.rc(<span class="string">&#x27;axes&#x27;</span>,unicode_minus=<span class="string">&#x27;False&#x27;</span>)</span><br><span class="line"></span><br><span class="line">img_src = cv2.imread(<span class="string">&#x27;..\\samples\\data\\left02.jpg&#x27;</span>)</span><br><span class="line"><span class="comment">#构建 kernel</span></span><br><span class="line">pts1 = np.float32([[<span class="number">192</span>,<span class="number">40</span>],[<span class="number">610</span>,<span class="number">122</span>],[<span class="number">216</span>,<span class="number">363</span>],[<span class="number">465</span>,<span class="number">415</span>]])</span><br><span class="line">pts2 = np.float32([[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">300</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">350</span>],[<span class="number">300</span>,<span class="number">350</span>]])</span><br><span class="line">kernel = cv2.getPerspectiveTransform(pts1,pts2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;kernel:&#x27;</span>,kernel)</span><br><span class="line"><span class="comment">#透视变换，这里图像大小参考 pts2</span></span><br><span class="line">img_pers = cv2.warpPerspective(img_src,kernel,(<span class="number">300</span>,<span class="number">350</span>))</span><br><span class="line"><span class="comment">#显示</span></span><br><span class="line">fig,ax = plt.subplots(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;img_src&#x27;</span>)</span><br><span class="line">ax[<span class="number">0</span>].imshow(cv2.cvtColor(img_src,cv2.COLOR_BGR2RGB)) <span class="comment">#matplotlib 显示图像为 rgb 格式</span></span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;img_pers&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>].imshow(cv2.cvtColor(img_pers,cv2.COLOR_BGR2RGB))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>



<h1 id="阈值化"><a href="#阈值化" class="headerlink" title="阈值化"></a>阈值化</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><blockquote>
<p>概念</p>
</blockquote>
<p>有些场合也称二值化，是图像分割的一种</p>
<blockquote>
<p>作用</p>
</blockquote>
<p>一般用于将感兴趣区域从背景中区分出来</p>
<blockquote>
<p>方法</p>
</blockquote>
<p>将每个像素和阈值进行对比，分离出来需要的像素设置为特定白色的 255 或者黑色 0，具体看实际的使用需求而定</p>
<h2 id="threshold"><a href="#threshold" class="headerlink" title="threshold()"></a>threshold()</h2><h3 id="原型-8"><a href="#原型-8" class="headerlink" title="原型"></a>原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.threshold(src, thresh, maxval, <span class="built_in">type</span>[, dst]) -&gt; retval, dst</span><br></pre></td></tr></table></figure>

<blockquote>
<p>返回值</p>
</blockquote>
<p>该方法返回 2 个值</p>
<ul>
<li>第 1 个值 retval 为阈值</li>
<li>第 2 个值 dst 为阈值化后的图像</li>
</ul>
<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li><p>src：源图像，8bit 或者 32bit 浮点类型，当 type 没有使用 <code>cv2.THRESH_OTSU</code> 或 <code>cv2.THRESH_TRIANGLE</code> 标志时可以是多通道图像</p>
</li>
<li><p>thresh：比较的阈值；</p>
</li>
<li><p>maxval：阈值化方法为 <code>THRESH_BINARY</code> 和 <code>THRESH_BINARY_INV</code> 时单个像素转换后的最大值；</p>
</li>
<li><p>type：阈值化类型；</p>
<table>
<thead>
<tr>
<th>标志</th>
<th>标志值</th>
<th>dst(x,y) 取值</th>
<th>条件</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>cv2.THRESH_BINARY</td>
<td>0</td>
<td>maxval</td>
<td>if src(x,y)&gt;thresh;</td>
<td>取值只有 2 种，真正意义的 “二值化”</td>
</tr>
<tr>
<td></td>
<td></td>
<td>0</td>
<td>otherwise</td>
<td></td>
</tr>
<tr>
<td>cv2.THRESH_BINARY_INV</td>
<td>1</td>
<td>0</td>
<td>if src(x,y)&gt;thresh;</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>maxval</td>
<td>otherwise</td>
<td></td>
</tr>
<tr>
<td>cv2.THRESH_TRUNC</td>
<td>2</td>
<td>threshold</td>
<td>if src(x,y)&gt;thresh;</td>
<td>最后的取值有多种</td>
</tr>
<tr>
<td></td>
<td></td>
<td>src(x,y)</td>
<td>otherwise</td>
<td></td>
</tr>
<tr>
<td>cv2.THRESH_TOZERO</td>
<td>3</td>
<td>src(x,y)</td>
<td>if src(x,y)&gt;thresh;</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>0</td>
<td>otherwise</td>
<td></td>
</tr>
<tr>
<td>cv2.THRESH_TOZERO_INV</td>
<td>4</td>
<td>0</td>
<td>if src(x,y)&gt;thresh;</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>src(x,y)</td>
<td>otherwise</td>
<td></td>
</tr>
<tr>
<td>cv2.THRESH_MASK</td>
<td>7</td>
<td>&#x2F;</td>
<td>&#x2F;</td>
<td></td>
</tr>
<tr>
<td>cv2.THRESH_OTSU</td>
<td>8</td>
<td>&#x2F;</td>
<td>标志位，使用大津法选择最佳阈值</td>
<td></td>
</tr>
<tr>
<td>cv2.THRESH_TRIANGLE</td>
<td>16</td>
<td>&#x2F;</td>
<td>标志位，使用三角算法选择最佳阈值</td>
<td></td>
</tr>
</tbody></table>
<p> <strong>注意</strong></p>
<p> cv2.THRESH_OTSU 或 cv2.THRESH_TRIANGLE 的使用比较特殊，并不能单独使用，需要和其他类型的数值按位或一起传入。</p>
<p> 比如这样使用 <code>type=cv2.THRESH_BINARY | cv2.THRESH_OTSU</code>。当然在实际使用中也常见将 <code>cv2.THRESH_OTSU</code> 或 <code>cv2.THRESH_TRIANGLE</code> 这 2 种取值之一和前 5 种 type 相加，比如 <code>type=cv2.THRESH_BINARY + cv2.THRESH_OTSU</code>，这是因 <code>cv2.THRESH_OTSU</code> 或 <code>cv2.THRESH_TRIANGLE</code> 和其他 5 种 <code>type</code> 按位或和相加得到的值是一致的。从上面的对照表也可以看到，如果使用 <code>cv2.THRESH_BINARY</code> 和 <code>cv2.THRESH_BINARY_INV</code> 得到的图像像素值只有 2 种，要么是 <code>maxval</code>，要么是 0，可以称得上真正意义上的 “二值化”。</p>
</li>
</ul>
<h2 id="自适应阈值"><a href="#自适应阈值" class="headerlink" title="自适应阈值"></a>自适应阈值</h2><h3 id="原型-9"><a href="#原型-9" class="headerlink" title="原型"></a>原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.adaptiveThreshold(src, maxValue, adaptiveMethod, thresholdType, blockSize, C[, dst]) -&gt; dst</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：源图像；</li>
<li>maxValue：单个像素转换后的最大值；</li>
<li>adaptiveMethod：自适应方法：cv2.ADAPTIVE_THRESH_MEAN_C（平均法）或 cv2.ADAPTIVE_THRESH_GAUSSIAN_C（高斯法）<ul>
<li>cv2.ADAPTIVE_THRESH_MEAN_C（平均法）：这时阈值等于窗口大小为 blockSize 的临近像素点的平均值减去 C；</li>
<li>cv2.ADAPTIVE_THRESH_GAUSSIAN_C（高斯法）：阈值等于窗口大小为 blockSize 的临近像素点高斯窗口互相关加权和减去 C。</li>
</ul>
</li>
<li>thresholdType：阈值化类型，THRESH_BINARY 或 THRESH_BINARY_INV 二选一；</li>
<li>blockSize：计算某个像素使用的阈值时采用的窗口大小，奇数值；</li>
<li>C：平均值或加权平均值减去的常量值；可以为正值，0 或负值；</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>threshold() 方法使用大津法和三角法时不需要指定阈值，会自动根据像素值求出阈值，其他方法则需要指定阈值的大小。</li>
<li>threshold() 方法使用全局单一阈值，而 adaptiveThreshold() 方法使用局部阈值，所以在处理光线不均匀图片时能取得更好的</li>
</ul>
<h1 id="平滑处理"><a href="#平滑处理" class="headerlink" title="平滑处理"></a>平滑处理</h1><h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><p>图像在生成、传输或存储过程中可能因为外界干扰产生噪声，从而使图像在视觉上表现为出现一些孤立点或者像素值突然变化的点，图像平滑处理的目的就是 &#x3D;&#x3D;为了消除图像中的这类噪声&#x3D;&#x3D;。</p>
<h2 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h2><blockquote>
<p>定义</p>
</blockquote>
<p>也叫滤波器模板、kernel。用这个 ksize&#x3D;3×3 的窗口作用于原始图像上的每一个像素，被这个窗口覆盖的 9 个像素点都参与计算，这样在该像素点上就会得到一个新的像素值，当窗口沿着图像逐个像素进行计算，就会得到一幅新的图像。</p>
<blockquote>
<p>滤波器模板的不同就构成了滤波算法的差异：</p>
</blockquote>
<ul>
<li>均值平滑算法中滑动窗口中各个像素点的系数均为 1&#x2F;(窗口高 * 窗口宽)</li>
<li>高斯平滑中系数和中心点的距离满足高斯分布。</li>
</ul>
<blockquote>
<p>边沿处理</p>
</blockquote>
<p>填 0、填 1、复制边沿等</p>
<h2 id="均值平滑"><a href="#均值平滑" class="headerlink" title="均值平滑"></a>均值平滑</h2><h3 id="原型-10"><a href="#原型-10" class="headerlink" title="原型"></a>原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst=cv2.blur(src, ksize[, dst[, anchor[, borderType]]])</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：源图像，通道数不限，数据类型必须为 CV_8U, CV_16U, CV_16S, CV_32F or CV_64F；</li>
<li>ksize：kernel 尺寸、窗口大小，二元组类型，元素值可以是偶数或奇数；</li>
<li>anchor：锚点，默认为（-1,-1），作用于滑动窗口的中心点；</li>
<li>borderType：边界处理类型；</li>
</ul>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p>ksize 越大，图像越模糊，清晰度越低。</p>
<h2 id="中值平滑"><a href="#中值平滑" class="headerlink" title="中值平滑"></a>中值平滑</h2><h3 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h3><p>中值平滑和均值平滑一样也用到了滑动窗口，但是它并不是计算滑动窗口中的某种加权和，而是使用原图像滑动窗口中所有像素值排序后的中值作为新图像的像素值。</p>
<h3 id="原型-11"><a href="#原型-11" class="headerlink" title="原型"></a>原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst=cv2.medianBlur(src, ksize[, dst])</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：源图像，通道数可以是 1,3 或 4，当 ksize 为 3 或者 5 时，数据类型可以是 CV_8U, CV_16U, CV_32F，当使用更大的 ksize 时，数据类型只能是 CV_8U；</li>
<li>ksize：kernel 尺寸、窗口大小，整数型，大于 1 的奇数值；</li>
</ul>
<h2 id="像素值对比"><a href="#像素值对比" class="headerlink" title="像素值对比"></a>像素值对比</h2><h3 id="中值后模糊原因"><a href="#中值后模糊原因" class="headerlink" title="中值后模糊原因"></a>中值后模糊原因</h3><p>均值和中值都会降低图像变化的程度</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>平滑处理是图像滤波的一种，可以看做是低通滤波，它会 &#x3D;&#x3D; 消除图像的高频 “信号”&#x3D;&#x3D;，让图像看起来更模糊、平滑，通过将变化前后的图像像素值绘制曲线可以更形象地观察到这种平滑效果。</p>
<h2 id="高斯平滑"><a href="#高斯平滑" class="headerlink" title="高斯平滑"></a>高斯平滑</h2><h3 id="概念-3"><a href="#概念-3" class="headerlink" title="概念"></a>概念</h3><p>高斯平滑则 &#x3D;&#x3D;根据距离中心点的间距远近其权重会不同&#x3D;&#x3D;，这种方式看起来更符合” 惯例”：身边的人对你影响会更大。</p>
<p>高斯分布：正态分布</p>
<p><strong>滑动窗口的权重</strong>: 正态分布的归一化</p>
<h3 id="原型-12"><a href="#原型-12" class="headerlink" title="原型"></a>原型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst=cv2.GaussianBlur(src, ksize, sigmaX[, dst[, sigmaY[, borderType]]])</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：通道数任意，实际处理是分通道处理；图像深度只能是 CV_8U, CV_16U, CV_16S, CV_32F or CV_64F；</li>
<li>ksize：元组类型，窗口大小，宽度和高度可以不一样，但是必须是正的奇数；如果设置为 0，则根据 sigma 计算得到。</li>
<li>sigmaX：图像 X 方向的标准差，对应前述二维高斯分布的σ1；</li>
<li>sigmaY：图像 Y 方向的标准差，对应前述二维高斯分布的σ2，如果传入 0，会等于 sigmaX，如果 sigmaX 和 sigmaY 都传入 0，sigmaX 和 sigmaX 则根据 ksize 计算；</li>
<li>borderType：边界处理方式；</li>
</ul>
<blockquote>
<p>注意</p>
</blockquote>
<p>因为都是以滑动窗口中心点为原点，为了保证中心点 (x,y)&#x3D;(0,0) 的权重为最大值，所以在 OpenCV 的高斯平滑中 <em>μ1 和μ2 都设置为 0</em>，这样在调用高斯平滑函数时只需要传入σ1（sigmaX）和σ2（sigmaY）。</p>
<h3 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a>效果</h3><ul>
<li>ksize 越大，图像越模糊</li>
<li>ksize 保持不变，sigma 越大时，原点的取值越小，周围点的取值更大，对应到图像上中心点的权重越低，周围点权重越高，所以 sigma 越大图像越模糊。</li>
</ul>
<h2 id="双边平滑"><a href="#双边平滑" class="headerlink" title="双边平滑"></a>双边平滑</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>均值、中值、高斯平滑的去躁是一种 “无差别攻击”，所有的像素都受到同一个加权系数的影响，所以在平滑过程中也会影响到图像的边沿（像素值突变的地方 &#x3D;&#x3D;？？？&#x3D;&#x3D;）</p>
<p>双边滤波则可以在 &#x3D;&#x3D;去除噪声的同时又能保持图像的边沿&#x3D;&#x3D;，也就是传说中的” 去噪保边”。</p>
<h3 id="加权系数"><a href="#加权系数" class="headerlink" title="加权系数"></a>加权系数</h3><img data-src="/2023/05/05/143/image-35.png" class="" title="image-35">

<h3 id="函数原型"><a href="#函数原型" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst=cv2.bilateralFilter(src, d, sigmaColor, sigmaSpace[, dst[, borderType]])</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：8bit 或浮点类型；1 或 3 通道；</li>
<li>d：窗口大小，如果为非正数，根据 sigmaSpace 计算；d&gt;5 时速度会比较慢，当噪声比较严重时可以选择 d&gt;&#x3D;9，但是此时不适合对时间敏感的处理；</li>
<li>sigmaColor：亮度差的 sigma 参数；</li>
<li>sigmaSpace：空间距离的 sigma 参数，同时作用于图像的 X 和 Y(行、列)2 个方向；</li>
<li>borderType：边界处理方式；</li>
</ul>
<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>高斯平滑对比均值和中值平滑其取值更符合 “惯例”，在空间距离上距离越近的像素用来计算新像素的值其权重越大。均值平滑、中值平滑和高斯平滑会对整幅图像实现无差别的平滑，一个固定系数的滑动窗口作用于整个图像，所以平滑后的图像虽然处理掉了噪声，但是边沿部分也会被削弱。而双边平滑在高斯平滑使用的系数基础上乘以像素差值的高斯函数，和中心点像素差值越大整个系数值越小，最后就能达到去躁保边的效果。</p>
<h1 id="形态学变换"><a href="#形态学变换" class="headerlink" title="形态学变换"></a>形态学变换</h1><h2 id="形态学概念"><a href="#形态学概念" class="headerlink" title="形态学概念"></a>形态学概念</h2><p>形态学变换是基于图像形状的变换过程，通常用来处理二值图像，当然也可以用在灰度图上。</p>
<p>OpenCV 中的形态学变换同平滑处理一样也是基于一种 “滑动窗口” 的操作，不过在形态学变换中 “滑动窗口” 有一个更专业的名词：“结构元”，也可以像平滑处理那样称呼为 kernel。</p>
<p>结构元的形状有方形、十字形、椭圆形等，其形状决定了形态学变换的特点。形态学变换主要有腐蚀、膨胀、开操作、闭操作等等。</p>
<h2 id="结构元生成"><a href="#结构元生成" class="headerlink" title="结构元生成"></a>结构元生成</h2><p>结构元生成函数用来生成形态学变换的 kernel 参数。</p>
<h3 id="函数原型-1"><a href="#函数原型-1" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.getStructuringElement(shape, ksize[, anchor]) -&gt;retval</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li><p>shape：结构元 (kernel) 的形状；</p>
<table>
<thead>
<tr>
<th>shape 属性</th>
<th>形状</th>
</tr>
</thead>
<tbody><tr>
<td>cv2.MORPH_RECT</td>
<td>方形，所有的数值均为 1</td>
</tr>
<tr>
<td>cv2.MORPH_CROSS</td>
<td>十字交叉形，在锚点坐标的水平和竖直方向的元素为 1，其他为 0</td>
</tr>
<tr>
<td>cv2.MORPH_ELLIPSE</td>
<td>椭圆形</td>
</tr>
</tbody></table>
</li>
<li><p>ksize：结构元 (kernel) 的大小；</p>
</li>
<li><p>anchor：锚点，默认使用 (-1,-1) 表示中心点；</p>
</li>
</ul>
<h3 id="不同-kernel-的影响"><a href="#不同-kernel-的影响" class="headerlink" title="不同 kernel 的影响"></a>不同 kernel 的影响</h3><p>以膨胀为例来看</p>
<ul>
<li>使用方形 MORPH_RECT 的结构元时，新图像的边界看起来仍然是方方正正的</li>
<li>使用十字形 MORPH_CROSS 和椭圆形 MORPH_ELLIPSE 的结构元时，边界要显得 “圆滑” 的多。</li>
</ul>
<h2 id="腐蚀"><a href="#腐蚀" class="headerlink" title="腐蚀"></a>腐蚀</h2><h3 id="概念-4"><a href="#概念-4" class="headerlink" title="概念"></a>概念</h3><p>腐蚀操作可以将边界的白色（前景）像素 “腐蚀” 掉，但仍能保持大部分白色。类似平滑处理的滑动窗口，用某种结构元在图像上滑动，当结构元覆盖原始图像中的所有像素都为 “1” 时，新图像中该像素点的值才为“1”（CV8U 为 255）。腐蚀可以用来 &#x3D;&#x3D; 去除噪声、去掉“粘连”&#x3D;&#x3D;。</p>
<h3 id="函数原型-2"><a href="#函数原型-2" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.erode(src, kernel[, dst[, anchor[, iterations[, borderType[, borderValue]]]]]) -&gt;dst</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：通道数任意；图像深度只能是 CV_8U, CV_16U, CV_16S, CV_32F or CV_64F；</li>
<li>kernel：可以由 getStructuringElement() 构建；</li>
<li>dst：输出图像，通道数和数据类型同 src；</li>
<li>anchor：锚点，默认使用 (-1,-1) 表示中心点；</li>
<li>iterations：腐蚀次数；</li>
<li>borderType：边界类型；</li>
<li>borderValue：边界值；</li>
</ul>
<h3 id="效果-2"><a href="#效果-2" class="headerlink" title="效果"></a>效果</h3><p>kernel 的 ksize 越大，iterations 次数越多，图像看起来越 “廋”。</p>
<h2 id="膨胀"><a href="#膨胀" class="headerlink" title="膨胀"></a>膨胀</h2><h3 id="概念-5"><a href="#概念-5" class="headerlink" title="概念"></a>概念</h3><p>膨胀是腐蚀的逆操作，可以将边界的白色（前景）像素 “生长” 扩大。滑动窗口经过白色像素时，只要结构元中有 1 个像素为 “1” 时，新图像中该像素点的值就为“1”（CV8U 为 255）。</p>
<p>&#x3D;&#x3D; 膨胀可以用来增强连接、填充凹痕。&#x3D;&#x3D;</p>
<h3 id="函数原型-3"><a href="#函数原型-3" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.dilate(src, kernel[, dst[, anchor[, iterations[, borderType[, borderValue]]]]]) -&gt;dst</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：通道数任意；图像深度只能是 CV_8U, CV_16U, CV_16S, CV_32F or CV_64F；</li>
<li>kernel：可以由 getStructuringElement() 构建；</li>
<li>dst：输出图像，通道数和数据类型同 src；</li>
<li>anchor：锚点，默认使用 (-1,-1) 表示中心点；</li>
<li>iterations：膨胀次数；</li>
<li>borderType：边界类型；</li>
<li>borderValue：边界值；</li>
</ul>
<h3 id="效果-3"><a href="#效果-3" class="headerlink" title="效果"></a>效果</h3><p>kernel 的 ksize 越大，iterations 次数越多，图像看起来越 “胖”。</p>
<h2 id="morphologyEx-函数"><a href="#morphologyEx-函数" class="headerlink" title="morphologyEx() 函数"></a>morphologyEx() 函数</h2><h3 id="函数原型-4"><a href="#函数原型-4" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.morphologyEx(src, op, kernel[, dst[, anchor[, iterations[, borderType[, borderValue]]]]]) -&gt;dst</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li><p>src：源图像，通道数任意；图像深度只能是 CV_8U, CV_16U, CV_16S, CV_32F or CV_64F；其中 op 为 cv2.MORPH_HITMISS 时仅支持 CV_8UC1；</p>
</li>
<li><p>op：变换方式；</p>
</li>
<li><p>kernel：可以由 getStructuringElement() 构建</p>
<p> ​	op 为 cv2.MORPH_HITMISS 时则由子图构建；</p>
</li>
<li><p>dst：输出图像，通道数和数据类型同 src；</p>
</li>
<li><p>anchor：锚点，默认使用 (-1,-1) 表示中心点；</p>
</li>
<li><p>iterations：迭代次数；</p>
</li>
<li><p>borderType：边界类型；</p>
</li>
<li><p>borderValue：边界值；</p>
</li>
</ul>
<h3 id="op-值与-erode、dilate-的关系"><a href="#op-值与-erode、dilate-的关系" class="headerlink" title="op 值与 erode、dilate 的关系"></a>op 值与 erode、dilate 的关系</h3><table>
<thead>
<tr>
<th><strong>形态学变换</strong></th>
<th><strong>op 标志位</strong></th>
<th><strong>与 erode 和 dilate 关系</strong></th>
</tr>
</thead>
<tbody><tr>
<td>腐蚀</td>
<td>cv2.MORPH_ERODE</td>
<td>dst&#x3D;erode(src,element)</td>
</tr>
<tr>
<td>膨胀</td>
<td>cv2.MORPH_DILATE</td>
<td>dst&#x3D;dilate(src,element)</td>
</tr>
<tr>
<td>开操作</td>
<td>cv2.MORPH_OPEN</td>
<td>dst&#x3D;dilate(erode(src,element))</td>
</tr>
<tr>
<td>闭操作</td>
<td>cv2.MORPH_CLOSE</td>
<td>dst&#x3D;erode(dilate(src,element))</td>
</tr>
<tr>
<td>梯度</td>
<td>cv2.MORPH_GRADIENT</td>
<td>dst&#x3D;dilate(src,element)−erode(src,element)</td>
</tr>
<tr>
<td>顶帽</td>
<td>cv2.MORPH_TOPHAT</td>
<td>dst&#x3D;src−open(src,element)</td>
</tr>
<tr>
<td>黑帽</td>
<td>cv2.MORPH_BLACKHAT</td>
<td>dst&#x3D;close(src,element)−src</td>
</tr>
<tr>
<td>击中击不中</td>
<td>cv2.MORPH_HITMISS</td>
<td>dst&#x3D;erode(src,element) &amp; erode(<del>src,</del>element)</td>
</tr>
</tbody></table>
<h2 id="开操作"><a href="#开操作" class="headerlink" title="开操作"></a>开操作</h2><h3 id="概念-6"><a href="#概念-6" class="headerlink" title="概念"></a>概念</h3><p>开操作的实质是 &#x3D;&#x3D;先进行腐蚀再膨胀&#x3D;&#x3D;，可以用来消除小于结构元大小的细小区域</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_open = cv2.morphologyEx(img_bin,cv2.MORPH_OPEN,kernel,iterations=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>



<h2 id="闭操作"><a href="#闭操作" class="headerlink" title="闭操作"></a>闭操作</h2><h3 id="概念-7"><a href="#概念-7" class="headerlink" title="概念"></a>概念</h3><p>闭操作实际上是 &#x3D;&#x3D;先进行膨胀再腐蚀&#x3D;&#x3D;，因为膨胀可以用来填充孔洞、修复缺失的连接，但是同时也会导致白色轮廓增大，当用同样的结构元 (kernel) 再进行一次腐蚀操作后，就可以保持外形轮廓和原来的一致。</p>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_close = cv2.morphologyEx(img_bin,cv2.MORPH_CLOSE,kernel,iterations=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>



<h2 id="形态学梯度"><a href="#形态学梯度" class="headerlink" title="形态学梯度"></a>形态学梯度</h2><h3 id="概念-8"><a href="#概念-8" class="headerlink" title="概念"></a>概念</h3><p>形态学梯度操作是用膨胀图像减去腐蚀图像的结果，因为膨胀可以增大边沿，腐蚀会缩小边沿，所以形态学梯度变换就 &#x3D;&#x3D;能将轮廓提取出来&#x3D;&#x3D;</p>
<h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_gradient = cv2.morphologyEx(img_bin,cv2.MORPH_GRADIENT,kernel,iterations=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>



<h2 id="顶帽"><a href="#顶帽" class="headerlink" title="顶帽"></a>顶帽</h2><h3 id="概念-9"><a href="#概念-9" class="headerlink" title="概念"></a>概念</h3><p>顶帽变换是用原图减去开操作图像，因为开操作会去除小于结构元的小区域，原图减去开操作图像后，会 &#x3D;&#x3D;将开操作去除的小区域保留下来&#x3D;&#x3D;</p>
<h3 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_tophat = cv2.morphologyEx(img_bin,cv2.MORPH_TOPHAT,kernel,iterations=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>



<h2 id="黑帽"><a href="#黑帽" class="headerlink" title="黑帽"></a>黑帽</h2><h3 id="概念-10"><a href="#概念-10" class="headerlink" title="概念"></a>概念</h3><p>黑帽变换和顶帽变换则相反，是将闭操作后的图像减去原图，因为闭操作会填充孔洞（小的黑色区域），孔洞部分变成白色，而原图中仍然为黑色，这样就会 &#x3D;&#x3D;将原图中的孔洞保留下来并变为白色区域&#x3D;&#x3D;。</p>
<h3 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_blackhat = cv2.morphologyEx(img_bin,cv2.MORPH_BLACKHAT,kernel,iterations=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>



<h2 id="击中不击中"><a href="#击中不击中" class="headerlink" title="击中不击中"></a>击中不击中</h2><h3 id="概念-11"><a href="#概念-11" class="headerlink" title="概念"></a>概念</h3><p>击中击不中变换可以 &#x3D;&#x3D;用来在原图中查找子图&#x3D;&#x3D;，假设要查找的图像中包含了多种子图，可以利用某个子图构造出 kernel，经过击中击不中变换就能在该子图中心保留一个非零的点。</p>
<p>** 注意:** 这里构造 kernel 不再是使用 getStructuringElement()，而是需要用子图构造。</p>
<p>一个构造 kernel 的例子如下，首先从子图中读取图像，然后和要做变换的原图做一样的阈值化，接下来构造一个和子图大小一样类型为 np.int8 型的 kernel，其中子图阈值化后值为 255 的位置设置为 1，阈值化后值为 0 的位置设置为 - 1：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#构建 kernel</span></span><br><span class="line">img_kernel = cv2.imread(<span class="string">&#x27;..\\samples\\picture\\hitmiss-kernel.bmp&#x27;</span>,cv2.IMREAD_GRAYSCALE)</span><br><span class="line">_,img_kernel_bin = cv2.threshold(img_kernel,<span class="number">193</span>,<span class="number">255</span>,<span class="number">1</span>) <span class="comment">#阈值化，阈值和要做变换的原图一致</span></span><br><span class="line">kernel = img_kernel.astype(np.int8) <span class="comment">#构造一个和子图大小但是类型为 int8 型，可以保存负数</span></span><br><span class="line">kernel[img_kernel_bin == <span class="number">255</span>] = <span class="number">1</span></span><br><span class="line">kernel[img_kernel_bin == <span class="number">0</span>] = -<span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li>读取原图并进行阈值化</li>
<li>按照前面的方法构建 kernel</li>
<li>用 morphologyEx() 进行击中击不中变换</li>
<li>用 findNonZero() 查找非零点并用 circle() 绘图显示出来</li>
</ol>
<h3 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 构建 kernel</span></span><br><span class="line">img_kernel = cv2.imread(<span class="string">&#x27;..\\samples\\picture\\hitmiss-kernel.bmp&#x27;</span>,cv2.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="comment"># 阈值化，阈值和要做变换的原图一致</span></span><br><span class="line">_,img_kernel_bin = cv2.threshold(img_kernel,<span class="number">193</span>,<span class="number">255</span>,<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 构造一个和子图大小但是类型为 int8 型，可以保存负数</span></span><br><span class="line">kernel = img_kernel.astype(np.int8)</span><br><span class="line">kernel[img_kernel_bin == <span class="number">255</span>] = <span class="number">1</span></span><br><span class="line">kernel[img_kernel_bin == <span class="number">0</span>] = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 击中击不中变换</span></span><br><span class="line">img_hitmiss = cv2.morphologyEx(img_src_bin,cv2.MORPH_HITMISS ,kernel,iterations=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;countNonZero(img_hitmiss):&#x27;</span>,cv2.countNonZero(img_hitmiss))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制中心点</span></span><br><span class="line">locations = cv2.findNonZero(img_hitmiss)</span><br><span class="line">img_hitmiss_color = cv2.cvtColor(img_hitmiss,cv2.COLOR_GRAY2BGR)</span><br><span class="line"><span class="keyword">if</span> locations <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(locations), locations.shape ,locations)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;locations:&#x27;</span>,locations[<span class="number">0</span>][<span class="number">0</span>]) <span class="comment"># 第 2 个 [0] 固定，第 1 个 [0] 表示找到位置的个数</span></span><br><span class="line">    center=locations[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>],locations[<span class="number">0</span>][<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">    cv2.circle(img_hitmiss_color,center, <span class="number">15</span>, (<span class="number">0</span>,<span class="number">255</span>,<span class="number">255</span>), <span class="number">5</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;未击中&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h1 id="图像金字塔"><a href="#图像金字塔" class="headerlink" title="图像金字塔"></a>图像金字塔</h1><h2 id="概念-12"><a href="#概念-12" class="headerlink" title="概念"></a>概念</h2><p>图像金字塔是一些列图像的几何，如下图所示。更高层图像尺寸更小，更底层图像尺寸更大，看起来就像是一个金字塔一样</p>
<img data-src="/2023/05/05/143/image-36.png" class="" title="image-36">





<h2 id="pyrDown"><a href="#pyrDown" class="headerlink" title="pyrDown"></a>pyrDown</h2><h3 id="概念-13"><a href="#概念-13" class="headerlink" title="概念"></a>概念</h3><p>这里的 down 是指图像变小，所以原始图像在金字塔的底部。</p>
<h3 id="步骤-1"><a href="#步骤-1" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>将当前图像和高斯核卷积:<img data-src="/2023/05/05/143/image-37.png" class="" title="img"></p>
<p><strong>【Note】</strong>：这个高斯核的尺寸为 5×5 大小，所有元素的值加起来正好为 256，最后再除以 256，得到的加权和正好为 1。其距离最中心越近数值越大，这正好和高斯平滑选择的高斯核类似。这个过程也类似于高斯平滑。</p>
</li>
</ol>
<h3 id="函数原型-5"><a href="#函数原型-5" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.pyrDown(src[, dst[, dstsize[, borderType]]]) -&gt;dst</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：源图像；</li>
<li>dst：目标图像；</li>
<li>dstsize：缩放后目标图像的尺寸，必须满足 std::abs(dsize.width<em>2 – ssize.width) &lt;&#x3D; 2 &amp;&amp; std::abs(dsize.height</em>2 – ssize.height) &lt;&#x3D; 2</li>
<li>borderType：边界填充类型；</li>
</ul>
<blockquote>
<p>行为</p>
</blockquote>
<p>经过 <code>pyrDown()</code> 处理的图像变得更加模糊 (平滑)。然后移除偶数行和偶数列，然后就能得到和原图相比是原图 1&#x2F;4 大小的新的图像，在图像金字塔中就位于当前层的上一层。</p>
<h2 id="pyrUp"><a href="#pyrUp" class="headerlink" title="pyrUp"></a>pyrUp</h2><h3 id="概念-14"><a href="#概念-14" class="headerlink" title="概念"></a>概念</h3><p>将图像的尺寸变大，所以原始图像位于图像金字塔的顶层。</p>
<h3 id="函数原型-6"><a href="#函数原型-6" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.pyrUp(src[, dst[, dstsize[, borderType]]]) -&gt;dst</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：源图像；</li>
<li>dst：目标图像；</li>
<li>dstsize：缩放后目标图像的尺寸，必须满足 std::abs(dsize.width – ssize.width<em>2) &#x3D;&#x3D;dsize.width % 2 &amp;&amp; std::abs(dsize.height – ssize.height</em>2)&#x3D;&#x3D; dsize.height % 2</li>
<li>borderType：边界填充类型；</li>
</ul>
<h1 id="图像梯度"><a href="#图像梯度" class="headerlink" title="图像梯度"></a>图像梯度</h1><h2 id="概念-15"><a href="#概念-15" class="headerlink" title="概念"></a>概念</h2><p><a target="_blank" rel="noopener" href="http://www.juzicode.com/opencv-python-gaussianblur-bilateralfilter/">高斯平滑、双边平滑</a>和 <a target="_blank" rel="noopener" href="http://www.juzicode.com/opencv-python-blur-medianblur/">均值平滑、中值平滑</a> 介绍的平滑处理可以看做是图像的 “<strong>低通滤波</strong>”，它会滤除掉图像的“高频” 部分，使图像看起来更平滑。</p>
<p>图像梯度则可以看做是对图像进行 “<strong>高通滤波</strong>”，他会滤除图像中的低频部分，&#x3D;&#x3D;为的是凸显图像的突变部分&#x3D;&#x3D;</p>
<h2 id="sobel"><a href="#sobel" class="headerlink" title="sobel"></a>sobel</h2><h3 id="函数原型-7"><a href="#函数原型-7" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.Sobel(src, ddepth, dx, dy[, dst[, ksize[, scale[, delta[, borderType]]]]])</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：源图像；</li>
<li>ddepth：目标图像深度；</li>
<li>dx：x 方向求导阶数；</li>
<li>dy：y 方向求导阶数；</li>
<li>dst：目标图像；</li>
<li>ksize：kernel 尺寸，说明文档上指出必须是 1,3,5,7 中的一个，但是实验可以得到应该是小于 31 的正奇数；如果是 - 1 表示 scharr 滤波；</li>
<li>scale：缩放比例，默认为 1；</li>
<li>delta：叠加值，默认为 0；</li>
<li>borderType：边界填充类型；</li>
</ul>
<h3 id="效果-4"><a href="#效果-4" class="headerlink" title="效果"></a>效果</h3><blockquote>
<p>dx 与 dy 取值不同的效果</p>
</blockquote>
<table>
<thead>
<tr>
<th>(dx, dy)</th>
<th>效果</th>
</tr>
</thead>
<tbody><tr>
<td>(1, 0)</td>
<td>凸显 x 方向的梯度变化</td>
</tr>
<tr>
<td>(0, 1)</td>
<td>凸显 y 方向的梯度变化</td>
</tr>
<tr>
<td>(0.5, 0.5)</td>
<td>凸显边沿</td>
</tr>
<tr>
<td>(1, 1)</td>
<td>dx 和 dy 都为 1 表明是与的关系，只有 x 和 y 方向都有梯度的时候才能被检测出来。</td>
</tr>
</tbody></table>
<blockquote>
<p>ksize 的取值不同</p>
</blockquote>
<ul>
<li>ksize 的值越大，梯度信息呈现的越多</li>
<li>ksize 相同，dx 的值越小，梯度的细节越多</li>
</ul>
<h2 id="scharr"><a href="#scharr" class="headerlink" title="scharr"></a>scharr</h2><h3 id="背景-1"><a href="#背景-1" class="headerlink" title="背景"></a>背景</h3><p>当 kernel 的尺寸为 3×3 时，Sobel 计算的结果不是很精确，为了得到更精确的计算结果常采用下图所示的 Scharr kernel</p>
<h3 id="概念-16"><a href="#概念-16" class="headerlink" title="概念"></a>概念</h3><p>Scharr 变换可以看做是使用了 Scharr 核的 Sobel 变换，是一种经过改进的 Sobel 变换，同样也要区分 x 和 y 方向分开计算梯度。</p>
<h3 id="函数原型-8"><a href="#函数原型-8" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.Scharr(src, ddepth, dx, dy[, dst[, scale[, delta[, borderType]]]])</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：源图像；</li>
<li>ddepth：目标图像深度；</li>
<li>dx：x 方向求导阶数；</li>
<li>dy：y 方向求导阶数；</li>
<li>dst：目标图像；</li>
<li>scale：缩放比例，默认为 1；</li>
<li>delta：叠加值，默认为 0；</li>
<li>borderType：边界填充类型；</li>
</ul>
<blockquote>
<p>Notes</p>
</blockquote>
<ul>
<li><p><code>scharr()</code> 没有 <code>ksize</code> 参数， <code>scharr</code> 的 <code>kernel</code> 大小固定为 $3 \times 3$</p>
</li>
<li><p>dx 和 dy 要满足如下的关系，否则会抛异常</p>
<p> <code>CV_Assert(dx&gt;= 0 &amp;&amp; dy &gt;= 0 &amp;&amp; dx + dy == 1 )</code></p>
<p> 也就是每次只能求 x 方向或者 y 方向单个方向的梯度，而且只能求一阶梯度，不像 Sobel() 中 dx 或 dy 可以设置为更大的值计算更高阶的梯度。</p>
</li>
</ul>
<h2 id="Laplacian"><a href="#Laplacian" class="headerlink" title="Laplacian"></a>Laplacian</h2><h3 id="概念-17"><a href="#概念-17" class="headerlink" title="概念"></a>概念</h3><p>Laplacian 变换是对图像求二阶导数，下图是 2 种  $3 \times 3$ 尺寸的 kernel，这里 ksize 是 <code>Laplacian()</code> 的入参名称</p>
<blockquote>
<p>Notes</p>
</blockquote>
<ul>
<li><p>Laplacian() 变换不需要区分图像的 x 和 y 方向计算梯度，从上图的 2 种 kernel 也可以看到其 x 和 y 方向是对称的。</p>
</li>
<li><p>在 Laplacian() 变换中，&#x3D;&#x3D;ksize 必须是小于 31 的正奇数 &#x3D;&#x3D;</p>
<p> 当 ksize 等于 1 时，这时 kernel 的尺寸大小并非是 1，其实际尺寸仍然为 3×3 (看源码)</p>
</li>
</ul>
<h3 id="函数原型-9"><a href="#函数原型-9" class="headerlink" title="函数原型"></a>函数原型</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.Laplacian(src, ddepth[, dst[, ksize[, scale[, delta[, borderType]]]]])</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：源图像；</li>
<li>ddepth：目标图像深度；</li>
<li>dst：目标图像；</li>
<li>ksize：kernel 尺寸，小于 31 的正奇数；如果为 1 仍然是一个 3×3 的 kernel；</li>
<li>scale：缩放比例，默认为 1；</li>
<li>delta：叠加值，默认为 0；</li>
<li>borderType：边界填充类型；</li>
</ul>
<blockquote>
<p>Notes</p>
</blockquote>
<ul>
<li><code>Laplacian </code> 变换中没有 dx 或 dy 参数，因为 <code>Laplacian</code> 是对图像求二阶导数。</li>
</ul>
<h3 id="效果-5"><a href="#效果-5" class="headerlink" title="效果"></a>效果</h3><ul>
<li><code>Laplacian()</code> 中的 <code>ksize</code> 越大，梯度信息越丰富</li>
<li>在相同的 <code>ksize</code> 时，二阶 <code>Sobel</code> 变换和 <code>Laplacian</code> 变换对比看，<code>Laplacian</code> 变换取得的梯度信息要更明显一些。</li>
</ul>
<h1 id="边沿检测"><a href="#边沿检测" class="headerlink" title="边沿检测"></a>边沿检测</h1><h2 id="概念-18"><a href="#概念-18" class="headerlink" title="概念"></a>概念</h2><p>图像梯度反应的是图像像素值的变化过程，不管变化大小都考虑在内，所以 Sobel, Laplacian 变换得到的是一个多级灰度图。</p>
<p>边沿洁厕也昆虫看做是图像梯度的一种延伸，不过边沿检测更注意图像的 “边沿部分”，图像梯度变化较小的部分会被忽略，只有较大变化的部分保留下来</p>
<h2 id="Canny"><a href="#Canny" class="headerlink" title="Canny"></a>Canny</h2><h3 id="概念-19"><a href="#概念-19" class="headerlink" title="概念"></a>概念</h3><p>canny 边沿检测有低错误率、很好地定位边缘点、单一的边缘点响应等优点</p>
<h3 id="步骤-2"><a href="#步骤-2" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li>高斯滤波器平滑输入图像；</li>
<li>计算梯度幅值图像和角度方向；</li>
<li>对梯度幅值图像应用非最大值抑制；</li>
<li>用双阈值处理和连接分析检测和连接边沿。</li>
</ol>
<blockquote>
<p>非极大值抑制</p>
</blockquote>
<p>抑制非极大值的目标（去冗余），从而搜索出局部极大值的目标（找最优）</p>
<h3 id="函数原型-10"><a href="#函数原型-10" class="headerlink" title="函数原型"></a>函数原型</h3><blockquote>
<p>函数原型1</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">edges=cv2.Canny(image, threshold1, threshold1[, edges[, apertureSize[, L2gradient]]])</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li>image：8bit源图像，可以是单通道或多通道；</li>
<li>threshold1：迟滞阈值1；</li>
<li>threshold2：迟滞阈值2，和threshold1没有大小要求，函数内部会调整交换；</li>
<li>edges：目标图像，二值图像；</li>
<li>apertureSize：kernel尺寸，默认为3；</li>
<li>L2gradient：是否使用L2范式，如果设置为True，计算梯度时使用的是2个方向梯度的平方和开平方，如果设置为False，则使用2个方向梯度的绝对值的和；</li>
</ul>
<blockquote>
<p>函数原型2</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">edges=cv2.Canny(dx, dy, threshold1, threshold2[, edges[, L2gradient]])</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li>dx：源图像的16bit(CV_16SC1 or CV_16SC3) x方向梯度图像；</li>
<li>dy：源图像的16bit(CV_16SC1 or CV_16SC3) y方向梯度图像；</li>
<li>threshold1：迟滞阈值1；</li>
<li>threshold2：迟滞阈值2；</li>
<li>edges：目标图像；</li>
<li>L2gradient：是否使用L2范式，如果设置为True，计算梯度时使用的是2个方向梯度的平方和开平方，如果设置为False，则使用2个方向梯度的绝对值的和；</li>
</ul>
<blockquote>
<p>注意</p>
</blockquote>
<ul>
<li>第2种接口形式和第1种实现边沿检测的效果是一样的</li>
<li>第2种形式需要先计算图像的x和y方向的梯度，所以计算梯度的kernel尺寸在第2种接口中就不需要了</li>
</ul>
<h3 id="ksize差异"><a href="#ksize差异" class="headerlink" title="ksize差异"></a>ksize差异</h3><ul>
<li><p>相同的threshold值，ksize越大边沿细节越多</p>
<p> 这点和Sobel()，Scharr()，Laplacian()计算图像梯度效果是一样的。</p>
</li>
</ul>
<h3 id="迟滞阈值"><a href="#迟滞阈值" class="headerlink" title="迟滞阈值"></a>迟滞阈值</h3><p>即: $\frac{threshold1}{2}$ </p>
<p>2个迟滞阈值在函数内部会进行比较，较小者存入low_thresh</p>
<h3 id="阈值宽度"><a href="#阈值宽度" class="headerlink" title="阈值宽度"></a>阈值宽度</h3><p>即: $\left | threshold1 - threshold2 \right | $</p>
<blockquote>
<p>效果</p>
</blockquote>
<p>相同的ksize时，threshold1和threshold2的差值越小，边沿细节越多</p>
<h3 id="像素值"><a href="#像素值" class="headerlink" title="像素值"></a>像素值</h3><ul>
<li>canny() 变换后的边沿图像用直方图显示，可以看到变换后的图像是一个<em>二值图像</em>, 像素的取值为0或者255</li>
<li>Sobel()、Laplacian() 等梯度变换得到的是一个灰度图</li>
</ul>
<h3 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h3><ul>
<li>Canny() 变换中相同的 threshold 值，ksize 越大边沿细节越多；</li>
<li>threshold1 和 threshold2 的差值越小，边沿细节越多；</li>
<li>Canny() 变换后得到的是一个二值图像；</li>
<li>Canny() 第 2 种接口形式得到的图像效果和第 1 种相比几乎没有差别，因为需要先计算图像 x 和 y 方向的梯度图像，使用起来更繁杂些。</li>
</ul>
<h1 id="统计函数"><a href="#统计函数" class="headerlink" title="统计函数"></a>统计函数</h1><h2 id="非-0-值数量"><a href="#非-0-值数量" class="headerlink" title="非 0 值数量"></a>非 0 值数量</h2><blockquote>
<p>函数原型</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.countNonZero(src) -&gt; retval</span><br></pre></td></tr></table></figure>



<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：输入图像，必须为单通道图像；</li>
<li>retval：非零像素值个数</li>
</ul>
<blockquote>
<p>功能</p>
</blockquote>
<p>countNonZero()用来统计元素值为非0值的像素点个数。</p>
<h2 id="最小最大值及其位置"><a href="#最小最大值及其位置" class="headerlink" title="最小最大值及其位置"></a>最小最大值及其位置</h2><blockquote>
<p>函数原型</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.minMaxLoc(src[, mask])-&gt;minVal, maxVal, minLoc, maxLoc</span><br></pre></td></tr></table></figure>



<blockquote>
<p>功能</p>
</blockquote>
<p>minMaxLoc() 函数返回图像中的元素值的最小值和最大值，以及最小值和最大值的坐标。</p>
<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：输入图像，必须为单通道图像；</li>
<li>mask：掩码；</li>
<li>minVal, maxVal, minLoc, maxLoc：依次为最小值，最大值，最小值的坐标，最大值的坐标；</li>
</ul>
<blockquote>
<p>返回值</p>
</blockquote>
<p>返回 minLoc 和 maxLoc 的坐标位置是以 OpenCV 中 <code>(x，y)</code> 的形式组织的，但是在 numpy 中下标访问是按照 <code>array[行][列]</code> 形式，类似于 <code>array[y][x]</code> 的形式，所以 minLoc 和 maxLoc 的坐标值不能直接用于 numpy 的下标访问，需要对调后才可以使用</p>
<blockquote>
<p>注意</p>
</blockquote>
<ul>
<li>minMaxLoc()内部是按照行扫描方式，如果找到一个最小值，后面没有比这个数值更小的数值，那最小值的位置就是最开始出现的那个位置，即使后面出现了这个最小数值相等的数值，找最大值也一样</li>
</ul>
<h2 id="元素值之和"><a href="#元素值之和" class="headerlink" title="元素值之和"></a>元素值之和</h2><blockquote>
<p>函数原型</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.sumElems(src) -&gt; retval</span><br></pre></td></tr></table></figure>



<blockquote>
<p>功能</p>
</blockquote>
<p>sumElems() 统计所有元素值之和，如果有多通道，分通道计算，返回的是一个四元组，依次对应图像可能包含的第 0,1,2,3 通道，如果单通道图像则只有下标 0 对应的元素有意义，如果是 3 通道则只有前 3 个元素有意义。</p>
<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：输入图像，可以是单通道，3通道或4通道图像；</li>
<li>retval：返回的是一个4元组，分别对应各通道元素的和。</li>
</ul>
<h2 id="平均值"><a href="#平均值" class="headerlink" title="平均值"></a>平均值</h2><blockquote>
<p>函数原型</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.mean(src[, mask]) -&gt;retval</span><br></pre></td></tr></table></figure>



<blockquote>
<p>功能</p>
</blockquote>
<p>mean() 用来统计单个通道内像素值的平均值，如果有多个通道，分通道计算。</p>
<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：输入图像，可以是单通道，3 通道或 4 通道图像；</li>
<li>mask：可选的掩码；</li>
</ul>
<h2 id="平均值与标准差"><a href="#平均值与标准差" class="headerlink" title="平均值与标准差"></a>平均值与标准差</h2><blockquote>
<p>函数原型</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.meanStdDev(src[, mean[, stddev[, mask]]]) -&gt;mean, stddev</span><br></pre></td></tr></table></figure>



<blockquote>
<p>功能</p>
</blockquote>
<p>meanStdDev() 用来统计单通道内像素值的平均值和标准差，一次调用返回 2 个结果。</p>
<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：输入图像，必须为单通道图像；</li>
<li>mask：可选的掩码；</li>
<li>mean：平均值；</li>
<li>stddev：标准差；</li>
<li>meanStdDev() 返回的是一个元组，下标 0 为平均值 mean，下标 1 为标准差 stddev。</li>
</ul>
<h2 id="单行-列的极值、和、均值"><a href="#单行-列的极值、和、均值" class="headerlink" title="单行&#x2F;列的极值、和、均值"></a>单行&#x2F;列的极值、和、均值</h2><blockquote>
<p>函数原型</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.reduce(src, dim, rtype[, dst[, dtype]]) -&gt;dst</span><br></pre></td></tr></table></figure>



<blockquote>
<p>功能</p>
</blockquote>
<p>reduce 用来统计二维数组的每一行或每一列中的最小值、最大值、平均值、和。这里 reduce 的含义也可以理解为将二维矩阵压缩成一维向量，压缩后的值根据入参类型可以是最小值、最大值、平均值或者和。</p>
<blockquote>
<p>参数</p>
</blockquote>
<ul>
<li>src：源图像，可以是单通道也可以是多通道，多通道时分通道计算；</li>
<li>dim：如果为 0 表示统计每列的数据等价于压缩成行（row），如果为 1 表示统计每行的数据等价于压缩成列（column）；</li>
<li>rtype：reduce 操作的类型；</li>
<li>dst：目标图像；</li>
<li>dtype：目标图像的类型，如果不指定默认为 - 1 表示用源图像 src 的数据类型；</li>
<li>dim 参数的理解：如果为 0 表示生成新的数据将是一个行向量，所以是在每一列上操作，将单个的列压缩成一个数值从而组成一个行向量；如果为 1 则表示生成新的数据是一个列向量，在每一行上操作，将单个的行压缩成一个数值从而组成一个列向量。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2021/05/28/142/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/05/28/142/" class="post-title-link" itemprop="url">142. Linux</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-05-28 18:44:21" itemprop="dateCreated datePublished" datetime="2021-05-28T18:44:21+08:00">2021-05-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><h2 id="Linux-简介"><a href="#Linux-简介" class="headerlink" title="Linux 简介"></a>Linux 简介</h2><p><code>Linux</code> 内核最初只是由芬兰人林纳斯·托瓦兹（Linus Torvalds）在赫尔辛基大学上学时出于个人爱好而编写的。 </p>
<p><code>Linux</code> 是一套免费使用和自由传播的类 <code>Unix</code> 操作系统，是一个基于 <code>POSIX</code>（可移植操作系统接口） 和 <code>UNIX</code> 的<strong>多用户</strong>、<strong>多任务</strong>、<strong>支持多线程</strong>和<strong>多 <code>CPU</code></strong> 的操作系统。</p>
<p><code>Linux</code> 能运行主要的 <code>UNIX</code> 工具软件、应用程序和网络协议。它支持 <code>32</code> 位和 <code>64</code> 位硬件。<code>Linux</code> 继承了 <code>Unix</code> 以<strong>网络为核心</strong>的设计思想，是一个性能稳定的多用户网络操作系统。</p>
<h2 id="Linux-发行版"><a href="#Linux-发行版" class="headerlink" title="Linux 发行版"></a>Linux 发行版</h2><p>Linux 的发行版说简单点就是将 Linux 内核与应用软件做一个打包。</p>
<img data-src="/2021/05/28/142/6635bad2-0eaa-48da-9130-f567cb910e26.jpg" class="" title="6635bad2-0eaa-48da-9130-f567cb910e26">

<p>目前市面上较知名的发行版有：<code>Ubuntu</code>、<code>RedHat</code>、<code>CentOS</code>、<code>Debian</code>、<code>Fedora</code>、<code>SuSE</code>、<code>OpenSUSE</code>、<code>Arch Linux</code>、<code>SolusOS</code>、<code>kali</code>（安全渗透测试使用） 等。</p>
<img data-src="142/Linux-distribution.png" alt="Linux-distribution" style="zoom:50%;" />

<p>今天各种场合都有使用各种 Linux 发行版，从嵌入式设备到超级计算机，并且在服务器领域确定了地位，通常服务器使用 <code>LAMP</code>（<code>Linux + Apache + MySQL + PHP</code>）或 <code>LNMP</code>（<code>Linux + Nginx+ MySQL + PHP</code>）组合。</p>
<p>目前 Linux 不仅在家庭与企业中使用，并且在政府中也很受欢迎。</p>
<ul>
<li>巴西联邦政府由于支持 <code>Linux</code> 而世界闻名。</li>
<li>有新闻报道俄罗斯军队自己制造的 <code>Linux</code> 发布版的，做为 <code>G.H.ost</code> 项目已经取得成果。</li>
<li>印度的 <code>Kerala</code> 联邦计划在向全联邦的高中推广使用 <code>Linux</code>。</li>
<li>中华人民共和国为取得技术独立，在龙芯处理器中排他性地使用 <code>Linux</code>。</li>
<li>在西班牙的一些地区开发了自己的 Linux 发布版，并且在政府与教育领域广泛使用，如 <code>Extremadura</code> 地区的 <code>gnuLinEx</code> 和 Andalusia 地区的 <code>Guadalinex</code>。</li>
<li>葡萄牙同样使用自己的 Linux 发布版 <code>Caixa Mágica</code>，用于 <code>Magalh?es</code>  笔记本电脑和 <code>e-escola</code> 政府软件。</li>
<li>法国和德国同样开始逐步采用 <code>Linux</code>。</li>
</ul>
<h2 id="Linux-vs-Windows"><a href="#Linux-vs-Windows" class="headerlink" title="Linux vs Windows"></a>Linux vs Windows</h2><img data-src="/2021/05/28/142/image-20210604135436512.png" class="" title="image-20210604135436512">



<h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><p>Linux 的安装，安装步骤比较繁琐（操作系统本身也是一个软件），现在其实云服务器挺普遍的，价格也便宜，如果直接不想搭建，也可以直接买一台学习用用！</p>
<h2 id="安装CentOS（不推荐）"><a href="#安装CentOS（不推荐）" class="headerlink" title="安装CentOS（不推荐）"></a>安装CentOS（不推荐）</h2><blockquote>
<p>虚拟机安装，耗资源，在本地安装，这个不建议；</p>
</blockquote>
<p><code>Linux</code> 是一个操作系统，你也可以把自己电脑安装成双系统！建议使用虚拟机（<code>VM</code>）</p>
<ol>
<li><p>可以通过镜像进行安装！<a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/centos/">下载地址</a>，<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1ZJ411g7Kk?from=search&seid=17190108970486227301">教程</a></p>
</li>
<li><p>可以使用已经制作好的镜像！<code>CentOS7</code>网盘地址：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1EPhK9nqK9AiBmuitscVy9Q">链接</a>，提取码：<code>76x5</code>，登录密码： <code>123456</code></p>
</li>
<li><p>装 <code>VMware</code> 虚拟机软件，然后打开镜像即可使用！</p>
</li>
<li><p>安装完成后，有如下界面：</p>
<img data-src="/2021/05/28/142/image-20210604151932510.png" class="" title="image-20210604151932510">
</li>
<li><p><code>VMware</code> 使用方式</p>
<ul>
<li>点击屏幕进入虚拟机；</li>
<li><code>ctrl+alt</code>将聚焦退出虚拟机；</li>
</ul>
</li>
</ol>
<h2 id="购买云服务器（推荐）"><a href="#购买云服务器（推荐）" class="headerlink" title="购买云服务器（推荐）"></a>购买云服务器（推荐）</h2><p>虚拟机安装后占用空间，也会有些卡顿，我们作为程序员其实可以选择购买一台自己的服务器，这样的话更加接近真实线上工作；</p>
<ol>
<li><p>阿里云购买服务器：<a target="_blank" rel="noopener" href="https://www.aliyun.com/minisite/goods?userCode=0phtycgr">点击这里</a></p>
</li>
<li><p>购买完毕后，获取服务器的ip地址，重置服务器密码，就可以远程登录了</p>
</li>
<li><p>下载 <code>xShell</code> 工具，进行远程连接使用！连接成功效果如下：</p>
<img data-src="/2021/05/28/142/image-20210604135501573.png" class="" title="image-20210604135501573"></li>
</ol>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a><strong>注意事项</strong></h3><p>如果要打开端口，需要在阿里云的安全组面板中开启对应的出入规则，不然的话会被阿里拦截！</p>
<h2 id="新手"><a href="#新手" class="headerlink" title="新手"></a>新手</h2><blockquote>
<p>如果前期不好操作，可以推荐安装宝塔面板，傻瓜式管理服务器</p>
</blockquote>
<p>安装教程：<a target="_blank" rel="noopener" href="https://www.bt.cn/bbs/thread-19376-1-1.html">点击这里</a></p>
<ol>
<li><p>开启对应的端口</p>
</li>
<li><p>一键安装</p>
</li>
<li><p>安装完毕后会得到远程面板的地址，账号，密码，就可以登录了</p>
</li>
<li><p>登录之后就可以可视化的安装环境和部署网站！</p>
<img data-src="/2021/05/28/142/btdk.jpg" class="" title="btdk"></li>
</ol>
<h1 id="走近Linux系统"><a href="#走近Linux系统" class="headerlink" title="走近Linux系统"></a>走近Linux系统</h1><h2 id="开机登录"><a href="#开机登录" class="headerlink" title="开机登录"></a>开机登录</h2><p>开机会启动许多程序。它们在<code>Windows</code>叫做”<strong>服务</strong>“（<code>service</code>），在<code>Linux</code>就叫做”<strong>守护进程</strong>“（<code>daemon</code>）。</p>
<p>开机成功后，它会显示一个文本登录界面，这个界面就是我们经常看到的登录界面，在这个登录界面中会提示用户输入用户名，而用户输入的用户将作为参数传给login程序来验证用户的身份，密码是不显示的，输完回车即可！</p>
<p>一般来说，用户的登录方式有三种：</p>
<ul>
<li>命令行登录</li>
<li><code>ssh</code>登录</li>
<li>图形界面登录</li>
</ul>
<p>最高权限账户为 <code>root</code>，可以操作一切！</p>
<h2 id="关机"><a href="#关机" class="headerlink" title="关机"></a>关机</h2><p>在<code>linux</code>领域内大多用在服务器上，很少遇到关机的操作。毕竟服务器上跑一个服务是永无止境的，除非特殊情况下，不得已才会关机。</p>
<p>关机指令为：<code>shutdown</code> ；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sync</span> <span class="comment"># 将数据由内存同步到硬盘中。</span></span><br><span class="line"></span><br><span class="line">shutdown <span class="comment"># 关机指令，你可以man shutdown 来看一下帮助文档。例如你可以运行如下命令关机：</span></span><br><span class="line"></span><br><span class="line">shutdown –h 10 <span class="comment"># 这个命令告诉大家，计算机将在10分钟后关机</span></span><br><span class="line"></span><br><span class="line">shutdown –h now <span class="comment"># 立马关机</span></span><br><span class="line"></span><br><span class="line">shutdown –h 20:25 <span class="comment"># 系统会在今天20:25关机</span></span><br><span class="line"></span><br><span class="line">shutdown –h +10 <span class="comment"># 十分钟后关机</span></span><br><span class="line"></span><br><span class="line">shutdown –r now <span class="comment"># 系统立马重启</span></span><br><span class="line"></span><br><span class="line">shutdown –r +10 <span class="comment"># 系统十分钟后重启</span></span><br><span class="line"></span><br><span class="line">reboot <span class="comment"># 就是重启，等同于 shutdown –r now</span></span><br><span class="line"></span><br><span class="line">halt <span class="comment"># 关闭系统，等同于shutdown –h now 和 poweroff</span></span><br></pre></td></tr></table></figure>

<p>最后总结一下，不管是重启系统还是关闭系统，首先要运行 <strong>sync</strong> 命令，把内存中的数据写到磁盘中。</p>
<h2 id="系统目录结构"><a href="#系统目录结构" class="headerlink" title="系统目录结构"></a>系统目录结构</h2><p>登录系统后，在当前命令窗口下输入命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /</span><br></pre></td></tr></table></figure>

<p>你会看到如下图所示：</p>
<img data-src="/2021/05/28/142/image-20210604144211094.png" class="" title="image-20210604144211094">

<p>树状目录结构：（Linux的一切资源都挂载在这个 <code>/</code> 根节点下）</p>
<img data-src="/2021/05/28/142/TREEdir.png" class="" title="TREEdir">

<table>
<thead>
<tr>
<th align="center">目录</th>
<th align="center">说明</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>/bin</code></td>
<td align="center"><code>bin</code>是<code>Binary</code>的缩写, 这个目录存放着最经常使用的命令。</td>
<td align="center">不要动</td>
</tr>
<tr>
<td align="center"><code>/boot</code></td>
<td align="center">这里存放的是启动<code>Linux</code>时使用的一些核心文件，包括一些连接文件以及镜像文件。</td>
<td align="center">不要动</td>
</tr>
<tr>
<td align="center"><code>/dev</code></td>
<td align="center"><code>dev</code>是<code>Device</code>(设备)的缩写, <strong>存放的是<code>Linux</code>的外部设备</strong>，在<code>Linux</code>中访问设备的方式和访问文件的方式是相同的。</td>
<td align="center">挂载第三方设备</td>
</tr>
<tr>
<td align="center"><strong><code>/etc</code></strong></td>
<td align="center">这个目录用来存放所有的系统管理所需要的配置文件和子目录。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong><code>/home</code></strong></td>
<td align="center">用户的主目录，在<code>Linux</code>中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/lib</code></td>
<td align="center">这个目录里存放着系统最基本的动态连接共享库，其作用类似于<code>Windows</code>里的<code>DLL</code>文件。</td>
<td align="center">不要动</td>
</tr>
<tr>
<td align="center"><code>/lost+found</code></td>
<td align="center">这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。</td>
<td align="center">存放突然关机的一些文件</td>
</tr>
<tr>
<td align="center"><code>/media</code></td>
<td align="center">linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，<code>Linux</code>会把识别的设备挂载到这个目录下。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/mnt</code></td>
<td align="center">系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在<code>/mnt/</code>上，然后进入该目录就可以查看光驱里的内容了。</td>
<td align="center">挂载第三方设备，我们一般会把一些本地文件挂载在这个目录下</td>
</tr>
<tr>
<td align="center"><strong><code>/opt</code></strong></td>
<td align="center">这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/proc</code></td>
<td align="center">这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。</td>
<td align="center">不用管</td>
</tr>
<tr>
<td align="center"><strong><code>/root</code></strong></td>
<td align="center">该目录为系统管理员，也称作超级权限者的用户主目录。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/sbin</code></td>
<td align="center"><code>s</code>就是<code>Super User</code>的意思，这里存放的是系统管理员使用的系统管理程序。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/srv</code></td>
<td align="center">该目录存放一些服务启动之后需要提取的数据。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/sys</code></td>
<td align="center">这是<code>linux2.6</code>内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统 <code>sysfs</code> 。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong><code>/tmp</code></strong></td>
<td align="center">这个目录是用来存放一些临时文件的。</td>
<td align="center">用完即丢的文件，可以放在这个目录下，如：安装包</td>
</tr>
<tr>
<td align="center"><strong><code>/usr</code></strong></td>
<td align="center">这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于<code>windows</code>下的<code>program files</code>目录。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/usr/bin</code></td>
<td align="center">系统用户使用的应用程序。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/usr/sbin</code></td>
<td align="center">超级用户使用的比较高级的管理程序和系统守护程序。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/usr/src</code></td>
<td align="center">内核源代码默认的放置目录。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong><code>/var</code></strong></td>
<td align="center">这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>/run</code></td>
<td align="center">是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong><code>/www</code></strong></td>
<td align="center">存放服务器网站相关的资源，如：环境、网站项目等；</td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><ul>
<li>很多的大型项目都是部署在 <code>Linux</code> 服务器上；</li>
<li>社会的生存法则：优胜劣汰；</li>
<li>服务器都是使用命令行的，我们也是基于命令行来学习的；</li>
<li><code>Linux</code> 中没有错误就代表操作成功；</li>
<li>一切皆文件；</li>
<li>根目录： <code>/</code>，所有的文件都挂载在这个节点下；</li>
</ul>
<h3 id="目录解释"><a href="#目录解释" class="headerlink" title="目录解释"></a>目录解释</h3><ul>
<li><code>/mnt</code>： 后面会把一些本地文件挂载在这个目录下</li>
<li><code>/etc</code>：配置文件：</li>
<li><code>/home</code>：</li>
<li><code>lost+found</code>：存放 突然关机的一些文件</li>
<li><code>/opt</code>：安装额外的软件</li>
<li><code>/root</code>：</li>
<li><code>/tmp</code>：用完即丢</li>
</ul>
<h1 id="常用的基本命令"><a href="#常用的基本命令" class="headerlink" title="常用的基本命令"></a>常用的基本命令</h1><h2 id="目录管理"><a href="#目录管理" class="headerlink" title="目录管理"></a>目录管理</h2><ul>
<li>绝对路径：路径的全称，如：<code>D:\anaconda3\condabin\xxx.xxx</code></li>
<li>相对路径：比如说在 <code>condabin</code> 目录下，那这个 <code>xxx.xxx</code> 文件，对应我们的相对位置就是 <code>./xxx.xxx</code></li>
</ul>
<blockquote>
<p><code>cd</code>：切换目录命令</p>
</blockquote>
<ul>
<li><p><code>cd 目录名</code>：绝对路径：都是以 <code>/</code> 开头；相对路径：对于当前目录该如何寻找 <code>../</code> 或 <code>./</code></p>
 <img data-src="/2021/05/28/142/image-20210604160057729.png" class="" title="image-20210604160057729">
</li>
<li><p><code>./</code>：当前目录</p>
</li>
<li><p><code>cd ..</code>：返回上一级目录</p>
</li>
</ul>
<blockquote>
<p><code>ls</code>：列出目录（常常被使用）</p>
</blockquote>
<p>参数：</p>
<ul>
<li><code>-a</code>参数：all，查看全部文件，包括隐藏文件</li>
<li><code>-l</code>参数：列出所有文件，包含文件的属性和权限，没有隐藏文件</li>
</ul>
<p>实践：</p>
<img data-src="/2021/05/28/142/image-20210604155603014.png" class="" title="image-20210604155603014">



<blockquote>
<p><code>pwd</code>：显示当前用户所在的目录</p>
</blockquote>
<img data-src="/2021/05/28/142/image-20210604160519459.png" class="" title="image-20210604160519459">



<blockquote>
<p><code>mkdir</code>：创建一个目录</p>
</blockquote>
<img data-src="/2021/05/28/142/image-20210604161015647.png" class="" title="image-20210604161015647">



<blockquote>
<p><code>rmdir</code>：删除目录</p>
</blockquote>
<img data-src="/2021/05/28/142/image-20210604161147383.png" class="" title="image-20210604161147383">
<ul>
<li><code>rmdir</code> 仅能删除空的目录，如果下面存在文件，需要先删除文件；递归删除多个目录加入 <code>-p</code> 参数即可</li>
</ul>
<blockquote>
<p><code>cp</code>：复制文件或者目录</p>
</blockquote>
<ul>
<li><p><code>cp 原来的文件 目标目录或者目标目录/要改成的文件名</code> </p>
 <img data-src="/2021/05/28/142/image-20210604161714380.png" class="" title="image-20210604161714380"></li>
</ul>
<blockquote>
<p><code>rm</code>：移除文件或者目录！</p>
</blockquote>
<p>参数：</p>
<ul>
<li><code>-f</code>：忽略不存在的文件，不会出现警告，强制删除；</li>
<li><code>-r</code>：递归删除目录；</li>
<li><code>-i</code>：互动，删除询问是否删除；</li>
</ul>
<p>实践：</p>
<ul>
<li><code>rm -rf /</code>：系统中所有的文件就被删除了（删库跑路）<img data-src="/2021/05/28/142/image-20210604162213074.png" class="" title="image-20210604162213074"></li>
</ul>
<blockquote>
<p><code>mv</code>：移动文件或者目录；重命名文件</p>
</blockquote>
<p>参数：</p>
<ul>
<li><code>-f</code>：强制</li>
<li><code>-u</code>：只替换已经更新过的文件</li>
</ul>
<p>实践：</p>
<img data-src="/2021/05/28/142/image-20210604162620926.png" class="" title="image-20210604162620926">

<h1 id="基本属性"><a href="#基本属性" class="headerlink" title="基本属性"></a>基本属性</h1><h2 id="文件属性"><a href="#文件属性" class="headerlink" title="文件属性"></a>文件属性</h2><blockquote>
<p><code>root &gt; user</code></p>
</blockquote>
<p><code>Linux</code>系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。为了保护系统的安全性，<code>Linux</code>系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。</p>
<p>在Linux中我们可以使用<code>ll</code>或者<code>ls –l</code>命令来显示一个文件的属性以及文件所属的用户和组，如：</p>
<img data-src="/2021/05/28/142/image-20210604175246056.png" class="" title="image-20210604175246056">

<p>实例中，<code>boot</code>文件的第一个属性用”<code>d</code>“表示。”<code>d</code>“在<code>Linux</code>中代表该文件是一个目录文件。</p>
<p>在<code>Linux</code>中第一个字符代表这个文件是目录、文件或链接文件等等：</p>
<ul>
<li>当为[ <strong><code>d</code></strong> ]则是目录</li>
<li>当为[ <strong><code>-</code></strong> ]则是文件；</li>
<li>若是[ <strong><code>l</code></strong> ]则表示为链接文档 ( <code>link file</code> )（类似于<code>window</code>的快捷方式）；</li>
<li>若是[ <strong><code>b</code></strong> ]则表示为装置文件里面的可供储存的接口设备 ( 可随机存取装置 )；</li>
<li>若是[ <strong><code>c</code></strong> ]则表示为装置文件里面的串行端口设备，例如键盘、鼠标 ( 一次性读取装置 )。</li>
</ul>
<p>接下来的字符中，以三个为一组，且均为<code>『rwx』</code> 的三个参数的组合。</p>
<p>其中，<code>[ r ]</code>代表可读(<code>read</code>)、<code>[ w ]</code>代表可写(<code>write</code>)、<code>[ x ]</code>代表可执行(<code>execute</code>)。</p>
<p>要注意的是，这三个权限的位置不会改变，如果没有权限，就会出现减号<code>[ - ]</code>而已。</p>
<p>每个文件的属性由左边第一部分的<code>10</code>个字符来确定（如下图）：</p>
<img data-src="/2021/05/28/142/image-20210604175350535.png" class="" title="image-20210604175350535">

<p>从左至右用<code>0-9</code>这些数字来表示。</p>
<p>第0位确定文件类型，第<code>1-3</code>位确定属主（该文件的所有者）拥有该文件的权限。第<code>4-6</code>位确定属组（所有者的同组用户）拥有该文件的权限，第<code>7-9</code>位确定其他用户拥有该文件的权限。</p>
<p>其中：</p>
<p>第<code>1、4、7</code>位表示读权限，如果用”<code>r</code>“字符表示，则有读权限，如果用”<code>-</code>“字符表示，则没有读权限；</p>
<p>第<code>2、5、8</code>位表示写权限，如果用”<code>w</code>“字符表示，则有写权限，如果用”<code>-</code>“字符表示没有写权限；</p>
<p>第<code>3、6、9</code>位表示可执行权限，如果用”<code>x</code>“字符表示，则有执行权限，如果用”<code>-</code>“字符表示，则没有执行权限。</p>
<p>对于文件来说，它都有一个特定的所有者，也就是对该文件具有所有权的用户。</p>
<p>同时，在<code>Linux</code>系统中，用户是按组分类的，一个用户属于一个或多个组。</p>
<p>文件所有者以外的用户又可以分为文件所有者的同组用户和其他用户。</p>
<p>因此，<code>Linux</code>系统按文件所有者、文件所有者同组用户和其他用户来规定了不同的文件访问权限。</p>
<p>在以上实例中，<code>boot</code> 文件是一个目录文件，属主和属组都为 <code>root</code>。</p>
<h3 id="个人理解"><a href="#个人理解" class="headerlink" title="个人理解"></a>个人理解</h3><ul>
<li><p>属主：这个文件&#x2F;目录属于那个用户的</p>
</li>
<li><p>属组：这个文件&#x2F;目录属于哪个组的（属主不一定在这个组内）</p>
</li>
</ul>
<h2 id="修改文件属性"><a href="#修改文件属性" class="headerlink" title="修改文件属性"></a>修改文件属性</h2><h3 id="chgrp"><a href="#chgrp" class="headerlink" title="chgrp"></a>chgrp</h3><p>更改文件属组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chgrp</span> [-R] 属组名 文件名</span><br></pre></td></tr></table></figure>

<p><code>-R</code>：递归更改文件属组，就是在更改某个目录文件的属组时，如果加上<code>-R</code>的参数，那么该目录下的所有文件的属组都会更改。</p>
<img data-src="/2021/05/28/142/image-20210606201943710.png" class="" title="image-20210606201943710">



<h3 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h3><p>更改文件属主，也可以同时更改文件属组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> [–R] 属主名 文件名</span><br><span class="line"><span class="built_in">chown</span> [-R] 属主名：属组名 文件名</span><br></pre></td></tr></table></figure>

<img data-src="/2021/05/28/142/image-20210606202116227.png" class="" title="image-20210606202116227">



<h3 id="chmod（必须要掌握）"><a href="#chmod（必须要掌握）" class="headerlink" title="chmod（必须要掌握）"></a><em><strong>chmod</strong></em>（必须要掌握）</h3><p>更改文件9个属性</p>
<blockquote>
<p>遇到：“你没有权限操作此文件!”，就要使用 <code>chmod</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> [-R] xyz 文件或目录</span><br></pre></td></tr></table></figure>

<p><code>Linux</code>文件属性有两种设置方法，一种是数字（常用的是数字），一种是符号。</p>
<p><code>Linux</code>文件的基本权限就有九个，分别是<code>owner/group/others</code>三种身份各有自己的<code>read/write/execute</code>权限。</p>
<p>先复习一下刚刚上面提到的数据：文件的权限字符为：<code>『-rwxrwxrwx』</code>， 这九个权限是三个三个一组的！其中，我们可以使用数字来代表各个权限，各权限的分数对照表如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r:4     w:2         x:1</span><br></pre></td></tr></table></figure>

<p>每种身份(<code>owner/group/others</code>)各自的三个权限(<code>r/w/x</code>)分数是需要累加的，例如当权限为：<code>[-rwxrwx---]</code> 分数则是：</p>
<ul>
<li><code>owner = rwx = 4+2+1 = 7</code></li>
<li><code>group = rwx = 4+2+1 = 7</code></li>
<li><code>others= --- = 0+0+0 = 0</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 770 filename</span><br></pre></td></tr></table></figure>

<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><table>
<thead>
<tr>
<th align="center">权限</th>
<th align="center">命令</th>
<th align="center">对应数字</th>
<th align="center">命令</th>
</tr>
</thead>
<tbody><tr>
<td align="center">可读可写不可执行</td>
<td align="center"><code>rw-</code></td>
<td align="center">6</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">可读可写可执行</td>
<td align="center"><code>rwx</code></td>
<td align="center">7</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">文件赋予所有用户可读可写可执行权限！</td>
<td align="center"><code>rwxrwxrwx</code></td>
<td align="center">777</td>
<td align="center"><code>chmod 777 filename</code></td>
</tr>
</tbody></table>
<img data-src="/2021/05/28/142/image-20210606202520621.png" class="" title="image-20210606202520621">



<h1 id="内容查看"><a href="#内容查看" class="headerlink" title="内容查看"></a>内容查看</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><p><code>Linux</code>系统中使用以下命令来查看文件的内容：</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">说明</th>
<th align="center">备注</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong><code>cat</code></strong></td>
<td align="center">由第一行开始显示文件内容</td>
<td align="center">用来读文章，或者读取配置文件，都使用 <code>cat</code> 命令</td>
<td></td>
</tr>
<tr>
<td align="center"><code>tac</code></td>
<td align="center">从最后一行开始显示，可以看出 <code>tac</code> 是 <code>cat</code> 的倒着写！</td>
<td align="center"></td>
<td><img data-src="142/image-20210605164825483.png" alt="image-20210605164825483" style="zoom:25%;" /></td>
</tr>
<tr>
<td align="center"><strong><code>nl</code></strong></td>
<td align="center">显示的时候，顺道输出行号！</td>
<td align="center"></td>
<td><img data-src="142/image-20210605164854211.png" alt="image-20210605164854211" style="zoom:25%;" /></td>
</tr>
<tr>
<td align="center"><strong><code>more</code></strong></td>
<td align="center">一页一页的显示文件内容，带余下内容的</td>
<td align="center">空格：翻页；<code>enter</code>：向下看一行；<code>:f</code> 显示行号</td>
<td><img data-src="142/image-20210605165154807.png" alt="image-20210605165154807" style="zoom:25%;" /></td>
</tr>
<tr>
<td align="center"><code>less</code></td>
<td align="center">与 <code>more</code> 类似，但是比 <code>more</code> 更好的是，他可以往前翻页！</td>
<td align="center">空格：翻页；上下键：滚动行；<code>pageDown</code>, <code>pageUp</code>：翻动页面；<code>q</code>：退出；<code>/字符串</code>：向下查询字符串；<code>?字符串</code>：向上查询字符串；<code>n/N</code>：向下&#x2F;向上查找下一个</td>
<td><img data-src="142/image-20210605165847793.png" alt="image-20210605165847793" style="zoom:25%;" /></td>
</tr>
<tr>
<td align="center"><code>head</code></td>
<td align="center">只看头几行</td>
<td align="center">通过 <code>-n</code> 参数来控制显示几行</td>
<td><img data-src="142/image-20210605165921635.png" alt="image-20210605165921635" style="zoom:25%;" /></td>
</tr>
<tr>
<td align="center"><code>tail</code></td>
<td align="center">只看尾巴几行</td>
<td align="center">同 <code>head</code></td>
<td><img data-src="142/image-20210605170013384.png" alt="image-20210605170013384" style="zoom:25%;" /></td>
</tr>
</tbody></table>
<p>你可以使用 *<code>man [命令]</code>*来查看各个命令的使用文档，如 ：<code>man cp</code>。</p>
<ul>
<li><p>网络配置目录：<code>/etc/sysconfig/network-scripts/</code></p>
</li>
<li><p>默认网络配置文件：</p>
 <img data-src="/2021/05/28/142/image-20210605163918772.png" class="" title="image-20210605163918772">
</li>
<li><p>查看网络配置：</p>
<ul>
<li><code>win</code> : <code>ipconfig</code></li>
<li><code>linux</code> : <code>ifconfig</code></li>
</ul>
</li>
</ul>
<h2 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h2><blockquote>
<p>由第一行开始显示文件内容</p>
</blockquote>
<p>语法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> [-AbEnTv]</span><br></pre></td></tr></table></figure>

<p>选项与参数：</p>
<ul>
<li><code>-A</code> ：相当於 <code>-vET</code> 的整合选项，可列出一些特殊字符而不是空白而已；</li>
<li><code>-b</code> ：列出行号，仅针对非空白行做行号显示，空白行不标行号！</li>
<li><code>-E</code> ：将结尾的断行字节 <code>$</code> 显示出来；</li>
<li><code>-n</code> ：列印出行号，连同空白行也会有行号，与 <code>-b</code> 的选项不同；</li>
<li><code>-T</code> ：将 <code>[tab]</code> 按键以 <code>^I</code> 显示出来；</li>
<li><code>-v</code> ：列出一些看不出来的特殊字符</li>
</ul>
<p>测试：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看网络配置: 文件地址 /etc/sysconfig/network-scripts/</span></span><br><span class="line">[root@qeuroal ~]<span class="comment"># cat /etc/sysconfig/network-scripts/ifcfg-eth0</span></span><br><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br></pre></td></tr></table></figure>



<h2 id="tac"><a href="#tac" class="headerlink" title="tac"></a>tac</h2><p><code>tac</code>与<code>cat</code>命令刚好相反，文件内容从最后一行开始显示，可以看出 <code>tac</code> 是 <code>cat</code> 的倒着写！如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@qeuroal ~]<span class="comment"># tac /etc/sysconfig/network-scripts/ifcfg-eth0</span></span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">DEVICE=eth0</span><br></pre></td></tr></table></figure>



<h2 id="nl"><a href="#nl" class="headerlink" title="nl"></a>nl</h2><blockquote>
<p>显示行号</p>
</blockquote>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl [-bnw] 文件</span><br></pre></td></tr></table></figure>

<p>选项与参数：</p>
<ul>
<li><code>-b</code> ：指定行号指定的方式，主要有两种：<code>-b a</code> ：表示不论是否为空行，也同样列出行号(类似 <code>cat -n</code>)；<code>-b t</code> ：如果有空行，空的那一行不要列出行号(默认值)；</li>
<li><code>-n</code> ：列出行号表示的方法，主要有三种：<code>-n ln</code> ：行号在荧幕的最左方显示；<code>-n rn</code> ：行号在自己栏位的最右方显示，且不加 <code>0</code> ；<code>-n rz</code> ：行号在自己栏位的最右方显示，且加 <code>0</code> ；</li>
<li><code>-w</code> ：行号栏位的占用的位数。</li>
</ul>
<p>测试：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@qeuroal ~]# nl /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">1DEVICE=eth0</span><br><span class="line">2BOOTPROTO=dhcp</span><br><span class="line">3ONBOOT=yes</span><br></pre></td></tr></table></figure>



<h2 id="more"><a href="#more" class="headerlink" title="more"></a>more</h2><blockquote>
<p>一页一页翻动</p>
</blockquote>
<p>在 more 这个程序的运行过程中，你有几个按键可以按的：</p>
<ul>
<li><code>空白键 (space)</code>：代表向下翻一页；</li>
<li><code>Enter</code>   ：代表向下翻『一行』；</li>
<li><code>/字串</code>   ：代表在这个显示的内容当中，向下搜寻『字串』这个关键字；</li>
<li><code>:f</code>    ：立刻显示出档名以及目前显示的行数；</li>
<li><code>q</code>    ：代表立刻离开 more ，不再显示该文件内容。</li>
<li><code>b</code> 或 <code>[ctrl]-b</code> ：代表往回翻页，不过这动作只对文件有用，对管线无用。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@qeuroal etc]<span class="comment"># more /etc/csh.login</span></span><br><span class="line">....(中间省略)....</span><br><span class="line">--More--(28%) <span class="comment"># 重点在这一行喔！你的光标也会在这里等待你的命令</span></span><br></pre></td></tr></table></figure>



<h2 id="less"><a href="#less" class="headerlink" title="less"></a>less</h2><blockquote>
<p>一页一页翻动，以下实例输出<code>/etc/man.config</code>文件的内容：</p>
</blockquote>
<p>less运行时可以输入的命令有：</p>
<ul>
<li><code>空白键</code>  ：向下翻动一页；</li>
<li><code>[pagedown]</code>：向下翻动一页；</li>
<li><code>[pageup]</code> ：向上翻动一页；</li>
<li><code>/字串</code>  ：向下搜寻『字串』的功能；</li>
<li><code>?字串</code>  ：向上搜寻『字串』的功能；</li>
<li><code>n</code>   ：重复前一个搜寻 (与 <code>/</code> 或 <code>?</code> 有关！)</li>
<li><code>N</code>   ：反向的重复前一个搜寻 (与 <code>/</code> 或 <code>?</code> 有关！)</li>
<li><code>q</code>   ：离开 <code>less</code> 这个程序；</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@qeuroal etc]<span class="comment"># more /etc/csh.login</span></span><br><span class="line">....(中间省略)....</span><br><span class="line">:   <span class="comment"># 这里可以等待你输入命令！</span></span><br></pre></td></tr></table></figure>



<h2 id="head"><a href="#head" class="headerlink" title="head"></a>head</h2><blockquote>
<p>取出文件前面几行</p>
</blockquote>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head [-n number] 文件</span><br></pre></td></tr></table></figure>

<p>选项与参数：**<code>-n</code>** 后面接数字，代表显示几行的意思！</p>
<p>默认的情况中，显示前面 <code>10</code> 行！若要显示前 <code>20</code> 行，就得要这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@qeuroal etc]<span class="comment"># head -n 20 /etc/csh.login</span></span><br></pre></td></tr></table></figure>



<h2 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h2><blockquote>
<p>取出文件后面几行</p>
</blockquote>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail [-n number] 文件</span><br></pre></td></tr></table></figure>

<p>选项与参数：</p>
<ul>
<li><code>-n</code> ：后面接数字，代表显示几行的意思</li>
</ul>
<p>默认的情况中，显示最后 <code>10</code> 行！若要显示最后 <code>20</code> 行，就得要这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@qeuroal etc]<span class="comment"># tail -n 20 /etc/csh.login</span></span><br></pre></td></tr></table></figure>



<h2 id="拓展：Linux-链接概念（了解即可）"><a href="#拓展：Linux-链接概念（了解即可）" class="headerlink" title="拓展：Linux 链接概念（了解即可）"></a>拓展：Linux 链接概念（了解即可）</h2><p><code>Linux</code> 链接分两种：</p>
<ul>
<li>硬链接（<code>Hard Link</code>）：<code>A------B</code>:假设<code>B</code>是<code>A</code>的硬链接，那么他们两个指向了同一个文件，允许一个文件拥有多个路径，用户可以通过这种机制建立硬链接到一些重要文件上，防止误删！</li>
<li>符合链接（<code>Symbolic Link</code>）或叫软链接：类似 <code>windows</code> 下的快捷方式，即删除了源文件，快捷方式也访问不了。</li>
</ul>
<blockquote>
<p>命令</p>
</blockquote>
<ul>
<li><strong><code>ln</code></strong> 命令产生硬链接；</li>
<li><code>touch</code> 创建文件；</li>
<li><code>echo</code> 输入字符串，也可以输入到文件中；</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># ls</span></span><br><span class="line">admin</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># touch f1			# 创建一个f1文件</span></span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># ls</span></span><br><span class="line">admin  f1</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># ln f1 f2			# 创建一个硬链接f2</span></span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># ls</span></span><br><span class="line">admin  f1  f2</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># ln -s f1 f3		# 创建一个软链接（符号链接）f3</span></span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># ls</span></span><br><span class="line">admin  f1  f2  f3</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># echo &quot;hello&quot; &gt;&gt; f1	# 给f1文件中写入一段字符串</span></span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># ls</span></span><br><span class="line">admin  f1  f2  f3</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># cat f1</span></span><br><span class="line">hello</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># cat f2</span></span><br><span class="line">hello</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># ls</span></span><br><span class="line">admin  f1  f2  f3</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># cat f3</span></span><br><span class="line">hello</span><br></pre></td></tr></table></figure>

<p>删除<code>f1</code>后，查看 <code>f2</code> 和 <code>f3</code> 的区别：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># rm -rf f1</span></span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># ls</span></span><br><span class="line">admin  f2  f3</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># cat f2			# f2硬链接还在</span></span><br><span class="line">hello</span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ home]<span class="comment"># cat f3			# f3（软连接、符号链接）快捷方式失效</span></span><br><span class="line"><span class="built_in">cat</span>: f3: No such file or directory</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：只要源文件发生改变，链接文件也会发生改变</p>
</blockquote>
<h3 id="硬连接"><a href="#硬连接" class="headerlink" title="硬连接"></a><strong>硬连接</strong></h3><p>硬连接指通过索引节点来进行连接。在 <code>Linux</code> 的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(<code>Inode Index</code>)。在 <code>Linux</code> 中，多个文件名指向同一索引节点是存在的。比如：<code>A</code> 是 <code>B</code> 的硬链接（<code>A</code> 和 <code>B</code> 都是文件名），则 <code>A</code> 的目录项中的 <code>inode</code> 节点号与 <code>B</code> 的目录项中的 <code>inode</code> 节点号相同，即一个 <code>inode</code> 节点对应两个不同的文件名，两个文件名指向同一个文件，<code>A</code> 和 <code>B</code> 对文件系统来说是完全平等的。删除其中任何一个都不会影响另外一个的访问。</p>
<p>硬连接的作用是允许一个文件拥有多个有效路径名，这样用户就可以建立硬连接到重要文件，以防止“误删”的功能。其原因如上所述，因为对应该目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个连接被删除后，文件的数据块及目录的连接才会被释放。也就是说，文件真正删除的条件是与之相关的所有硬连接文件均被删除。</p>
<h3 id="软连接"><a href="#软连接" class="headerlink" title="软连接"></a><strong>软连接</strong></h3><p>另外一种连接称之为符号连接（<code>Symbolic Link</code>），也叫软连接。软链接文件有类似于 <code>Windows</code> 的快捷方式。它实际上是一个特殊的文件。在符号连接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。比如：<code>A</code> 是 <code>B</code> 的软链接（<code>A</code> 和 <code>B</code> 都是文件名），<code>A</code> 的目录项中的 <code>inode</code> 节点号与 <code>B</code> 的目录项中的 <code>inode</code> 节点号不相同，<code>A</code> 和 <code>B</code> 指向的是两个不同的 <code>inode</code>，继而指向两块不同的数据块。但是 <code>A</code> 的数据块中存放的只是 <code>B</code> 的路径名（可以根据这个找到 <code>B</code> 的目录项）。<code>A</code> 和 <code>B</code> 之间是“主从”关系，如果 <code>B</code> 被删除了，<code>A</code> 仍然存在（因为两个是不同的文件），但指向的是一个无效的链接。</p>
<h3 id="测试："><a href="#测试：" class="headerlink" title="测试："></a><strong>测试：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@qeuroal /]<span class="comment"># cd /home</span></span><br><span class="line">[root@qeuroal home]<span class="comment"># touch f1 # 创建一个测试文件f1</span></span><br><span class="line">[root@qeuroal home]<span class="comment"># ls</span></span><br><span class="line">f1</span><br><span class="line">[root@qeuroal home]<span class="comment"># ln f1 f2     # 创建f1的一个硬连接文件f2</span></span><br><span class="line">[root@qeuroal home]<span class="comment"># ln -s f1 f3   # 创建f1的一个符号连接文件f3</span></span><br><span class="line">[root@qeuroal home]<span class="comment"># ls -li       # -i参数显示文件的inode节点信息</span></span><br><span class="line">397247 -rw-r--r-- 2 root root     0 Mar 13 00:50 f1</span><br><span class="line">397247 -rw-r--r-- 2 root root     0 Mar 13 00:50 f2</span><br><span class="line">397248 lrwxrwxrwx 1 root root     2 Mar 13 00:50 f3 -&gt; f1</span><br></pre></td></tr></table></figure>

<p>从上面的结果中可以看出，硬连接文件 <code>f2</code> 与原文件 <code>f1</code> 的 <code>inode</code> 节点相同，均为 <code>397247</code>，然而符号连接文件的 <code>inode</code> 节点不同。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo 字符串输出 &gt;&gt; f1 输出到 f1文件</span></span><br><span class="line">[root@qeuroal home]<span class="comment"># echo &quot;I am f1 file&quot; &gt;&gt;f1</span></span><br><span class="line">[root@qeuroal home]<span class="comment"># cat f1</span></span><br><span class="line">I am f1 file</span><br><span class="line">[root@qeuroal home]<span class="comment"># cat f2</span></span><br><span class="line">I am f1 file</span><br><span class="line">[root@qeuroal home]<span class="comment"># cat f3</span></span><br><span class="line">I am f1 file</span><br><span class="line">[root@qeuroal home]<span class="comment"># rm -f f1</span></span><br><span class="line">[root@qeuroal home]<span class="comment"># cat f2</span></span><br><span class="line">I am f1 file</span><br><span class="line">[root@qeuroal home]<span class="comment"># cat f3</span></span><br><span class="line"><span class="built_in">cat</span>: f3: No such file or directory</span><br></pre></td></tr></table></figure>

<p>通过上面的测试可以看出：当删除原始文件 <code>f1</code> 后，硬连接 <code>f2</code> 不受影响，但是符号连接 <code>f1</code> 文件无效；</p>
<p>依此您可以做一些相关的测试，可以得到以下全部结论：</p>
<ul>
<li>删除符号连接<code>f3</code>,对<code>f1</code>,<code>f2</code>无影响；</li>
<li>删除硬连接<code>f2</code>，对<code>f1</code>,<code>f3</code>也无影响；</li>
<li>删除原文件<code>f1</code>，对硬连接<code>f2</code>没有影响，导致符号连接<code>f3</code>失效；</li>
<li>同时删除原文件<code>f1</code>,硬连接<code>f2</code>，整个文件会真正的被删除。</li>
</ul>
<h1 id="Vim编辑器"><a href="#Vim编辑器" class="headerlink" title="Vim编辑器"></a>Vim编辑器</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>Vim</code>是从 <code>vi</code> 发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。尤其是<code>Linux</code>中，必须要会使用<code>vim</code>：<em><strong>查看内容、编辑内容、保存内容</strong></em>。</p>
<p>简单的来说， vi 是老式的字处理器，不过功能已经很齐全了，但是还是有可以进步的地方。</p>
<p>vim 则可以说是程序开发者的一项很好用的工具。</p>
<p>所有的 Unix Like 系统都会内建 vi 文书编辑器，其他的文书编辑器则不一定会存在。</p>
<p>连 vim 的官方网站 (<a target="_blank" rel="noopener" href="http://www.vim.org/">http://www.vim.org</a>) 自己也说 vim 是一个程序开发工具而不是文字处理软件。</p>
<blockquote>
<p>补充：</p>
</blockquote>
<ol>
<li><code>vim</code>可以看成<code>vi</code>的升级版；</li>
<li><code>vim</code>  通过一些插件可以实现和<code>IDE</code>一样的功能；</li>
</ol>
<h2 id="Vim键盘图"><a href="#Vim键盘图" class="headerlink" title="Vim键盘图"></a>Vim键盘图</h2><img data-src="/2021/05/28/142/vi-vim-cheat-sheet-sch.gif" class="" title="vi-vim-cheat-sheet-sch">



<h2 id="三种使用模式"><a href="#三种使用模式" class="headerlink" title="三种使用模式"></a>三种使用模式</h2><p>基本上 vi&#x2F;vim 共分为三种模式，分别是<strong>命令模式（Command mode）</strong>，<strong>输入模式（Insert mode）</strong>和<strong>底线命令模式（Last line mode）</strong>。这三种模式的作用分别是：</p>
<h3 id="命令模式："><a href="#命令模式：" class="headerlink" title="命令模式："></a>命令模式：</h3><p>用户刚刚启动 vi&#x2F;vim，便进入了命令模式。</p>
<img data-src="/2021/05/28/142/image-20210606161746713.png" class="" title="image-20210606161746713">

<p>此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。</p>
<p>以下是常用的几个命令：</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">说明</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>i</strong></td>
<td align="center">切换到输入模式，以输入字符。</td>
<td align="center"><img data-src="142/image-20210606161102527.png" alt="image-20210606161102527" style="zoom:25%;" /></td>
</tr>
<tr>
<td align="center"><strong>x</strong></td>
<td align="center">删除当前光标所在处的字符。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>:</strong></td>
<td align="center">切换到底线命令模式，以在最底一行输入命令。</td>
<td align="center">如果是编辑模式，需要先退出编辑模式：<code>ESC</code></td>
</tr>
</tbody></table>
<p>若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。</p>
<p>命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。</p>
<h3 id="输入模式："><a href="#输入模式：" class="headerlink" title="输入模式："></a>输入模式：</h3><p>在命令模式下按下i就进入了输入模式。</p>
<p>在输入模式中，可以使用以下按键：</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">说明</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>字符按键以及Shift组合</strong></td>
<td align="center">输入字符</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>ENTER</strong></td>
<td align="center">回车键，换行</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>BACK SPACE</strong></td>
<td align="center">退格键，删除光标前一个字符</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>DEL</strong></td>
<td align="center">删除键，删除光标后一个字符</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>方向键</strong></td>
<td align="center">在文本中移动光标</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>HOME</strong>&#x2F;<strong>END</strong></td>
<td align="center">移动光标到行首&#x2F;行尾</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>Page Up</strong>&#x2F;<strong>Page Down</strong></td>
<td align="center">上&#x2F;下翻页</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>Insert</strong></td>
<td align="center">切换光标为输入&#x2F;替换模式，光标将变成竖线&#x2F;下划线</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>ESC</strong></td>
<td align="center">退出输入模式，切换到命令模式</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="底线命令模式"><a href="#底线命令模式" class="headerlink" title="底线命令模式"></a>底线命令模式</h3><p>在命令模式下按下:（英文冒号）就进入了底线命令模式。光标就移动到了最下面，就可以在这里输入一些底线命令了！</p>
<img data-src="/2021/05/28/142/image-20210606161320568.png" class="" title="image-20210606161320568">

<p>底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。</p>
<p>在底线命令模式中，基本的命令有（已经省略了冒号）：</p>
<ul>
<li><code>q</code> 退出程序</li>
<li><code>w</code> 保存文件</li>
</ul>
<img data-src="/2021/05/28/142/image-20210606161416643.png" class="" title="image-20210606161416643">

<p>按<code>ESC</code>键可随时退出底线命令模式。</p>
<img data-src="/2021/05/28/142/image-20210606161602743.png" class="" title="image-20210606161602743">

<p>简单的说，我们可以将这三个模式想成底下的图标来表示：</p>
<img data-src="/2021/05/28/142/vim-vi-workmodel.png" class="" title="vim-vi-workmodel">



<h3 id="体验"><a href="#体验" class="headerlink" title="体验"></a>体验</h3><p>如果你想要使用 vi 来建立一个名为 <code>test.txt</code> 的文件时，你可以这样做：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@qeuroal home]<span class="comment"># vim test.txt</span></span><br></pre></td></tr></table></figure>

<p>然后就会进入文件</p>
<p><strong>按下 i 进入输入模式(也称为编辑模式)，开始编辑文字</strong></p>
<p>在一般模式之中，只要按下 i, o, a 等字符就可以进入输入模式了！</p>
<p>在编辑模式当中，你可以发现在左下角状态栏中会出现 –INSERT- 的字样，那就是可以输入任意字符的提示。</p>
<p>这个时候，键盘上除了 <strong>Esc</strong> 这个按键之外，其他的按键都可以视作为一般的输入按钮了，所以你可以进行任何的编辑。</p>
<img data-src="142/image-20210606160732328.png" alt="image-20210606160732328" style="zoom:80%;" />

<p><strong>按下 <code>ESC</code> 按钮回到一般模式</strong></p>
<p>好了，假设我已经按照上面的样式给他编辑完毕了，那么应该要如何退出呢？是的！没错！就是给他按下 <strong>Esc</strong> 这个按钮即可！马上你就会发现画面左下角的 – INSERT – 不见了！</p>
<p>在一般模式中按下 <strong>:wq</strong> 储存后离开 vim！</p>
<p>OK! 这样我们就成功创建了一个  <code>test.txt</code> 的文件。</p>
<h2 id="Vim按键说明"><a href="#Vim按键说明" class="headerlink" title="Vim按键说明"></a>Vim按键说明</h2><p>除了上面简易范例的 <code>i</code>, <code>Esc</code>, <code>:wq</code> 之外，其实 <code>vim</code> 还有非常多的按键可以使用。</p>
<h3 id="第一部分：一般模式可用的光标移动、复制粘贴、搜索替换等"><a href="#第一部分：一般模式可用的光标移动、复制粘贴、搜索替换等" class="headerlink" title="第一部分：一般模式可用的光标移动、复制粘贴、搜索替换等"></a><strong>第一部分：一般模式可用的光标移动、复制粘贴、搜索替换等</strong></h3><table>
<thead>
<tr>
<th align="center">移动光标的方法</th>
<th align="center">说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong><code>h</code> 或 向左箭头键(<code>←</code>)</strong></td>
<td align="center">光标向左移动一个字符</td>
<td></td>
</tr>
<tr>
<td align="center"><code>j</code> 或 向下箭头键(<code>↓</code>)</td>
<td align="center">光标向下移动一个字符</td>
<td></td>
</tr>
<tr>
<td align="center"><strong><code>k</code> 或 向上箭头键(<code>↑</code>)</strong></td>
<td align="center">光标向上移动一个字符</td>
<td></td>
</tr>
<tr>
<td align="center"><strong><code>l</code> 或 向右箭头键(<code>→</code>)</strong></td>
<td align="center">光标向右移动一个字符</td>
<td></td>
</tr>
<tr>
<td align="center"><code>[Ctrl] + [f]</code></td>
<td align="center">屏幕『向下』移动一页，相当于 [Page Down]按键 (常用)</td>
<td></td>
</tr>
<tr>
<td align="center"><code>[Ctrl] + [b]</code></td>
<td align="center">屏幕『向上』移动一页，相当于 [Page Up] 按键 (常用)</td>
<td></td>
</tr>
<tr>
<td align="center"><code>[Ctrl] + [d]</code></td>
<td align="center">屏幕『向下』移动半页</td>
<td></td>
</tr>
<tr>
<td align="center"><code>[Ctrl] + [u]</code></td>
<td align="center">屏幕『向上』移动半页</td>
<td></td>
</tr>
<tr>
<td align="center"><code>+</code></td>
<td align="center">光标移动到非空格符的下一行</td>
<td></td>
</tr>
<tr>
<td align="center"><code>-</code></td>
<td align="center">光标移动到非空格符的上一行</td>
<td>配置文件中，空格较多</td>
</tr>
<tr>
<td align="center"><strong><code>n&lt; space&gt;</code></strong></td>
<td align="center">那个 n 表示『数字』，例如 20 。按下数字后再按空格键，光标会向右移动这一行的 n 个字符。</td>
<td>快捷切换光标</td>
</tr>
<tr>
<td align="center"><code>0</code> 或<code>功能键[Home]</code></td>
<td align="center">这是数字『 0 』：移动到这一行的最前面字符处 (常用)</td>
<td></td>
</tr>
<tr>
<td align="center"><code>$</code> 或<code>功能键[End]</code></td>
<td align="center">移动到这一行的最后面字符处(常用)</td>
<td></td>
</tr>
<tr>
<td align="center"><code>H</code></td>
<td align="center">光标移动到这个屏幕的最上方那一行的第一个字符</td>
<td></td>
</tr>
<tr>
<td align="center"><code>M</code></td>
<td align="center">光标移动到这个屏幕的中央那一行的第一个字符</td>
<td></td>
</tr>
<tr>
<td align="center"><code>L</code></td>
<td align="center">光标移动到这个屏幕的最下方那一行的第一个字符</td>
<td></td>
</tr>
<tr>
<td align="center"><code>G</code></td>
<td align="center">移动到这个档案的最后一行(常用)</td>
<td></td>
</tr>
<tr>
<td align="center"><code>nG</code></td>
<td align="center">n 为数字。移动到这个档案的第 n 行。例如 20G 则会移动到这个档案的第 20 行(可配合 :set nu)</td>
<td></td>
</tr>
<tr>
<td align="center"><code>gg</code></td>
<td align="center">移动到这个档案的第一行，相当于 1G 啊！(常用)</td>
<td></td>
</tr>
<tr>
<td align="center"><strong><code>n&lt; Enter&gt;</code></strong></td>
<td align="center">n 为数字。光标向下移动 n 行(常用)</td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">搜索替换</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>/word</code></strong></td>
<td>向光标之下寻找一个名称为 word 的字符串。例如要在档案内搜寻 <code>vbird</code> 这个字符串，就输入 <code>/vbird</code> 即可！(常用)</td>
</tr>
<tr>
<td align="left"><code>?word</code></td>
<td>向光标之上寻找一个字符串名称为 <code>word</code> 的字符串。</td>
</tr>
<tr>
<td align="left"><strong><code>n</code></strong></td>
<td>这个 <code>n</code> 是英文按键。代表重复前一个搜寻的动作。举例来说， 如果刚刚我们执行 <code>/vbird</code> 去向下搜寻 <code>vbird</code> 这个字符串，则按下 <code>n</code> 后，会向下继续搜寻下一个名称为 <code>vbird</code> 的字符串。如果是执行 <code>?vbird</code> 的话，那么按下 n 则会向上继续搜寻名称为 <code>vbird</code> 的字符串！</td>
</tr>
<tr>
<td align="left"><strong><code>N</code></strong></td>
<td>这个 <code>N</code> 是英文按键。与 n 刚好相反，为『反向』进行前一个搜寻动作。例如 <code>/vbird</code> 后，按下 <code>N</code> 则表示『向上』搜寻 <code>vbird</code> 。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">删除、复制与粘贴</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>x</code>, <code>X</code></td>
<td align="center">在一行字当中，<code>x</code> 为向后删除一个字符 (相当于 <code>[del]</code> 按键)， <code>X</code> 为向前删除一个字符(相当于 <code>[backspace]</code> 亦即是退格键) (常用)</td>
</tr>
<tr>
<td align="center"><code>nx</code></td>
<td align="center"><code>n</code> 为数字，连续向后删除 <code>n</code> 个字符。举例来说，我要连续删除 10 个字符， <code>『10x』</code>。</td>
</tr>
<tr>
<td align="center"><code>dd</code></td>
<td align="center">删除游标所在的那一整行(常用)</td>
</tr>
<tr>
<td align="center"><code>ndd</code></td>
<td align="center"><code>n</code> 为数字。删除光标所在的向下 <code>n</code> 行，例如 <code>20dd</code> 则是删除 <code>20</code> 行 (常用)</td>
</tr>
<tr>
<td align="center"><code>d1G</code></td>
<td align="center">删除光标所在到第一行的所有数据</td>
</tr>
<tr>
<td align="center"><code>dG</code></td>
<td align="center">删除光标所在到最后一行的所有数据</td>
</tr>
<tr>
<td align="center"><code>d$</code></td>
<td align="center">删除游标所在处，到该行的最后一个字符</td>
</tr>
<tr>
<td align="center"><code>d0</code></td>
<td align="center">那个是数字的 <code>0</code> ，删除游标所在处，到该行的最前面一个字符</td>
</tr>
<tr>
<td align="center"><code>yy</code></td>
<td align="center">复制游标所在的那一行(常用)</td>
</tr>
<tr>
<td align="center"><code>nyy</code></td>
<td align="center"><code>n</code> 为数字。复制光标所在的向下 <code>n</code> 行，例如 <code>20yy</code> 则是复制 20 行(常用)</td>
</tr>
<tr>
<td align="center"><code>y1G</code></td>
<td align="center">复制游标所在行到第一行的所有数据</td>
</tr>
<tr>
<td align="center"><code>yG</code></td>
<td align="center">复制游标所在行到最后一行的所有数据</td>
</tr>
<tr>
<td align="center"><code>y0</code></td>
<td align="center">复制光标所在的那个字符到该行行首的所有数据</td>
</tr>
<tr>
<td align="center"><code>y$</code></td>
<td align="center">复制光标所在的那个字符到该行行尾的所有数据</td>
</tr>
<tr>
<td align="center"><code>p</code>, <code>P</code></td>
<td align="center"><code>p</code> 为将已复制的数据在光标下一行贴上，<code>P</code> 则为贴在游标上一行！举例来说，我目前光标在第 <code>20</code> 行，且已经复制了 <code>10</code> 行数据。则按下 <code>p</code> 后， 那 <code>10</code> 行数据会贴在原本的 <code>20</code> 行之后，亦即由 <code>21</code> 行开始贴。但如果是按下 <code>P</code> 呢？那么原本的第 <code>20</code> 行会被推到变成 <code>30</code> 行。(常用)</td>
</tr>
<tr>
<td align="center"><code>J</code></td>
<td align="center">将光标所在行与下一行的数据结合成同一行</td>
</tr>
<tr>
<td align="center"><code>c</code></td>
<td align="center">重复删除多个数据，例如向下删除 <code>10</code> 行，<code>[ 10cj ]</code></td>
</tr>
<tr>
<td align="center"><strong><code>u</code></strong></td>
<td align="center">复原前一个动作。(常用)</td>
</tr>
<tr>
<td align="center"><code>[Ctrl]+r</code></td>
<td align="center">重做上一个动作。(常用)</td>
</tr>
</tbody></table>
<h3 id="第二部分：一般模式切换到编辑模式的可用的按钮说明"><a href="#第二部分：一般模式切换到编辑模式的可用的按钮说明" class="headerlink" title="第二部分：一般模式切换到编辑模式的可用的按钮说明"></a>第二部分：一般模式切换到编辑模式的可用的按钮说明</h3><table>
<thead>
<tr>
<th align="center">进入输入或取代的编辑模式</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong><code>i</code>, <code>I</code></strong></td>
<td align="center">进入输入模式(Insert mode)：<code>i</code> 为『从目前光标所在处输入』， <code>I</code> 为『在目前所在行的第一个非空格符处开始输入』。(常用)</td>
</tr>
<tr>
<td align="center"><code>a</code>, <code>A</code></td>
<td align="center">进入输入模式(Insert mode)：<code>a</code> 为『从目前光标所在的下一个字符处开始输入』， <code>A</code> 为『从光标所在行的最后一个字符处开始输入』。(常用)</td>
</tr>
<tr>
<td align="center"><code>o</code>, <code>O</code></td>
<td align="center">进入输入模式(Insert mode)：这是英文字母 <code>o</code> 的大小写。<code>o</code> 为『在目前光标所在的下一行处输入新的一行』；<code>O</code> 为在目前光标所在处的上一行输入新的一行！(常用)</td>
</tr>
<tr>
<td align="center"><code>r</code>, <code>R</code></td>
<td align="center">进入取代模式(Replace mode)：r 只会取代光标所在的那一个字符一次；R会一直取代光标所在的文字，直到按下 <code>ESC</code> 为止；(常用)</td>
</tr>
<tr>
<td align="center"><strong><code>[Esc]</code></strong></td>
<td align="center">退出编辑模式，回到一般模式中(常用)</td>
</tr>
</tbody></table>
<h3 id="第三部分：一般模式切换到指令行模式的可用的按钮说明"><a href="#第三部分：一般模式切换到指令行模式的可用的按钮说明" class="headerlink" title="第三部分：一般模式切换到指令行模式的可用的按钮说明"></a>第三部分：一般模式切换到指令行模式的可用的按钮说明</h3><table>
<thead>
<tr>
<th align="center">指令行的储存、离开等指令</th>
<th align="center">说明</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong><code>:w</code></strong></td>
<td align="center">将编辑的数据写入硬盘档案中(常用)</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>:w!</code></td>
<td align="center">若文件属性为『只读』时，强制写入该档案。不过，到底能不能写入， 还是跟你对该档案的档案权限有关啊！</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong><code>:q</code></strong></td>
<td align="center">离开 <code>vi</code> (常用)</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>:q!</code></td>
<td align="center">若曾修改过档案，又不想储存，使用 <code>!</code> 为强制离开不储存档案。</td>
<td align="center">注意一下啊，那个惊叹号 (<code>!</code>) 在 <code>vi</code> 当中，常常具有『强制』的意思～</td>
</tr>
<tr>
<td align="center"><strong><code>:wq</code></strong></td>
<td align="center">储存后离开，若为 <code>:wq!</code> 则为强制储存后离开 (常用)</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong><code>ZZ</code></strong></td>
<td align="center">这是大写的 <code>Z</code> 喔！若档案没有更动，则不储存离开，若档案已经被更动过，则储存后离开！</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>:w [filename]</code></td>
<td align="center">将编辑的数据储存成另一个档案（类似另存新档）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>:r [filename]</code></td>
<td align="center">在编辑的数据中，读入另一个档案的数据。亦即将 <code>『filename』</code> 这个档案内容加到游标所在行后面</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>:n1,n2 w [filename]</code></td>
<td align="center">将 <code>n1</code> 到 <code>n2</code> 的内容储存成 <code>filename</code> 这个档案。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>:! command</code></td>
<td align="center">暂时离开 vi 到指令行模式下执行 <code>command</code> 的显示结果！例如 <code>『:! ls /home』</code>即可在 <code>vi</code> 当中看 <code>/home</code> 底下以 ls 输出的档案信息！</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong><code>:set nu</code></strong></td>
<td align="center">显示行号，设定之后，会在每一行的前缀显示该行的行号</td>
<td align="center">设置行号，代码中经常会使用</td>
</tr>
<tr>
<td align="center"><code>:set nonu</code></td>
<td align="center">与 <code>set nu</code> 相反，为取消行号！</td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="账号管理"><a href="#账号管理" class="headerlink" title="账号管理"></a>账号管理</h1><p>一般在公司中国，用的应该都不是<code>root</code>账户！</p>
<h2 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h2><p>Linux系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。</p>
<p>用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。</p>
<p>每个用户账号都拥有一个唯一的用户名和各自的口令。</p>
<p>用户在登录时键入正确的用户名和口令后，就能够进入系统和自己的主目录。</p>
<p>实现用户账号的管理，要完成的工作主要有如下几个方面：</p>
<ul>
<li>用户账号的添加、删除与修改。</li>
<li>用户口令的管理。</li>
<li>用户组的管理。</li>
</ul>
<h2 id="用户账号的管理"><a href="#用户账号的管理" class="headerlink" title="用户账号的管理"></a>用户账号的管理</h2><p>用户账号的管理工作主要涉及到用户账号的添加、修改和删除。</p>
<p>添加用户账号就是在系统中创建一个新账号，然后为新账号分配用户号、用户组、主目录和登录Shell等资源。</p>
<p>属主，属组</p>
<h2 id="添加账号"><a href="#添加账号" class="headerlink" title="添加账号"></a>添加账号</h2><h3 id="useradd"><a href="#useradd" class="headerlink" title="useradd"></a>useradd</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd 选项 用户名</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li>选项 :<ul>
<li>-c comment 指定一段注释性描述。</li>
<li>-d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。</li>
<li>-g 用户组 指定用户所属的用户组。</li>
<li>-G 用户组，用户组 指定用户所属的附加组。</li>
<li>-m 使用者目录如不存在则自动建立。自动创建这个用户的主目录 <code>/home/qeuroal/</code></li>
<li>-s Shell文件 指定用户的登录Shell。</li>
<li>-u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号。</li>
</ul>
</li>
<li>用户名 :<ul>
<li>指定新账号的登录名。</li>
</ul>
</li>
</ul>
<p>测试：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此命令创建了一个用户qeuroal，其中-m选项用来为登录名qeuroal产生一个主目录 /home/qeuroal</span></span><br><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ ~]<span class="comment"># useradd -m qeuroal</span></span><br></pre></td></tr></table></figure>

<p>增加用户账号就是在<code>/etc/passwd</code>文件中为新用户增加一条记录，同时更新其他系统文件如<code>/etc/shadow</code>, <code>/etc/group</code>等。</p>
<blockquote>
<p>理解本质：<code>Linux</code>中一切皆文件，这里的添加用户说白了就是往某一个文件中写入用户的信息了！<code>/etc/passwd</code></p>
</blockquote>
<h3 id="adduser-命令添加新用户"><a href="#adduser-命令添加新用户" class="headerlink" title="adduser 命令添加新用户"></a>adduser 命令添加新用户</h3><p>在Ubuntu中，有两个命令可用于创建新的用户。分别是<code>useradd</code>和<code>adduser</code>。<a target="_blank" rel="noopener" href="https://www.myfreax.com/how-to-create-users-in-linux-using-the-useradd-command/"><code>useradd</code></a>是一个用于添加用户的最普遍命令，所有发行版都支持。</p>
<p>而<code>adduser</code>是<code>useradd</code>的友好交互式前端，<code>adduser</code>是用Perl语言编写的。我们建议如果你在编写shell脚本时使用<a target="_blank" rel="noopener" href="https://www.myfreax.com/how-to-create-users-in-linux-using-the-useradd-command/">useradd</a>添加用户。</p>
<p>如果你只是手动创建一个或者几个用户，在ubuntu中建议你使用adduser，adduser可以在一条命令完成创建用户的过程。</p>
<p>如果你需要在批量创建用户请参考我们的教程，<a target="_blank" rel="noopener" href="https://www.myfreax.com/how-to-create-users-in-linux-using-the-useradd-command/">Linux useradd命令创建用户</a>。</p>
<p>要在Ubuntu创建用户，请运行命令<code>adduser</code>，后跟用户名作为参数。例如命令<code>sudo adduser myfreax</code>将会创建用户myfreax。</p>
<p>命令将向你询问一系列的问题。密码是必需的，其他字段都是可选的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser myfreax</span><br></pre></td></tr></table></figure>

<h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><p>使用 <code>sudo useradd newuser</code> 后 <code>/home</code> 里并没有 newuser 的目录。</p>
<p>查询得知，可以用 <code>useradd -m newuser</code>，但是<code>-m</code>这个命令只有在你创建用户的时候才有用。</p>
<p>如果已经创建了用户且没有目录的话，<code>useradd -m newuser</code>是不会为用户创建目录的，也就是说必须删掉这个用户再重新<code>useradd -m newuser</code>才可以。</p>
<p><strong>但是！</strong>使用<code>adduser</code>的话直接<code>adduser username</code>也会有目录，不用像<code>useradd</code>那样用<code>-m</code>了。但是 <code>adduser</code>一创建就会要求输入密码。<code>useradd</code>创建的时候就不会要求输入密码。</p>
<h2 id="超级用户"><a href="#超级用户" class="headerlink" title="超级用户"></a>超级用户</h2><p>默认情况下，在Ubuntu，sudo组的成员被授予sudo访问权限。如果您希望新创建的用户具有sudo权限，<a target="_blank" rel="noopener" href="https://www.myfreax.com/how-linux-adds-users-to-a-group/">请将用户添加到sudo组</a>。</p>
<p>修改用户所属组的命令是<a target="_blank" rel="noopener" href="https://www.myfreax.com/usermod-command-in-linux/">usermod命令</a>，我们不建议直接修改用户主要组。这可能导致某些权限问题。最好的方式将用户追加到sudo组中。</p>
<p>因此你将使用usermod命令的<code>-aG</code>选项，添加用户到sudo组，<code>-a</code>表示追加用户到指定组，-G选项表示不要将用户从其它组中移除。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG sudo username</span><br></pre></td></tr></table></figure>

<h2 id="删除帐号"><a href="#删除帐号" class="headerlink" title="删除帐号"></a>删除帐号</h2><h3 id="userdel命令删除用户"><a href="#userdel命令删除用户" class="headerlink" title="userdel命令删除用户"></a>userdel命令删除用户</h3><p>如果一个用户的账号不再使用，可以从系统中删除。</p>
<p>删除用户账号就是要将&#x2F;<code>etc/passwd</code>等系统文件中的该用户记录删除，必要时还删除用户的主目录。</p>
<p>删除一个已有的用户账号使用<code>userdel</code>命令，其格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel 选项 用户名</span><br></pre></td></tr></table></figure>

<p>常用的选项是 <strong>-r</strong>，它的作用是把用户的主目录一起删除。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp16w4b9baac6xlzfcdmZ ~]<span class="comment"># useradd -m qeuroal</span></span><br></pre></td></tr></table></figure>

<p>此命令删除用户<code>qeuroal</code>在系统文件中（主要是<code>/etc/passwd</code>, <code>/etc/shadow</code>, <code>/etc/group</code>等）的记录，同时删除用户的主目录。</p>
<h3 id="deluser-命令删除用户"><a href="#deluser-命令删除用户" class="headerlink" title="deluser 命令删除用户"></a>deluser 命令删除用户</h3><p>如果不再需要用户，可以从命令行或通过GUI删除它。在ubuntu中删除用户方式也是有两种。</p>
<p>您可以使用两个命令来删除用户，分别是<code>userdel</code>和<code>deluser</code>。在Ubuntu，建议您使用<code>deluser</code>命令，因为它比<code>userdel</code>更友好。</p>
<p>同样在脚本中，我们建议你使用<code>userdel</code>而不是<code>deluser</code>。因为其它发行版不存在<code>deluser</code>。<code>deluser</code>仅在基于Ubuntu的发行版存在。</p>
<p><code>deluser</code>仅在指定用户参数时，<code>deluser</code>将删除用户而不删除用户文件。如果你需要用户的家目录和邮件等信息请使用<code>--remove-home</code>选项。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo deluser username</span><br><span class="line"></span><br><span class="line">sudo deluser --remove-home username</span><br></pre></td></tr></table></figure>

<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><p>删除用户的操作分为 3 步：</p>
<ol>
<li>执行<code>userdel</code>：<code>sudo userdel dongyuanxin_2016150127</code></li>
<li>删除用户目录：<code>sudo rm -rf /home/dongyuanxin_2016150127</code></li>
<li>删除用户权限相关配置：删除或者注释掉<code>/etc/sudoers</code>中关于要删除用户的配置，否则无法再次创建同名用户。</li>
</ol>
<h2 id="修改帐号"><a href="#修改帐号" class="headerlink" title="修改帐号"></a>修改帐号</h2><p>修改用户账号就是根据实际情况更改用户的有关属性，如用户号、主目录、用户组、登录Shell等。</p>
<p>修改已有用户的信息使用<code>usermod</code>命令，其格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod 选项 用户名</span><br></pre></td></tr></table></figure>

<p>常用的选项包括<code>-c</code>, <code>-d</code>, <code>-m</code>, <code>-g</code>, <code>-G</code>, <code>-s</code>, <code>-u</code>以及<code>-o</code>等，这些选项的意义与<code>useradd</code>命令中的选项一样，可以为用户指定新的资源值。</p>
<p>例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># usermod -s /bin/ksh -d /home/z –g developer qeuroal</span></span><br></pre></td></tr></table></figure>

<p>修改完毕后查看配置文件即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/passwd</span><br></pre></td></tr></table></figure>

<p>此命令将用户<code>qeuroal</code>的登录<code>Shell</code>修改为<code>ksh</code>，主目录改为&#x2F;home&#x2F;z，用户组改为developer。</p>
<h2 id="Linux下如何切换用户"><a href="#Linux下如何切换用户" class="headerlink" title="Linux下如何切换用户"></a>Linux下如何切换用户</h2><p><code>root</code> 用户</p>
<img data-src="/2021/05/28/142/image-20210606171708471.png" class="" title="image-20210606171708471">

<ol>
<li><p>切换用户的命令为：<code>su username</code> 【<code>username</code>是你的用户名哦】</p>
<img data-src="/2021/05/28/142/image-20210606172015901.png" class="" title="image-20210606172015901">
</li>
<li><p>从普通用户切换到root用户，还可以使用命令：<code>sudo su</code></p>
</li>
<li><p>在终端输入<code>exit</code>或<code>logout</code>或使用快捷方式<code>ctrl+d</code>，可以退回到原来用户，其实<code>ctrl+d</code>也是执行的<code>exit</code>命令</p>
<img data-src="/2021/05/28/142/image-20210606172102332.png" class="" title="image-20210606172102332">
</li>
<li><p>在切换用户时，如果想在切换用户之后使用新用户的工作环境，可以在<code>su</code>和<code>username</code>之间加-，例如：【<code>su - root</code>】</p>
</li>
</ol>
<table>
<thead>
<tr>
<th align="center">符号</th>
<th align="center">说明</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>$</code></td>
<td align="center">表示普通用户</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>#</code></td>
<td align="center">表示超级用户，也就是<code>root</code>用户</td>
<td align="center"></td>
</tr>
</tbody></table>
<blockquote>
<p>补充</p>
</blockquote>
<p>在阿里云买的服务器是一段随机字符串，可以通过以下方式修改：</p>
<img data-src="/2021/05/28/142/image-20210606172515325.png" class="" title="image-20210606172515325">



<h2 id="用户口令的管理"><a href="#用户口令的管理" class="headerlink" title="用户口令的管理"></a>用户口令的管理</h2><p>用户管理的一项重要内容是用户口令的管理。用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用，即使是指定空口令。</p>
<p>指定和修改用户口令的Shell命令是<code>passwd</code>。超级用户（<code>root</code>）可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。</p>
<p><code>linux</code>上输入密码不会显示，正常输入即可，并不是系统的问题！</p>
<p>在公司中，一般拿不到公司服务器的<code>root</code>权限，都是一些分配的账号！</p>
<h3 id="超级用户："><a href="#超级用户：" class="headerlink" title="超级用户："></a>超级用户：</h3><p>命令的格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd 选项 用户名</span><br></pre></td></tr></table></figure>

<p>可使用的选项：</p>
<ul>
<li><code>-l</code> 锁定口令，即禁用账号。</li>
<li><code>-u</code> 口令解锁。</li>
<li><code>-d</code> 使账号无口令。</li>
<li><code>-</code>  强迫用户下次登录时修改口令。</li>
</ul>
<h3 id="普通用户名"><a href="#普通用户名" class="headerlink" title="普通用户名:"></a>普通用户名:</h3><p>修改当前用户的口令。</p>
<p>例如，假设当前用户是<code>qeuroal</code>，则下面的命令修改该用户自己的口令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ passwd</span><br><span class="line">Old password:******</span><br><span class="line">New password:*******</span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure>

<p>如果是超级用户，可以用下列形式指定任何用户的口令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># passwd qeuroal</span><br><span class="line">New password:*******</span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure>

<p>普通用户修改自己的口令时，<code>passwd</code>命令会先询问原口令，验证后再要求用户输入两遍新口令，如果两次输入的口令一致，则将这个口令指定给用户；而超级用户为用户指定口令时，就不需要知道原口令。</p>
<p>为了系统安全起见，用户应该选择比较复杂的口令，例如最好使用8位长的口令，口令中包含有大写、小写字母和数字，并且应该与姓名、生日等不相同。</p>
<h3 id="锁定账户"><a href="#锁定账户" class="headerlink" title="锁定账户"></a>锁定账户</h3><p>例如：<code>test_user</code>辞职了，冻结这个账号，一旦冻结，这个人就登录不上系统了。</p>
<p>为用户指定空口令时，执行下列形式的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd -d test_user   <span class="comment"># 没有密码不能登录</span></span><br></pre></td></tr></table></figure>

<p>此命令将用户 <code>test_user</code>的口令删除，这样用户 <code>test_user</code>下一次登录时，系统就不再允许该用户登录了。</p>
<p><code>passwd</code> 命令还可以用 -l(lock) 选项锁定某一用户，使其不能登录，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd -l test_user	<span class="comment"># 锁定之后这个用户就不能登录了</span></span><br></pre></td></tr></table></figure>

<img data-src="/2021/05/28/142/image-20210606173734763.png" class="" title="image-20210606173734763">

<p>在公司中一般触及不到 <code>root</code> 用户！作为一个开发一般拿不到！如果拿到<code>root</code>账号后，首先把自己的权限提到最高，自己用户的组提到<code>root</code>组。</p>
<h1 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h1><p>属主、属组</p>
<p>每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理（开发、测试、运维、<code>root</code>）。不同<code>Linux</code> 系统对用户组的规定有所不同，如<code>Linux</code>下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。</p>
<p>用户组的管理涉及用户组的添加、删除和修改。<strong>组的增加、删除和修改实际上就是对<code>/etc/group</code>文件的更新。</strong></p>
<h2 id="增加用户组"><a href="#增加用户组" class="headerlink" title="增加用户组"></a>增加用户组</h2><p>增加一个新的用户组使用<code>groupadd</code>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd 选项 用户组</span><br></pre></td></tr></table></figure>

<p>可以使用的选项有：</p>
<ul>
<li><code>-g GID</code> 指定新用户组的组标识号（<code>GID</code>）。</li>
<li><code>-o</code> 一般与<code>-g</code>选项同时使用，表示新用户组的<code>GID</code>可以与系统已有用户组的<code>GID</code>相同。</li>
</ul>
<p>实例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># groupadd group1</span><br></pre></td></tr></table></figure>

<p>此命令向系统中增加了一个新组<code>group1</code>，新组的组标识号是在当前已有的最大组标识号的基础上加1。</p>
<p>创建完一个用户组后可以得到一个组的 <code>id</code>，这个 <code>id</code> 是可以指定的！</p>
<p>实例2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># groupadd -g 101 group2</span><br></pre></td></tr></table></figure>

<p>此命令向系统中增加了一个新组<code>group2</code>，同时指定新组的组标识号是<code>101</code>。</p>
<p>如果不指定就是自增 <code>1</code></p>
<h2 id="删除用户组"><a href="#删除用户组" class="headerlink" title="删除用户组"></a>删除用户组</h2><p>如果要删除一个已有的用户组，使用<code>groupdel</code>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel 用户组</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># groupdel group1</span><br></pre></td></tr></table></figure>

<p>此命令从系统中删除组<code>group1</code>。</p>
<h2 id="修改用户组的属性"><a href="#修改用户组的属性" class="headerlink" title="修改用户组的属性"></a>修改用户组的属性</h2><p>使用<code>groupmod</code>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod 选项 用户组</span><br></pre></td></tr></table></figure>

<p>常用的选项有：</p>
<ul>
<li><code>-g GID</code> 为用户组指定新的组标识号。</li>
<li><code>-o</code> 与<code>-g</code>选项同时使用，用户组的新<code>GID</code>可以与系统已有用户组的<code>GID</code>相同。</li>
<li><code>-n</code> 新用户组 将用户组的名字改为新名字</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 此命令将组group2的组标识号修改为102。</span><br><span class="line">groupmod -g 102 group2</span><br><span class="line"></span><br><span class="line"># 将组group2的标识号改为10000，组名修改为group3。</span><br><span class="line">groupmod –g 10000 -n group3 group2</span><br></pre></td></tr></table></figure>



<h2 id="拓展：文件的查看"><a href="#拓展：文件的查看" class="headerlink" title="拓展：文件的查看"></a>拓展：文件的查看</h2><h3 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="&#x2F;etc&#x2F;passwd"></a>&#x2F;etc&#x2F;passwd</h3><p>完成用户管理的工作有许多种方法，但是每一种方法实际上都是对有关的系统文件进行修改。</p>
<p>与用户和用户组相关的信息都存放在一些系统文件中，这些文件包括<code>/etc/passwd</code>, <code>/etc/shadow</code>, <code>/etc/group</code>等。</p>
<p>下面分别介绍这些文件的内容。</p>
<p><strong><code>/etc/passwd</code>文件是用户管理工作涉及的最重要的一个文件。</strong></p>
<p><strong>Linux系统中的每个用户都在<code>/etc/passwd</code>文件中有一个对应的记录行，它记录了这个用户的一些基本属性（主目录、属组）。</strong></p>
<p>这个文件对所有用户都是可读的。它的内容类似下面的例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">＃ cat /etc/passwd</span><br><span class="line"></span><br><span class="line">root:x:0:0:Superuser:/:</span><br><span class="line">daemon:x:1:1:System daemons:/etc:</span><br><span class="line">bin:x:2:2:Owner of system commands:/bin:</span><br><span class="line">sys:x:3:3:Owner of system files:/usr/sys:</span><br><span class="line">adm:x:4:4:System accounting:/usr/adm:</span><br><span class="line">uucp:x:5:5:UUCP administrator:/usr/lib/uucp:</span><br><span class="line">auth:x:7:21:Authentication administrator:/tcb/files/auth:</span><br><span class="line">cron:x:9:16:Cron daemon:/usr/spool/cron:</span><br><span class="line">listen:x:37:4:Network daemon:/usr/net/nls:</span><br><span class="line">lp:x:71:18:Printer administrator:/usr/spool/lp:</span><br></pre></td></tr></table></figure>

<p>从上面的例子我们可以看到，<code>/etc/passwd</code>中一行记录对应着一个用户，每行记录又被冒号(<code>:</code>)分隔为7个字段，其格式和具体含义如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户名:口令（登录密码，我们不可见）:用户标识号:组标识号:注释性描述:主目录:登录Shell</span><br></pre></td></tr></table></figure>

<ol>
<li><p>“用户名”是代表用户账号的字符串。</p>
<p>通常长度不超过8个字符，并且由大小写字母和&#x2F;或数字组成。登录名中不能有冒号(:)，因为冒号在这里是分隔符。</p>
<p>为了兼容起见，登录名中最好不要包含点字符(.)，并且不使用连字符(-)和加号(+)打头。</p>
</li>
<li><p>“口令”一些系统中，存放着加密后的用户口令字。</p>
<p>虽然这个字段存放的只是用户口令的加密串，不是明文，但是由于<code>/etc/passwd</code>文件对所有用户都可读，所以这仍是一个安全隐患。因此，现在许多<code>Linux</code> 系统（如<code>SVR4</code>）都使用了shadow技术，<strong>把真正的加密后的用户口令字存放到<code>/etc/shadow</code>文件中</strong>，而在<code>/etc/passwd</code>文件的口令字段中只存放一个特殊的字符，例如“<code>x</code>”或者“<code>*</code>”。</p>
</li>
<li><p>“用户标识号”是一个整数，系统内部用它来标识用户。</p>
<p>一般情况下它与用户名是一一对应的。如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户，但是它们可以有不同的口令、不同的主目录以及不同的登录<code>Shell</code>等。</p>
<p>通常用户标识号的取值范围是<code>0～65 535</code>。0是超级用户<code>root</code>的标识号，<code>1～99</code>由系统保留，作为管理账号，普通用户的标识号从<code>100</code>开始。在<code>Linux</code>系统中，这个界限是<code>500</code>。</p>
</li>
<li><p>“组标识号”字段记录的是用户所属的用户组。</p>
<p>它对应着<code>/etc/group</code>文件中的一条记录。</p>
</li>
<li><p>“注释性描述”字段记录着用户的一些个人情况。</p>
<p>例如用户的真实姓名、电话、地址等，这个字段并没有什么实际的用途。在不同的<code>Linux</code> 系统中，这个字段的格式并没有统一。在许多<code>Linux</code>系统中，这个字段存放的是一段任意的注释性描述文字，用作<code>finger</code>命令的输出。</p>
</li>
<li><p>“主目录”，也就是用户的起始工作目录。</p>
<p>它是用户在登录到系统之后所处的目录。在大多数系统中，各用户的主目录都被组织在同一个特定的目录下，而用户主目录的名称就是该用户的登录名。各用户对自己的主目录有读、写、执行（搜索）权限，其他用户对此目录的访问权限则根据具体情况设置。</p>
</li>
<li><p>用户登录后，要启动一个进程，负责将用户的操作传给内核，这个进程是用户登录到系统后运行的命令解释器或某个特定的程序，即Shell。</p>
<p><code>Shell</code>是用户与<code>Linux</code>系统之间的接口。<code>Linux</code>的<code>Shell</code>有许多种，每种都有不同的特点。常用的有<code>sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)</code>等。</p>
<p>系统管理员可以根据系统情况和用户习惯为用户指定某个<code>Shell</code>。如果不指定<code>Shell</code>，那么系统使用<code>sh</code>为默认的登录<code>Shell</code>，即这个字段的值为<code>/bin/sh</code>。</p>
<p>用户的登录<code>Shell</code>也可以指定为某个特定的程序（此程序不是一个命令解释器）。</p>
<p>利用这一特点，我们可以限制用户只能运行指定的应用程序，在该应用程序运行结束后，用户就自动退出了系统。有些<code>Linux</code> 系统要求只有那些在系统中登记了的程序才能出现在这个字段中。</p>
</li>
<li><p>系统中有一类用户称为伪用户（<code>pseudo users</code>）</p>
<p>这些用户在<code>/etc/passwd</code>文件中也占有一条记录，但是不能登录，因为它们的登录<code>Shell</code>为空。它们的存在主要是方便系统管理，满足相应的系统进程对文件属主的要求。</p>
<p>常见的伪用户如下所示：</p>
<table>
<thead>
<tr>
<th>伪用户</th>
<th>含 义</th>
</tr>
</thead>
<tbody><tr>
<td>bin</td>
<td>拥有可执行的用户命令文件</td>
</tr>
<tr>
<td>sys</td>
<td>拥有系统文件</td>
</tr>
<tr>
<td>adm</td>
<td>拥有帐户文件</td>
</tr>
<tr>
<td>uucp</td>
<td>UUCP使用</td>
</tr>
<tr>
<td>lp</td>
<td>lp或lpd子系统使用</td>
</tr>
<tr>
<td>nobody</td>
<td>NFS使用</td>
</tr>
</tbody></table>
</li>
</ol>
<h3 id="etc-shadow"><a href="#etc-shadow" class="headerlink" title="&#x2F;etc&#x2F;shadow"></a>&#x2F;etc&#x2F;shadow</h3><p>1、除了上面列出的伪用户外，还有许多标准的伪用户，例如：<code>audit</code>, <code>cron</code>, <code>mail</code>, <code>usenet</code>等，它们也都各自为相关的进程和文件所需要。</p>
<p>由于<code>/etc/passwd</code>文件是所有用户都可读的，如果用户的密码太简单或规律比较明显的话，一台普通的计算机就能够很容易地将它破解，因此对安全性要求较高的Linux系统都把加密后的口令字分离出来，单独存放在一个文件中，这个文件是<code>/etc/shadow</code>文件。有超级用户才拥有该文件读权限，这就保证了用户密码的安全性。</p>
<p>**2、<code>/etc/shadow</code><strong>中的记录行与</strong><code>/etc/passwd</code>**中的一一对应，它由<code>pwconv</code>命令根据<code>/etc/passwd</code>中的数据自动产生</p>
<p>它的文件格式与<code>/etc/passwd</code>类似，由若干个字段组成，字段之间用”:”隔开。这些字段是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志</span><br></pre></td></tr></table></figure>

<ol>
<li>“登录名”是与<code>/etc/passwd</code>文件中的登录名相一致的用户账号</li>
<li>“口令”字段存放的是加密后的用户口令字，长度为13个字符。如果为空，则对应用户没有口令，登录时不需要口令；如果含有不属于集合 <code>&#123; ./0-9A-Za-z &#125;</code>中的字符，则对应的用户不能登录。</li>
<li>“最后一次修改时间”表示的是从某个时刻起，到用户最后一次修改口令时的天数。时间起点对不同的系统可能不一样。例如在<code>SCO Linux</code> 中，这个时间起点是1970年1月1日。</li>
<li>“最小时间间隔”指的是两次修改口令之间所需的最小天数。</li>
<li>“最大时间间隔”指的是口令保持有效的最大天数。</li>
<li>“警告时间”字段表示的是从系统开始警告用户到用户密码正式失效之间的天数。</li>
<li>“不活动时间”表示的是用户没有登录活动但账号仍能保持有效的最大天数。</li>
<li>“失效时间”字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。</li>
</ol>
<h3 id="etc-group"><a href="#etc-group" class="headerlink" title="&#x2F;etc&#x2F;group"></a>&#x2F;etc&#x2F;group</h3><p><strong>用户组的所有信息都存放在<code>/etc/group</code>文件中。</strong></p>
<p>将用户分组是<code>Linux</code> 系统中对用户进行管理及控制访问权限的一种手段。</p>
<p>每个用户都属于某个用户组；一个组中可以有多个用户，一个用户也可以属于不同的组。</p>
<p>当一个用户同时是多个组中的成员时，在<code>/etc/passwd</code>文件中记录的是用户所属的主组，也就是登录时所属的默认组，而其他组称为附加组。</p>
<p>用户要访问属于附加组的文件时，必须首先使用<code>newgrp</code>命令使自己成为所要访问的组中的成员。</p>
<p>用户组的所有信息都存放在&#x2F;etc&#x2F;group文件中。此文件的格式也类似于<code>/etc/passwd</code>文件，由冒号(:)隔开若干个字段，这些字段有：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">组名:口令:组标识号:组内用户列表</span><br></pre></td></tr></table></figure>

<ol>
<li>“组名”是用户组的名称，由字母或数字构成。与<code>/etc/passwd</code>中的登录名一样，组名不应重复。</li>
<li>“口令”字段存放的是用户组加密后的口令字。一般<code>Linux</code> 系统的用户组都没有口令，即这个字段一般为空，或者是*。(当然,你看不到明文密码)</li>
<li>“组标识号”与用户标识号类似，也是一个整数，被系统内部用来标识组。即: 组的ID, GID</li>
<li><strong>“组内用户列表”是属于这个组的所有用户的列表&#x2F;b]，不同用户之间用逗号(<code>,</code>)分隔。这个用户组可能是用户的主组，也可能是附加组。</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adm:x:4:syslog,admin</span><br></pre></td></tr></table></figure>
<p>以下为各字段的说明：</p>
<ul>
<li>adm 为组名称；</li>
<li>x 代表密码字段（当然你不会看到明文的密码）；</li>
<li>4 是组的ID即GID；</li>
<li>syslog 和 admin 是属于组 adm 中的用户。</li>
</ul>
<h3 id="切换组"><a href="#切换组" class="headerlink" title="切换组"></a>切换组</h3><p>如果一个用户同时属于多个用户组，那么用户可以在用户组之间切换，以便具有其他用户组的权限。</p>
<p>用户可以在登录后，使用命令<code>newgrp</code>切换到其他用户组，这个命令的参数就是目的用户组。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ newgrp root</span><br></pre></td></tr></table></figure>

<p>这条命令将当前用户切换到<code>root</code>用户组，前提条件是<code>root</code>用户组确实是该用户的主组或附加组。</p>
<h1 id="磁盘管理"><a href="#磁盘管理" class="headerlink" title="磁盘管理"></a>磁盘管理</h1><h2 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h2><p>Linux磁盘管理好坏直接关系到整个系统的性能问题。</p>
<p>Linux磁盘管理常用命令为 <code>df</code>、<code>du</code>。</p>
<ul>
<li><code>df</code> ：列出文件系统的整体磁盘使用量</li>
<li><code>du</code>：检查磁盘空间使用量</li>
</ul>
<h2 id="df"><a href="#df" class="headerlink" title="df"></a>df</h2><p><code>df</code>：列出文件系统整体的磁盘使用量</p>
<p><code>df</code>命令参数功能：检查文件系统的磁盘空间占用情况。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df [-ahikHTm] [目录或文件名]</span><br></pre></td></tr></table></figure>

<p>选项与参数：</p>
<ul>
<li>-a ：列出所有的文件系统，包括系统特有的 <code>/proc</code> 等文件系统；</li>
<li>-k ：以 <code>KBytes</code> 的容量显示各文件系统；</li>
<li>-m ：以 <code>MBytes</code> 的容量显示各文件系统；</li>
<li>-h ：以人们较易阅读的 <code>GBytes</code>, <code>MBytes</code>, <code>KBytes</code> 等格式自行显示；</li>
<li>-H ：以 <code>M=1000K</code> 取代 <code>M=1024K</code> 的进位方式；</li>
<li>-T ：显示文件系统类型, 连同该 <code>partition</code> 的 <code>filesystem</code> 名称 (例如 <code>ext3</code>) 也列出；</li>
<li>-i ：不用硬盘容量，而以 <code>inode</code> 的数量来显示</li>
</ul>
<p>测试：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"># 将系统内所有的文件系统列出来！</span><br><span class="line"># 在 Linux 底下如果 df 没有加任何选项</span><br><span class="line"># 那么默认会将系统内所有的 (不含特殊内存内的文件系统与 swap) 都以 1 Kbytes 的容量来列出来！</span><br><span class="line"># Mounted on: 挂载目录</span><br><span class="line">[root@qeuroal /]# df</span><br><span class="line">Filesystem     1K-blocks   Used Available Use% Mounted on</span><br><span class="line">devtmpfs          889100       0    889100   0% /dev</span><br><span class="line">tmpfs             899460     704    898756   1% /dev/shm</span><br><span class="line">tmpfs             899460     496    898964   1% /run</span><br><span class="line">tmpfs             899460       0    899460   0% /sys/fs/cgroup</span><br><span class="line">/dev/vda1       41152812 6586736  32662368  17% /</span><br><span class="line">tmpfs             179896       0    179896   0% /run/user/0</span><br><span class="line"># 将容量结果以易读的容量格式（M/G）显示出来</span><br><span class="line">[root@qeuroal /]# df -h</span><br><span class="line">Filesystem     Size Used Avail Use% Mounted on</span><br><span class="line">devtmpfs       869M     0 869M   0% /dev</span><br><span class="line">tmpfs           879M 708K 878M   1% /dev/shm</span><br><span class="line">tmpfs           879M 496K 878M   1% /run</span><br><span class="line">tmpfs           879M     0 879M   0% /sys/fs/cgroup</span><br><span class="line">/dev/vda1       40G  6.3G   32G  17% /</span><br><span class="line">tmpfs           176M     0 176M   0% /run/user/0</span><br><span class="line"># 将系统内的所有特殊文件格式及名称都列出来</span><br><span class="line">[root@qeuroal /]# df -aT</span><br><span class="line">Filesystem     Type       1K-blocks   Used Available Use% Mounted on</span><br><span class="line">sysfs         sysfs               0       0         0    - /sys</span><br><span class="line">proc           proc                0       0         0    - /proc</span><br><span class="line">devtmpfs       devtmpfs       889100       0    889100   0% /dev</span><br><span class="line">securityfs     securityfs          0       0         0    - /sys/kernel/security</span><br><span class="line">tmpfs         tmpfs          899460     708    898752   1% /dev/shm</span><br><span class="line">devpts         devpts              0       0         0    - /dev/pts</span><br><span class="line">tmpfs         tmpfs          899460     496    898964   1% /run</span><br><span class="line">tmpfs         tmpfs          899460       0    899460   0% /sys/fs/cgroup</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/systemd</span><br><span class="line">pstore         pstore              0       0         0    - /sys/fs/pstore</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/freezer</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/cpuset</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/hugetlb</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/blkio</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/net_cls,net_prio</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/memory</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/pids</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/cpu,cpuacct</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/devices</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/perf_event</span><br><span class="line">configfs       configfs            0       0         0    - /sys/kernel/config</span><br><span class="line">/dev/vda1     ext4         41152812 6586748  32662356  17% /</span><br><span class="line">systemd-1      -                   -       -         -    - /proc/sys/fs/binfmt_misc</span><br><span class="line">mqueue         mqueue              0       0         0    - /dev/mqueue</span><br><span class="line">debugfs       debugfs             0       0         0    - /sys/kernel/debug</span><br><span class="line">hugetlbfs     hugetlbfs           0       0         0    - /dev/hugepages</span><br><span class="line">tmpfs         tmpfs          179896       0    179896   0% /run/user/0</span><br><span class="line">binfmt_misc   binfmt_misc         0       0         0    - /proc/sys/fs/binfmt_misc</span><br><span class="line"># 将 /etc 底下的可用的磁盘容量以易读的容量格式显示</span><br><span class="line"></span><br><span class="line">[root@qeuroal /]# df -h /etc</span><br><span class="line">Filesystem     Size Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1       40G  6.3G   32G  17% /</span><br></pre></td></tr></table></figure>



<h2 id="du"><a href="#du" class="headerlink" title="du"></a>du</h2><p><code>du</code>：检查当前磁盘空间使用量</p>
<p><code>Linux</code> <code>du</code>命令也是查看使用空间的，但是与<code>df</code>命令不同的是<code>Linux</code> <code>du</code>命令是对文件和目录磁盘使用的空间的查看，还是和<code>df</code>命令有一些区别的，这里介绍<code>Linux</code> <code>du</code>命令。</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du [-ahskm] 文件或目录名称</span><br></pre></td></tr></table></figure>

<p>选项与参数：</p>
<ul>
<li><code>-a</code> ：列出所有的文件与目录容量，可以看到子文件夹，因为默认仅统计目录底下的文件量而已。</li>
<li><code>-h</code> ：以人们较易读的容量格式 (<code>G/M</code>) 显示；</li>
<li><code>-s</code> ：列出总量而已，而不列出每个各别的目录占用容量；</li>
<li><code>-S</code> ：不包括子目录下的总计，与 <code>-s</code> 有点差别。</li>
<li><code>-k</code> ：以 <code>KBytes</code> 列出容量显示；</li>
<li><code>-m</code> ：以 <code>MBytes</code> 列出容量显示；</li>
</ul>
<p>测试：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 只列出当前目录下的所有文件夹容量（包括隐藏文件夹）:</span><br><span class="line"># 直接输入 du 没有加任何选项时，则 du 会分析当前所在目录的文件与目录所占用的硬盘空间。</span><br><span class="line">[root@qeuroal home]# du</span><br><span class="line">16./redis</span><br><span class="line">8./www/.oracle_jre_usage  # 包括隐藏文件的目录</span><br><span class="line">24./www</span><br><span class="line">48.                        # 这个目录(.)所占用的总量</span><br><span class="line"># 将文件的容量也列出来</span><br><span class="line">[root@qeuroal home]# du -a</span><br><span class="line">4./redis/.bash_profile</span><br><span class="line">4./redis/.bash_logout    </span><br><span class="line">....中间省略....</span><br><span class="line">4./kuangstudy.txt # 有文件的列表了</span><br><span class="line">48.</span><br><span class="line"># 检查根目录底下每个目录所占用的容量</span><br><span class="line">[root@qeuroal home]# du -sm /*</span><br><span class="line">0/bin</span><br><span class="line">146/boot</span><br><span class="line">.....中间省略....</span><br><span class="line">0/proc</span><br><span class="line">.....中间省略....</span><br><span class="line">1/tmp</span><br><span class="line">3026/usr  # 系统初期最大就是他了啦！</span><br><span class="line">513/var</span><br><span class="line">2666/www</span><br></pre></td></tr></table></figure>

<p>通配符 <code>*</code> 来代表每个目录。</p>
<p>与 <code>df</code> 不一样的是，<code>du</code> 这个命令其实会直接到文件系统内去搜寻所有的文件数据。</p>
<img data-src="/2021/05/28/142/image-20210606211238553.png" class="" title="image-20210606211238553">



<h2 id="磁盘挂载与卸除"><a href="#磁盘挂载与卸除" class="headerlink" title="磁盘挂载与卸除"></a>磁盘挂载与卸除</h2><p>起因：<code>Mac</code>或 <code>Linux</code> 挂载本地磁盘或者文件</p>
<p>根文件系统之外的其他文件要想能够被访问，都必须通过“关联”至根文件系统上的某个目录来实现，此关联操作即为“挂载”，此目录即为“挂载点”,解除此关联关系的过程称之为“卸载”</p>
<p><code>Linux</code> 的磁盘挂载使用<code>mount</code>命令，卸载使用<code>umount</code>命令。</p>
<p>磁盘挂载语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount [-t 文件系统] [-L Label名] [-o 额外选项] [-n] 装置文件名 挂载点</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 将 /dev/hdc6 挂载到 /mnt/hdc6 上面！</span><br><span class="line">[root@www ~]# mkdir /mnt/hdc6</span><br><span class="line">[root@www ~]# mount /dev/hdc6 /mnt/hdc6</span><br><span class="line">[root@www ~]# df</span><br><span class="line">Filesystem           1K-blocks     Used Available Use% Mounted on</span><br><span class="line">/dev/hdc6              1976312     42072   1833836   3% /mnt/hdc6</span><br></pre></td></tr></table></figure>

<img data-src="/2021/05/28/142/image-20210606211725529.png" class="" title="image-20210606211725529">

<p>磁盘卸载命令 <code>umount</code> 语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount [-fn] 装置文件名或挂载点</span><br></pre></td></tr></table></figure>

<p>选项与参数：</p>
<ul>
<li><code>-f</code> ：强制卸除！可用在类似网络文件系统 (NFS) 无法读取到的情况下；</li>
<li><code>-n</code> ：不升级 <code>/etc/mtab</code> 情况下卸除。</li>
</ul>
<p>卸载<code>/dev/hdc6</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# umount /dev/hdc6</span><br></pre></td></tr></table></figure>

<p>除了这个之外，以后安装了<code>JDK</code> ，可以使用 <code>java</code> 中的一些命令来查看信息。</p>
<h1 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h1><p><strong>Linux中一切皆文件（Linux：系统：（磁盘、进程）。文件：读写执行（查看，创建，删除，移动，复制，编辑），权限（用户、用户组）。）</strong></p>
<p>对于我们开发人员来说，其实 <code>Linux</code> 更多偏向于使用即可！</p>
<h2 id="进程基本概念"><a href="#进程基本概念" class="headerlink" title="进程基本概念"></a>进程基本概念</h2><ol>
<li>在 <code>Linux</code> 中，每一个程序都有自己的一个进程，每一个进程都有一个 <code>id</code> 号；</li>
<li>每个进程都有一个父进程（被谁创建的）；</li>
<li>进程可以有两种存在方式：前台！后台运行！</li>
<li>一般的话服务都是后台运行的，基本的程序都是前台运行的；</li>
</ol>
<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h3 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h3><p><code>ps</code> : 查看当前系统中正在执行的各种进程的信息</p>
<p><code>ps -xxx</code> : 通过 <code>ps -help </code> 或 <code>man ps</code> 查看帮助文档</p>
<ul>
<li><code>-a</code> : 显示当前终端运行的所有的进程信息（当期的进程，1个）；</li>
<li><code>-u</code> : 以用户的信息显示进程（）；</li>
<li><code>-x</code> : 显示后台运行进程的参数；</li>
</ul>
<h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h4><ul>
<li><code>ps -aux | grep mysql</code></li>
</ul>
<blockquote>
<p>补充</p>
</blockquote>
<ul>
<li><p><code>|</code>: 在 <code>Linux</code> 中，这个叫做管道符，如： <code>A|B</code>: 把 <code>A</code> 命令的结果作为输出操作 <code>B</code> 命令</p>
</li>
<li><p><code>grep</code>: 查找文件中符合条件的字符串</p>
</li>
<li><p><strong>对于我们来说，这里目前只需要记住一个命令即可： <code>ps -xxx | grep 进程名</code> 过滤进程信息</strong></p>
</li>
<li><p><code>ps -ef</code> : 可以查到父进程信息</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep mysql <span class="comment"># 看父进程我们一般可以通过目录树结构查看</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>pstree</code> : 进程树</p>
<ul>
<li><p><code>-p</code> : 显示父 <code>id</code></p>
</li>
<li><p><code>-u</code> : 显示用户组</p>
</li>
<li><p>实践</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree -pu</span><br></pre></td></tr></table></figure>

 <img data-src="/2021/05/28/142/image-20210606215025539.png" class="" title="image-20210606215025539"></li>
</ul>
</li>
</ul>
<h3 id="结束进程"><a href="#结束进程" class="headerlink" title="结束进程"></a>结束进程</h3><p>杀死进程，等价于 <code>window</code> 结束任务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 进程<span class="built_in">id</span>	<span class="comment"># 表示强制结束该进程</span></span><br></pre></td></tr></table></figure>

<p>在服务器很少手动结束进程，平时写的代码死循环了，可以选择结束进程！杀进程！</p>
<h1 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h1><h2 id="getopts"><a href="#getopts" class="headerlink" title="getopts"></a>getopts</h2><p>getpots是Shell命令行参数解析工具，旨在从Shell Script的命令行当中解析参数。</p>
<h2 id="getopt"><a href="#getopt" class="headerlink" title="getopt"></a>getopt</h2><h1 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h1><h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><h3 id="上传本地文件到服务器"><a href="#上传本地文件到服务器" class="headerlink" title="上传本地文件到服务器"></a>上传本地文件到服务器</h3><p>格式：scp 要上传的文件路径 用户名@服务器地址:服务器保存路径</p>
<p>例如：把本机 &#x2F;home&#x2F;test.txt 文件上传到 192.168.0.101 这台服务器上的 &#x2F;data&#x2F; 目录中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp /home/test.txt root@192.168.0.101:/data/</span><br></pre></td></tr></table></figure>



<h3 id="上传目录到服务器"><a href="#上传目录到服务器" class="headerlink" title="上传目录到服务器"></a>上传目录到服务器</h3><p>格式：scp -r 要上传的目录 用户名@服务器地址:服务器的保存目录</p>
<p>例如：把 &#x2F;home 目录上传到服务器的 &#x2F;data&#x2F; 目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r /home root@192.168.0.101:/data/</span><br></pre></td></tr></table></figure>



<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><h3 id="从服务器上下载文件"><a href="#从服务器上下载文件" class="headerlink" title="从服务器上下载文件"></a>从服务器上下载文件</h3><p>格式：scp 用户名@服务器地址:要下载的文件路径 保存文件的文件夹路径</p>
<p>例如：把 192.168.0.101 上的 &#x2F;data&#x2F;test.txt 的文件下载到 &#x2F;home（本地目录）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp root@192.168.0.101:/data/test.txt /home</span><br></pre></td></tr></table></figure>



<h3 id="从服务器下载整个目录"><a href="#从服务器下载整个目录" class="headerlink" title="从服务器下载整个目录"></a>从服务器下载整个目录</h3><p>格式：scp -r 用户名@服务器地址:要下载的服务器目录 保存下载的目录</p>
<p>例如：把 192.168.0.101 上的 &#x2F;data 目录下载到 &#x2F;home（本地目录）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r root@192.168.0.101:/data  /home/</span><br></pre></td></tr></table></figure>



<p>注：目标服务器要开启写入权限。</p>
<h1 id="命令-1"><a href="#命令-1" class="headerlink" title="命令"></a>命令</h1><h2 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h2><ul>
<li><p>基础命令相关一：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd、ls、pwd、help、man、if、for、while、case、select、read、test、ansible、iptables、</span><br><span class="line">firewall-cmd、salt、mv、cut、uniq、sort、wc、source、sestatus、setenforce；</span><br></pre></td></tr></table></figure>
</li>
<li><p>基础命令相关二：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date、ntpdate、crontab、rsync、ssh、scp、nohup、sh、bash、hostname、hostnamectl、</span><br><span class="line">source、ulimit、export、env、set、at、dir、db_load、diff、dmsetup、declare；</span><br></pre></td></tr></table></figure>
</li>
<li><p>用户权限相关：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Useradd、userdel、usermod、groupadd、groupmod、groupdel、Chmod、chown、</span><br><span class="line">chgrp、umask、chattr、lsattr、id、who、whoami、last、su、sudo、w、chpasswd、</span><br><span class="line">chroot；</span><br></pre></td></tr></table></figure>
</li>
<li><p>文件管理相关：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Touch、mkdir、rm、rmdi、vi、vim、cat、head、tail、less、more、find、sed、</span><br><span class="line">grep、awk、echo、ln、stat、file；</span><br></pre></td></tr></table></figure>
</li>
<li><p>软件资源管理：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Rpm、yum、tar、unzip、zip、gzip、wget、curl、rz、sz、jar、apt-get、bzip2、</span><br><span class="line">service、systemctl、make、cmake、chkconfig；</span><br></pre></td></tr></table></figure>
</li>
<li><p>系统资源管理：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fdisk、mount、umount、mkfs.ext4、fsck.ext4、parted、lvm、dd、du、df、top、</span><br><span class="line">iftop、free、w、uptime、iostat、vmstat、iotop、ps、netstat、lsof、ss、sar；</span><br></pre></td></tr></table></figure>
</li>
<li><p>网络管理相关：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping、ifconfig、ip addr、ifup、ifdown、nmcli、route、nslookup、traceroute、</span><br><span class="line">dig、tcpdump、nmap、brctl、ethtool、setup、arp、ab、iperf；</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><h3 id="基本格式"><a href="#基本格式" class="headerlink" title="基本格式"></a>基本格式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [option] pattern file</span><br></pre></td></tr></table></figure>



<h3 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h3><table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-b</td>
<td align="left">显示匹配行距文件头部的偏移量</td>
</tr>
<tr>
<td align="center">-c</td>
<td align="left">只显示匹配的行数</td>
</tr>
<tr>
<td align="center">-e</td>
<td align="left">实现多个选项间的逻辑 or 关系</td>
</tr>
<tr>
<td align="center">-E</td>
<td align="left">支持扩展正则表达式</td>
</tr>
<tr>
<td align="center">-f</td>
<td align="left">从文件获取 <code>PATTERN</code> 匹配</td>
</tr>
<tr>
<td align="center">-F</td>
<td align="left">匹配固定字符串的内容</td>
</tr>
<tr>
<td align="center">-h</td>
<td align="left">搜索多文件时不显示文件名</td>
</tr>
<tr>
<td align="center">-i</td>
<td align="left">忽略关键词大小写</td>
</tr>
<tr>
<td align="center">-l</td>
<td align="left">只显示符合匹配条件的文件名</td>
</tr>
<tr>
<td align="center">-n</td>
<td align="left">显示所有匹配行及其行号</td>
</tr>
<tr>
<td align="center">-o</td>
<td align="left">显示匹配词距文件头部的偏移量</td>
</tr>
<tr>
<td align="center">-q</td>
<td align="left">静默执行模式</td>
</tr>
<tr>
<td align="center">-r</td>
<td align="left">递归搜索模式</td>
</tr>
<tr>
<td align="center">-s</td>
<td align="left">不显示没有匹配文本的错误信息</td>
</tr>
<tr>
<td align="center">-v</td>
<td align="left">显示不包含匹配文本的所有行，&#x3D;&#x3D;相当于[^] 反向匹配&#x3D;&#x3D;</td>
</tr>
<tr>
<td align="center">-w</td>
<td align="left">精准匹配整词</td>
</tr>
<tr>
<td align="center">-x</td>
<td align="left">精准匹配整行</td>
</tr>
<tr>
<td align="center">-A &lt;行数 x&gt;</td>
<td align="left">除了显示符合范本样式的那一列之外，并显示该行之后的 x 行内容。</td>
</tr>
<tr>
<td align="center">-B &lt;行数 x&gt;</td>
<td align="left">除了显示符合样式的那一行之外，并显示该行之前的 x 行内容</td>
</tr>
<tr>
<td align="center">-C&lt;行数 x&gt;</td>
<td align="left">除了显示符合样式的那一行之外，并显示该行之前后的 x 行内容</td>
</tr>
</tbody></table>
<h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><p>用于利用语法&#x2F;脚本对文本文件进行批量的编辑操作</p>
<p>sed 会根据脚本命令来处理文本文件中的数据，这些命令要么从命令行中输入，要么存储在一个文本文件中，此命令执行数据的顺序如下：</p>
<ol>
<li>每次&#x3D;&#x3D;仅读取一行&#x3D;&#x3D;内容；</li>
<li>根据提供的规则命令匹配并修改数据。注意，sed &#x3D;&#x3D;默认不会直接修改源文件数据&#x3D;&#x3D;，而是会将数据复制到缓冲区中，修改也仅限于缓冲区中的数据；</li>
<li>将执行结果输出。</li>
</ol>
<p>当一行数据匹配完成后，它会继续读取下一行数据，并重复这个过程，直到将文件中所有数据处理完毕。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [选项] [脚本命令] 文件名</span><br></pre></td></tr></table></figure>



<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><table>
<thead>
<tr>
<th align="center">参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-e</td>
<td>使用指定脚本来处理输入的文本文件<br/>以选项中指定的 script 来处理输入的文本文件，这个<code>-e</code>可以省略，直接写表达式。</td>
</tr>
<tr>
<td align="center">-f</td>
<td>使用指定脚本文件处理输入的文本文件</td>
</tr>
<tr>
<td align="center">-h</td>
<td>显示帮助信息</td>
</tr>
<tr>
<td align="center">-i</td>
<td>直接修改文件内容，而不输出到终端</td>
</tr>
<tr>
<td align="center">-n</td>
<td>仅显示脚本处理后的结果<br/>默认情况下，sed 会在所有的脚本指定执行完毕后，会自动输出处理后的内容，而该选项会屏蔽启动输出，需使用 print 命令来完成输出。</td>
</tr>
<tr>
<td align="center">–quiet</td>
<td>仅显示脚本处理后的结果</td>
</tr>
<tr>
<td align="center">–silent</td>
<td>仅显示脚本处理后的结果</td>
</tr>
<tr>
<td align="center">-r</td>
<td>支持扩展正则表达式</td>
</tr>
<tr>
<td align="center">-V</td>
<td>显示版本信息</td>
</tr>
</tbody></table>
<h3 id="动作说明"><a href="#动作说明" class="headerlink" title="动作说明"></a>动作说明</h3><table>
<thead>
<tr>
<th align="center">动作</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">a</td>
<td>新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～</td>
</tr>
<tr>
<td align="center">c</td>
<td>取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！</td>
</tr>
<tr>
<td align="center">d</td>
<td>删除，因为是删除啊，所以 d 后面通常不接任何咚咚；</td>
</tr>
<tr>
<td align="center">i</td>
<td>插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；</td>
</tr>
<tr>
<td align="center">p</td>
<td>打印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～</td>
</tr>
<tr>
<td align="center">s</td>
<td>取代，通常这个 s 的动作可以搭配正规表示法，例如 1,20s&#x2F;old&#x2F;new&#x2F;g 。</td>
</tr>
</tbody></table>
<h3 id="sed脚本命令"><a href="#sed脚本命令" class="headerlink" title="sed脚本命令"></a>sed脚本命令</h3><h4 id="sed-s-替换脚本命令"><a href="#sed-s-替换脚本命令" class="headerlink" title="sed s 替换脚本命令"></a>sed s 替换脚本命令</h4><blockquote>
<p>基本格式</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]s/pattern/replacement/flags</span><br></pre></td></tr></table></figure>

<ul>
<li>address 表示指定要操作的具体行</li>
<li>pattern 指的是需要替换的内容</li>
<li>replacement 指的是要替换的新内容</li>
</ul>
<blockquote>
<p>常用的 flags 标记</p>
</blockquote>
<table>
<thead>
<tr>
<th>flags 标记</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>n</td>
<td>1~512 之间的数字，表示指定要替换的字符串出现第几次时才进行替换，例如，一行中有 3 个 A，但用户只想替换第二个 A，这是就用到这个标记；</td>
</tr>
<tr>
<td>g</td>
<td>对数据中所有匹配到的内容进行替换，如果没有 g，则只会在第一次匹配成功时做替换操作。例如，一行数据中有 3 个 A，则只会替换第一个 A；</td>
</tr>
<tr>
<td>p</td>
<td>会打印与替换命令中指定的模式匹配的行。此标记通常与 -n 选项一起使用。</td>
</tr>
<tr>
<td>w file</td>
<td>将缓冲区中的内容写到指定的 file 文件中；</td>
</tr>
<tr>
<td>&amp;</td>
<td>用正则表达式匹配的内容进行替换；</td>
</tr>
<tr>
<td>\n</td>
<td>匹配第 n 个子串，该子串之前在 pattern 中用 () 指定。</td>
</tr>
<tr>
<td>\</td>
<td>转义（转义替换部分包含：&amp;、\ 等）。</td>
</tr>
</tbody></table>
<blockquote>
<p>注意</p>
</blockquote>
<p>替换类似文件路径的字符串会比较麻烦，需要将路径中的正斜线进行转义，如：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/\/bin\/bash/\/bin\/csh/&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure>



<h4 id="sed-d-替换脚本命令"><a href="#sed-d-替换脚本命令" class="headerlink" title="sed d 替换脚本命令"></a>sed d 替换脚本命令</h4><blockquote>
<p>基本格式</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]d</span><br></pre></td></tr></table></figure>



<h4 id="sed-a-和-i-脚本命令"><a href="#sed-a-和-i-脚本命令" class="headerlink" title="sed a 和 i 脚本命令"></a>sed a 和 i 脚本命令</h4><ul>
<li>a 命令表示在指定行的后面附加一行</li>
<li>i 命令表示在指定行的前面插入一行</li>
</ul>
<blockquote>
<p>基本格式</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]a \新文本内容</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]i \新文本内容</span><br></pre></td></tr></table></figure>



<blockquote>
<p>多行</p>
</blockquote>
<p>如果你想将一个多行数据添加到数据流中，只需对要插入或附加的文本中的每一行末尾（除最后一行）添加反斜线即可</p>
<h4 id="sed-c-替换脚本命令"><a href="#sed-c-替换脚本命令" class="headerlink" title="sed c 替换脚本命令"></a>sed c 替换脚本命令</h4><p>c 命令表示将指定行中的所有内容，替换成该选项后面的字符串。该命令的基本格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]c\用于替换的新文本</span><br></pre></td></tr></table></figure>



<h4 id="sed-y-转换脚本命令"><a href="#sed-y-转换脚本命令" class="headerlink" title="sed y 转换脚本命令"></a>sed y 转换脚本命令</h4><p>y 转换命令是唯一可以处理单个字符的 sed 脚本命令，其基本格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]y/inchars/outchars/</span><br></pre></td></tr></table></figure>

<p>转换命令会对 inchars 和 outchars 值进行一对一的映射，即 inchars 中的第一个字符会被转换为 outchars 中的第一个字符，第二个字符会被转换成 outchars 中的第二个字符…这个映射过程会一直持续到处理完指定字符。如果 inchars 和 outchars 的长度不同，则 sed 会产生一条错误消息。</p>
<h4 id="sed-p-打印脚本命令"><a href="#sed-p-打印脚本命令" class="headerlink" title="sed p 打印脚本命令"></a>sed p 打印脚本命令</h4><p>p 命令表示搜索符号条件的行，并输出该行的内容，此命令的基本格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]p</span><br></pre></td></tr></table></figure>



<h4 id="sed-w-脚本命令"><a href="#sed-w-脚本命令" class="headerlink" title="sed w 脚本命令"></a>sed w 脚本命令</h4><p>w 命令用来将文本中指定行的内容写入文件中，此命令的基本格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]w filename</span><br></pre></td></tr></table></figure>

<p>这里的 filename 表示文件名，可以使用相对路径或绝对路径，但不管是哪种，运行 sed 命令的用户都必须有文件的写权限。</p>
<h4 id="sed-r-脚本命令"><a href="#sed-r-脚本命令" class="headerlink" title="sed r 脚本命令"></a>sed r 脚本命令</h4><p>r 命令用于将一个独立文件的数据插入到当前数据流的指定位置，该命令的基本格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]r filename</span><br></pre></td></tr></table></figure>

<p>sed 命令会将 filename 文件中的内容插入到 address 指定行的后面</p>
<h4 id="sed-q-退出脚本命令"><a href="#sed-q-退出脚本命令" class="headerlink" title="sed q 退出脚本命令"></a>sed q 退出脚本命令</h4><p>q 命令的作用是使 sed 命令在第一次匹配任务结束后，退出 sed 程序，不再进行对后续数据的处理。</p>
<h3 id="sed-脚本命令的寻址方式"><a href="#sed-脚本命令的寻址方式" class="headerlink" title="sed 脚本命令的寻址方式"></a>sed 脚本命令的寻址方式</h3><p>对各个脚本命令来说，address 用来表明该脚本命令作用到文本中的具体行</p>
<p>默认情况下，sed 命令会作用于文本数据的所有行。如果只想将命令作用于特定行或某些行，则必须写明 address 部分，表示的方法有以下 2 种：</p>
<ol>
<li>以数字形式指定行区间；</li>
<li>用文本模式指定具体行区间。</li>
</ol>
<p>以上两种形式&#x3D;&#x3D;都可以使用如下这 2 种格式&#x3D;&#x3D;，分别是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]脚本命令</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">address &#123;</span><br><span class="line">	多个脚本命令</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sed -n <span class="string">&#x27;/3/&#123;</span></span><br><span class="line"><span class="string">&gt; p</span></span><br><span class="line"><span class="string">&gt; s/line/test/p</span></span><br><span class="line"><span class="string">&gt; &#125;&#x27;</span> data6.txt</span><br></pre></td></tr></table></figure>



<h4 id="以数字形式指定行区间"><a href="#以数字形式指定行区间" class="headerlink" title="以数字形式指定行区间"></a>以数字形式指定行区间</h4><p>当使用数字方式的行寻址时，可以用行在文本流中的行位置来引用。sed 会将文本流中的第一行编号为 1，然后继续按顺序为接下来的行分配行号。</p>
<p>在脚本命令中，指定的地址可以是 <u>单个行号</u>，或是 <u>用起始行号、逗号以及结尾行号指定的一定区间范围内的行</u></p>
<h4 id="用文本模式指定行区间"><a href="#用文本模式指定行区间" class="headerlink" title="用文本模式指定行区间"></a>用文本模式指定行区间</h4><p>sed 允许指定文本模式来过滤出命令要作用的行，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/pattern/command</span><br></pre></td></tr></table></figure>

<p>注意，必须用正斜线将要指定的 pattern 封起来，sed 会将该命令作用到包含指定文本模式的行上。</p>
<p>sed 允许在文本模式&#x3D;&#x3D;使用正则表达式指明作用的具体行&#x3D;&#x3D;</p>
<h3 id="sed-多行命令"><a href="#sed-多行命令" class="headerlink" title="sed 多行命令"></a>sed 多行命令</h3><ol>
<li>Next 命令（N）：将数据流中的下一行加进来创建一个多行组来处理。</li>
<li>Delete（D）：删除多行组中的一行。</li>
<li>Print（P）：打印多行组中的一行。</li>
</ol>
<p><strong>注意</strong>，以上命令的缩写，都为大写。</p>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><p>和 sed 命令类似，awk 命令也是逐行扫描文件（从第 1 行到最后一行），寻找含有目标文本的行，如果匹配成功，则会在该行上执行用户想要的操作；反之，则不对行做任何处理。</p>
<h3 id="awk-命令的基本格式为"><a href="#awk-命令的基本格式为" class="headerlink" title="awk 命令的基本格式为"></a>awk 命令的基本格式为</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk [选项] <span class="string">&#x27;脚本命令&#x27;</span> 文件名</span><br></pre></td></tr></table></figure>



<h3 id="awk-命令选项以及含义"><a href="#awk-命令选项以及含义" class="headerlink" title="awk 命令选项以及含义"></a>awk 命令选项以及含义</h3><table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>-F fs</td>
<td>指定以 fs 作为输入行的分隔符，awk 命令默认分隔符为空格或制表符。</td>
</tr>
<tr>
<td>-f file</td>
<td>从脚本文件中读取 awk 脚本指令，以取代直接在命令行中输入指令。</td>
</tr>
<tr>
<td>-v var&#x3D;val</td>
<td>在执行处理过程之前，设置一个变量 var，并给其设备初始值为 val。</td>
</tr>
</tbody></table>
<h3 id="脚本命令"><a href="#脚本命令" class="headerlink" title="脚本命令"></a>脚本命令</h3><p>awk 的强大之处在于脚本命令，它由 2 部分组成，分别为匹配规则和执行命令，如下所示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;匹配规则&#123;执行命令&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="匹配规则"><a href="#匹配规则" class="headerlink" title="匹配规则"></a>匹配规则</h4><p>和 sed 命令中的 address 部分作用相同：用来指定脚本命令可以作用到文本内容中的具体行，可以使用字符串（比如 &#x2F;demo&#x2F;，表示查看含有 demo 字符串的行）或者正则表达式指定</p>
<blockquote>
<p>注意</p>
</blockquote>
<ul>
<li>整个&#x3D;&#x3D;脚本命令是用单引号（’’）括起&#x3D;&#x3D;，而其中的&#x3D;&#x3D;执行命令部分需要用大括号（{}）括起来&#x3D;&#x3D;</li>
<li>在 awk 程序执行时，如果没有指定执行命令，则&#x3D;&#x3D;默认会把匹配的行输出&#x3D;&#x3D;；如果不指定匹配规则，则&#x3D;&#x3D;默认匹配文本中所有的行&#x3D;&#x3D;</li>
</ul>
<h3 id="awk-使用数据字段变量"><a href="#awk-使用数据字段变量" class="headerlink" title="awk 使用数据字段变量"></a>awk 使用数据字段变量</h3><p>awk 的主要特性之一是其处理文本文件中数据的能力，它会自动给一行中的每个数据元素分配一个变量。</p>
<p>默认情况下，awk 会将如下变量分配给它在文本行中发现的数据字段：</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>数据字段</th>
</tr>
</thead>
<tbody><tr>
<td><code>$0</code></td>
<td>代表整个文本行；</td>
</tr>
<tr>
<td><code>$1</code></td>
<td>代表文本行中的第 1 个数据字段；</td>
</tr>
<tr>
<td><code>$2</code></td>
<td>代表文本行中的第 2 个数据字段；</td>
</tr>
<tr>
<td><code>$n</code></td>
<td>代表文本行中的第 n 个数据字段。</td>
</tr>
</tbody></table>
<p>在 awk 中，&#x3D;&#x3D;默认的字段分隔符是任意的空白字符&#x3D;&#x3D;（例如空格或制表符）。 在文本行中，每个数据字段都是通过字段分隔符划分的。awk 在读取一行文本时，会用预定义的字段分隔符划分每个数据字段。</p>
<h3 id="awk-脚本命令使用多个命令"><a href="#awk-脚本命令使用多个命令" class="headerlink" title="awk 脚本命令使用多个命令"></a>awk 脚本命令使用多个命令</h3><h4 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h4><p>awk 允许将多条命令组合成一个正常的程序。要在命令行上的程序脚本中使用多条命令，只要在命令之间放个分号即可，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;My name is Rich&quot;</span> | awk <span class="string">&#x27;&#123;$4=&quot;Christine&quot;; print $0&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>第一条命令会给字段变量 <code>$4</code> 赋值。第二条命令会打印整个数据字段。</p>
<h4 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h4><p>可以一次一行地输入程序脚本命令，比如说：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;My name is Rich&quot; | awk &#x27;&#123;</span><br><span class="line">&gt; $4=&quot;Christine&quot;</span><br><span class="line">&gt; print $0&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>在你用了表示起始的单引号后，bash shell 会使用 <code>&gt;</code> 来提示输入更多数据，我们可以每次在每行加一条命令，直到输入了结尾的单引号。</p>
<h3 id="awk从文件中读取程序"><a href="#awk从文件中读取程序" class="headerlink" title="awk从文件中读取程序"></a>awk从文件中读取程序</h3><p>跟 sed 一样，awk 允许将脚本命令存储到文件中，然后再在命令行中引用，比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F : -f awk.sh /etc/passwd</span><br></pre></td></tr></table></figure>

<p>注意，在程序文件中，也可以指定多条命令，&#x3D;&#x3D;只要一条命令放一行即可，之间不需要用分号&#x3D;&#x3D;。</p>
<h3 id="awk-BEGIN关键字"><a href="#awk-BEGIN关键字" class="headerlink" title="awk BEGIN关键字"></a>awk BEGIN关键字</h3><p>awk 中还可以指定脚本命令的运行时机。默认情况下，awk 会从输入中读取一行文本，然后针对该行的数据执行程序脚本，但有时可能需要&#x3D;&#x3D;在处理数据前运行一些脚本命令&#x3D;&#x3D;，这就需要使用 BEGIN 关键字。</p>
<p>BEGIN 会强制 awk 在读取数据前执行该关键字后指定的脚本命令</p>
<p>例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;BEGIN &#123;print &quot;The data3 File Contents:&quot;&#125;</span></span><br><span class="line"><span class="string">&gt; &#123;print $0&#125;&#x27;</span> data3.txt</span><br></pre></td></tr></table></figure>

<p>BEGIN 部分的脚本指令会在 awk 命令处理数据前运行，而真正用来处理数据的是第二段脚本命令。</p>
<h3 id="awk-END关键字"><a href="#awk-END关键字" class="headerlink" title="awk END关键字"></a>awk END关键字</h3><p>和 BEGIN 关键字相对应，END 关键字允许我们指定一些脚本命令，awk 会在&#x3D;&#x3D;读完数据后执行它们&#x3D;&#x3D;，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;BEGIN &#123;print &quot;The data3 File Contents:&quot;&#125;</span></span><br><span class="line"><span class="string">&gt; &#123;print $0&#125;</span></span><br><span class="line"><span class="string">&gt; END &#123;print &quot;End of File&quot;&#125;&#x27;</span> data3.txt</span><br></pre></td></tr></table></figure>

<p>当 awk 程序打印完文件内容后，才会执行 END 中的脚本命令。</p>
<h3 id="awk-使用变量"><a href="#awk-使用变量" class="headerlink" title="awk 使用变量"></a>awk 使用变量</h3><p>在 awk 的脚本程序中，支持使用变量来存取值。awk 支持两种不同类型的变量：</p>
<ul>
<li>内建变量：awk 本身就创建好，用户可以直接拿来用的变量，这些变量用来存放处理数据文件中的某些字段和记录的信息。</li>
<li>自定义变量：awk 支持用户自己创建变量。</li>
</ul>
<h4 id="内建变量"><a href="#内建变量" class="headerlink" title="内建变量"></a>内建变量</h4><p>awk 程序使用内建变量来引用程序数据里的一些特殊功能</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>$0</code></td>
<td>代表整个文本行；</td>
</tr>
<tr>
<td><code>$1</code></td>
<td>代表文本行中的第 1 个数据字段；</td>
</tr>
<tr>
<td><code>$2</code></td>
<td>代表文本行中的第 2 个数据字段；</td>
</tr>
<tr>
<td><code>$n</code></td>
<td>代表文本行中的第 n 个数据字段。</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>FIELDWIDTHS</code></td>
<td>由空格分隔的一列数字，定义了每个数据字段的确切宽度。<br/>一旦设定了 FIELDWIDTHS 变量的值，就不能再改变了，因此，这种方法并&#x3D;&#x3D;不适用于变长的字段&#x3D;&#x3D;</td>
</tr>
<tr>
<td><code>FNR</code></td>
<td>当前输入文档的记录编号，常在有多个输入文档时使用。</td>
</tr>
<tr>
<td><code>NR</code></td>
<td>输入流的当前记录编号。</td>
</tr>
<tr>
<td><code>FS</code></td>
<td>输入字段分隔符</td>
</tr>
<tr>
<td><code>RS</code></td>
<td>输入记录分隔符，默认为换行符 \n。</td>
</tr>
<tr>
<td><code>OFS</code></td>
<td>输出字段分隔符，默认为空格。<br/>print 命令会自动将 OFS 变量的值放置在输出中的每个字段间</td>
</tr>
<tr>
<td><code>ORS</code></td>
<td>输出记录分隔符，默认为换行符 \n。</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>ARGC</code></td>
<td>命令行参数个数。</td>
</tr>
<tr>
<td><code>ARGIND</code></td>
<td>当前文件在 ARGC 中的位置。</td>
</tr>
<tr>
<td><code>ARGV</code></td>
<td>包含命令行参数的数组。</td>
</tr>
<tr>
<td><code>CONVFMT</code></td>
<td>数字的转换格式，默认值为 %.6g。</td>
</tr>
<tr>
<td><code>ENVIRON</code></td>
<td>当前 shell 环境变量及其值组成的关联数组。</td>
</tr>
<tr>
<td><code>ERRNO</code></td>
<td>当读取或关闭输入文件发生错误时的系统错误号。</td>
</tr>
<tr>
<td><code>FILENAME</code></td>
<td>当前输入文档的名称。</td>
</tr>
<tr>
<td><code>FNR</code></td>
<td>&#x3D;&#x3D;当前数据文件&#x3D;&#x3D;中的数据行数。</td>
</tr>
<tr>
<td><code>IGNORECASE</code></td>
<td>设成非 0 值时，忽略 awk 命令中出现的字符串的字符大小写。</td>
</tr>
<tr>
<td><code>NF</code></td>
<td>数据文件中的字段总数。</td>
</tr>
<tr>
<td><code>NR</code></td>
<td>已处理的输入记录&#x3D;&#x3D;总数&#x3D;&#x3D;。会持续计数直到处理完所有的数据文件</td>
</tr>
<tr>
<td><code>OFMT</code></td>
<td>数字的输出格式，默认值为 %.6g。</td>
</tr>
<tr>
<td><code>RLENGTH</code></td>
<td>由 match 函数所匹配的子字符串的长度。</td>
</tr>
<tr>
<td><code>TSTART</code></td>
<td>由 match 函数所匹配的子字符串的起始位置。</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p>理解</p>
</blockquote>
<ul>
<li>字段分隔符：作用于 awk 每次处理的一个单元</li>
<li>记录分隔符：用于区分 awk 每次要处理的一个单元</li>
</ul>
<h4 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h4><p>awk 允许用户定义自己的变量在脚本程序中使用。awk 自定义变量名可以是任意数目的字母、数字和下划线，但不能以数字开头。更重要的是，awk 变量名&#x3D;&#x3D;区分大小写&#x3D;&#x3D;</p>
<p>也可以用 awk 命令行来给程序中的变量赋值，这允许我们在正常的代码之外赋值，即时改变变量的值，比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;</span></span><br><span class="line">\&gt; BEGIN&#123;</span><br><span class="line">\&gt; testing=<span class="string">&quot;This is a test&quot;</span></span><br><span class="line">\&gt; <span class="built_in">print</span> testing</span><br><span class="line">\&gt; testing=45</span><br><span class="line">\&gt; <span class="built_in">print</span> testing</span><br><span class="line">\&gt; &#125;<span class="string">&#x27;</span></span><br><span class="line"><span class="string">This is a test</span></span><br><span class="line"><span class="string">45</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，使用命令行参数来定义变量值会有一个问题，即设置了变量后，这个值在代码的 BEGIN 部分不可用，如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]$ <span class="built_in">cat</span> script2</span><br><span class="line">BEGIN&#123;<span class="built_in">print</span> <span class="string">&quot;The starting value is&quot;</span>,n; FS=<span class="string">&quot;,&quot;</span>&#125;</span><br><span class="line">&#123;<span class="built_in">print</span> <span class="variable">$n</span>&#125;</span><br><span class="line">[root@localhost ~]$ awk -f script2 n=3 data1</span><br><span class="line">The starting value is</span><br><span class="line">data13</span><br><span class="line">data23</span><br><span class="line">data33</span><br></pre></td></tr></table></figure>



<p>解决这个问题，可以用 <code>-v</code> 命令行参数，它可以实现在 BEGIN 代码之前设定变量。在命令行上，-v 命令行参数必须放在脚本代码之前，如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]$ awk -v n=3 -f script2 data1</span><br><span class="line">The starting value is 3</span><br><span class="line">data13</span><br><span class="line">data23</span><br><span class="line">data33</span><br></pre></td></tr></table></figure>





<h3 id="awk-使用数组"><a href="#awk-使用数组" class="headerlink" title="awk 使用数组"></a>awk 使用数组</h3><h3 id="awk-使用分支结构"><a href="#awk-使用分支结构" class="headerlink" title="awk 使用分支结构"></a>awk 使用分支结构</h3><h3 id="awk-使用循环结构"><a href="#awk-使用循环结构" class="headerlink" title="awk 使用循环结构"></a>awk 使用循环结构</h3><h3 id="awk-使用函数"><a href="#awk-使用函数" class="headerlink" title="awk 使用函数"></a>awk 使用函数</h3><h2 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h2><p><a target="_blank" rel="noopener" href="http://www.gnu.org/software/wget/">wget</a>是一个命令行的下载工具。对于我们这些 Linux 用户来说，几乎每天都在使用它。下面为大家介绍几个有用的 wget 小技巧，可以让你更加高效而灵活的使用 wget。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -r -np -nd http://example.com/packages/</span><br></pre></td></tr></table></figure>

<p>这条命令可以下载 <a target="_blank" rel="noopener" href="http://example.com/">http://example.com</a> 网站上 packages 目录中的所有文件。其中，-np的作用是不遍历父目录，-nd表示不在本机重新创建目录结构。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -r -np -nd --accept=iso http://example.com/centos-5/i386/</span><br></pre></td></tr></table></figure>

<p>与上一条命令相似，但多加了一个–accept&#x3D;iso选项，这指示 wget 仅下载 i386 目录中所有扩展名为 iso 的文件。你也可以指定多个扩展名，只需用逗号分隔即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -i filename.txt</span><br></pre></td></tr></table></figure>

<p>此命令常用于批量下载的情形，把所有需要下载文件的地址放到 filename.txt 中，然后 wget 就会自动为你下载所有文件了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -c http://example.com/really-big-file.iso</span><br></pre></td></tr></table></figure>

<p>这里所指定的-c选项的作用为断点续传。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -m -k (-H) http://www.example.com/</span><br></pre></td></tr></table></figure>

<p>该命令可用来镜像一个网站，wget 将对链接进行转换。如果网站中的图像是放在另外的站点，那么可以使用-H选项。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2021/05/17/141/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/05/17/141/" class="post-title-link" itemprop="url">141. C++</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-05-17 19:53:15" itemprop="dateCreated datePublished" datetime="2021-05-17T19:53:15+08:00">2021-05-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/c-c/" itemprop="url" rel="index"><span itemprop="name">c/c++</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h2><ul>
<li><p>函数的地址是存储其机器语言代码的内存开始的地址</p>
</li>
<li><p>好处：可在在不同的时间使用不同的函数（可以把函数当做参数传递）</p>
</li>
<li><p>声明：</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数原型</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">sum</span><span class="params">(<span class="type">double</span>, <span class="type">double</span>)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 函数指针声明</span></span></span><br><span class="line"><span class="function"><span class="title">double</span> <span class="params">(*ptrSum)</span><span class="params">(<span class="type">double</span>, <span class="type">double</span>)</span></span></span><br></pre></td></tr></table></figure>

<p> 注意：</p>
<ul>
<li>该语句声明了一个指针<code>ptrSum</code>，指向一个函数</li>
<li><code>double *ptrSum(double, double)</code>不是函数指针，而是：声明了一个函数<code>ptrSum</code>，返回 <code>double *类型</code></li>
</ul>
</li>
<li><p>用法</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明power函数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">power</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span></span>;</span><br><span class="line"><span class="comment">// 声明函数指针</span></span><br><span class="line"><span class="built_in">int</span> (*powerPtr)(<span class="type">int</span>, <span class="type">int</span>);</span><br><span class="line"><span class="comment">// 让声明的函数指针指向函数，以便调用</span></span><br><span class="line">powerPtr = power;</span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line"><span class="built_in">powerPtr</span>(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">(*powerPtr)(<span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用</p>
<ul>
<li><p>题目</p>
<p> 用函数指针实现加减乘除</p>
</li>
<li><p>代码</p>
<ul>
<li><p><code>Caculator.h</code></p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* author Qeuroal</span></span><br><span class="line"><span class="comment">* date 2021/5/19</span></span><br><span class="line"><span class="comment">* description </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> BLOG141_CACULATOR_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BLOG141_CACULATOR_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义计算器，使用函数指针</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 加法</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">addition</span><span class="params">(<span class="type">double</span>, <span class="type">double</span>)</span></span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 减法</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">subtraction</span><span class="params">(<span class="type">double</span>, <span class="type">double</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 乘法</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">multiplication</span><span class="params">(<span class="type">double</span>, <span class="type">double</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 除法</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">division</span><span class="params">(<span class="type">double</span>, <span class="type">double</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 打印计算结果</span></span><br><span class="line"><span class="comment"> * param double (*)(double , double ) 函数指针</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printResult</span><span class="params">(<span class="type">double</span> (*)(<span class="type">double</span> , <span class="type">double</span> ), <span class="type">double</span>, <span class="type">double</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printResult</span><span class="params">(<span class="type">double</span> (*calcPtr)(<span class="type">double</span>, <span class="type">double</span>), <span class="type">double</span> num1, <span class="type">double</span> num2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 调用函数，打印结果</span></span><br><span class="line">    <span class="type">double</span> result = <span class="built_in">calcPtr</span>(num1, num2);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;运算结果为：&quot;</span> &lt;&lt; result &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">addition</span><span class="params">(<span class="type">double</span> num1, <span class="type">double</span> num2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">subtraction</span><span class="params">(<span class="type">double</span> num1, <span class="type">double</span> num2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 - num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">multiplication</span><span class="params">(<span class="type">double</span> num1, <span class="type">double</span> num2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 * num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">division</span><span class="params">(<span class="type">double</span> num1, <span class="type">double</span> num2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num2 == <span class="number">0</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;除数不能为0！！&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num1 / num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//BLOG141_CACULATOR_H</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>FuncPtr.cpp</code></p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* author Qeuroal</span></span><br><span class="line"><span class="comment">* date 2021/5/19</span></span><br><span class="line"><span class="comment">* description </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Caculator.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 定义函数指针</span></span><br><span class="line">    <span class="built_in">double</span> (*calcPtr)(<span class="type">double</span>, <span class="type">double</span>) = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="comment">// 定义函数指针数组</span></span><br><span class="line">    <span class="built_in">double</span> (*calcPtrArray[])(<span class="type">double</span>, <span class="type">double</span>) = &#123;&#125;;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入两个操作数：&quot;</span>;</span><br><span class="line">    <span class="type">double</span> num1, num2;</span><br><span class="line">    cin &gt;&gt; num1 &gt;&gt; num2;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入运算符：&quot;</span>;</span><br><span class="line">    <span class="type">char</span> op;</span><br><span class="line">    cin &gt;&gt; op;</span><br><span class="line">    <span class="keyword">switch</span> (op) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">            calcPtr = addition;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">            calcPtr = subtraction;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">            calcPtr = multiplication;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">            calcPtr = division;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printResult</span>(calcPtr, num1, num2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>注意</p>
<ul>
<li><p>要用函数指针的话，先定义函数，再定义函数指针；</p>
</li>
<li><p>在 <code>C11</code> 中可以使用 <code>auto funcPtr = addition;</code> 自动推断类型（自动类型推断需要确保变量的类型与初值类型一致）;</p>
</li>
<li><p>使用<code>auto</code>时，需要初始化，否则会报错；</p>
</li>
<li><p>可以使用 <code>typedef</code> 简化声明：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">double</span> <span class="params">(*funcPtr)</span><span class="params">(<span class="type">double</span>, <span class="type">double</span>)</span></span>;</span><br><span class="line"><span class="comment">// 此时funcPtr是一个新的类型，而不是一个函数指针，真正的函数指针是calcPtr</span></span><br><span class="line">funcPtr = calcPtr;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="注意点。"><a href="#注意点。" class="headerlink" title="注意点。"></a>注意点。</h2><ul>
<li>类一般是在头文件定义</li>
<li><code>.h文件</code> 声明类的结构，<code>.cpp文件</code>实现类的成员函数</li>
</ul>
<h2 id="实例化方法（以无参构造为例）"><a href="#实例化方法（以无参构造为例）" class="headerlink" title="实例化方法（以无参构造为例）"></a>实例化方法（以无参构造为例）</h2><blockquote>
<p>假设定义了 <code>Person</code> 类。</p>
</blockquote>
<ul>
<li><p>省略了默认构造：<code>Person person;</code> （在栈内存中直接分配空间）</p>
</li>
<li><p>标准写法：<code>Person person();</code> （在栈内存中直接分配空间）</p>
</li>
<li><p>指针写法：<code>Person *person = new Person();</code> （在堆内存分配空间，并用指针 <code>person</code> 指向该内存空间）</p>
</li>
<li><p>如果构造函数中只有一个是带<em><strong>唯一</strong></em>的参数，如下所示：</p>
<ul>
<li><p>类</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> age) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;age = age; </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">Person</span>(string name, <span class="type">int</span> age) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">        <span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>实例化</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person person =20;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><ul>
<li><p>正常写法（略）</p>
</li>
<li><p>简化写法：初始化参数列表写法</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person::Person(string name, int age) : name(name), age(age) &#123;&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://qeuroal.top/2021/04/29/140/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Qeuroal">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qeuroal's Blog">
      <meta itemprop="description" content="大人者，不失其赤子之心">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Qeuroal's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/29/140/" class="post-title-link" itemprop="url">140. CSS3</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-29 17:45:12" itemprop="dateCreated datePublished" datetime="2021-04-29T17:45:12+08:00">2021-04-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-12-08 14:36:58" itemprop="dateModified" datetime="2025-12-08T14:36:58+08:00">2025-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h1><ul>
<li><code>HTML</code> + <code>CSS</code> + <code>JavaScript</code></li>
<li>结构 + 表现 + 交互</li>
</ul>
<h2 id="如何学习"><a href="#如何学习" class="headerlink" title="如何学习"></a>如何学习</h2><ol>
<li><code>css</code> 是什么</li>
<li><code>css</code>怎么用（快速入门）</li>
<li><strong><code>css</code>选择器（重点+难点）</strong></li>
<li>美化网页（文字、阴影、超链接、列表、渐变……）</li>
<li>盒子模型</li>
<li>浮动</li>
<li>定位</li>
<li>网页动画（特效效果），教程：菜鸟教程</li>
</ol>
<h2 id="什么是css"><a href="#什么是css" class="headerlink" title="什么是css"></a>什么是<code>css</code></h2><ul>
<li><p><code>css</code>：<code>Cascading Style Sheet</code>层叠(级联)样式表</p>
</li>
<li><p><code>css</code>：表现（美化网页）：字体、颜色、边距、高度、宽度、背景图片、网页定位、网页浮动……</p>
 <img data-src="/2021/04/29/140/image-20210429183238305.png" class="" title="image-20210429183238305"></li>
</ul>
<h2 id="发展史"><a href="#发展史" class="headerlink" title="发展史"></a>发展史</h2><ul>
<li><code>css1.0</code></li>
<li><code>css2.0</code>：<code>DIV</code>（块）+ <code>CSS</code>，提出了<code>html</code> 和 <code>css</code> 结构分离的思想，网页变得简单，利于 <code>SEO</code></li>
<li><code>css2.1</code>：浮动和定位</li>
<li><code>css3.0</code>：圆角、阴影、动画……（浏览器兼容性）</li>
</ul>
<h2 id="练习格式"><a href="#练习格式" class="headerlink" title="练习格式"></a>练习格式</h2><img data-src="/2021/04/29/140/image-20210429184205088.png" class="" title="image-20210429184205088">

<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><p>style</p>
<ul>
<li><p>基本入门</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--规范，&lt;style&gt;可以编写css代码，每一个声明最好使用分号结尾</span></span><br><span class="line"><span class="comment">    语法：</span></span><br><span class="line"><span class="comment">        选择器 &#123;</span></span><br><span class="line"><span class="comment">            声明1;</span></span><br><span class="line"><span class="comment">            声明2;</span></span><br><span class="line"><span class="comment">            声明3;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: rebeccapurple;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>建议使用这种方式</p>
 <img data-src="/2021/04/29/140/image-20210429185156694.png" class="" title="image-20210429185156694"></li>
</ul>
<h2 id="css优势"><a href="#css优势" class="headerlink" title="css优势"></a><code>css</code>优势</h2><ul>
<li>内容和表现分离</li>
<li>网页结构表现统一，可以实现复用</li>
<li>样式十分丰富</li>
<li>建议使用独立于 <code>HTML</code> 的 <code>CSS</code> 文件</li>
<li>利于 <code>SEO</code>，容易被搜索引擎收录</li>
</ul>
<h2 id="css的3种导入方式"><a href="#css的3种导入方式" class="headerlink" title="css的3种导入方式"></a><code>css</code>的3种导入方式</h2><h3 id="行内样式"><a href="#行内样式" class="headerlink" title="行内样式"></a>行内样式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--行内样式：在标签元素中，编写一个style属性，编写样式即可--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&quot;color:aqua;&quot;</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="内部样式：style标签"><a href="#内部样式：style标签" class="headerlink" title="内部样式：style标签"></a>内部样式：<code>style</code>标签</h3><img data-src="/2021/04/29/140/image-20210430104450469.png" class="" title="image-20210430104450469">

<h3 id="外部样式（推荐）"><a href="#外部样式（推荐）" class="headerlink" title="外部样式（推荐）"></a>外部样式（推荐）</h3><img data-src="/2021/04/29/140/image-20210429185156694.png" class="" title="image-20210429185156694">

<h3 id="优先级："><a href="#优先级：" class="headerlink" title="优先级："></a>优先级：</h3><p>就近原则：最近的是：行内样式，然后看内部样式和外部样式谁在上面</p>
<img data-src="/2021/04/29/140/image-20210430105017563.png" class="" title="image-20210430105017563">

<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*注释*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--外部样式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--行内样式：在标签元素中，编写一个style属性，编写样式即可--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="拓展：外部样式两种写法"><a href="#拓展：外部样式两种写法" class="headerlink" title="拓展：外部样式两种写法"></a>拓展：外部样式两种写法</h3><ul>
<li><p>链接式：<code>html</code>（推荐）</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>导入式：<code>css2.1</code> 是 <code>css2.1</code> 特有的</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="keyword">@import</span> url(<span class="string">&quot;css/style.css&quot;</span>);</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>缺点：导入式会先显示结构，再去渲染；链接式是一起生效</p>
</li>
</ul>
<h1 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h1><blockquote>
<p>作用：选择页面上的某一个或者某一类元素</p>
</blockquote>
<h2 id="基本选择器"><a href="#基本选择器" class="headerlink" title="基本选择器"></a>基本选择器</h2><h3 id="标签选择器"><a href="#标签选择器" class="headerlink" title="标签选择器"></a>标签选择器</h3><blockquote>
<p>选择一类标签</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*标签选择器，会选择到页面上所有的这个标签的元素*/</span></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">    <span class="attribute">background</span>: antiquewhite;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">80px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="类选择器：class"><a href="#类选择器：class" class="headerlink" title="类选择器：class"></a>类选择器：<code>class</code></h3><ul>
<li><p>语法</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">类选择器的格式：</span><br><span class="line">.类的名称 &#123;</span><br><span class="line">   样式</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>好处</p>
<blockquote>
<p>好处：可以多个标签归类，是同一个class，可以复用；可以跨标签</p>
</blockquote>
</li>
<li><p>示例</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">*/</span><br><span class="line"><span class="selector-class">.title1</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.title2</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: blueviolet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="ID选择器"><a href="#ID选择器" class="headerlink" title="ID选择器"></a>ID选择器</h3><ul>
<li><p><code>ID</code> 一定要唯一</p>
</li>
<li><p>语法</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">id选择器：id必须保证全局唯一</span><br><span class="line">格式：</span><br><span class="line">#id名称 &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        id选择器：id必须保证全局唯一</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        格式：</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        #id名称 &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-css"></span></span></span><br><span class="line"><span class="comment"><span class="language-css">        &#125;     </span></span></span><br><span class="line"><span class="comment"><span class="language-css">        */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#title1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: blueviolet;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.title2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;title1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;title2&quot;</span>&gt;</span>标题1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;title2&quot;</span>&gt;</span>标题2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;title3&quot;</span>&gt;</span>标题3<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题4<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题5<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="优先级：-1"><a href="#优先级：-1" class="headerlink" title="优先级："></a>优先级：</h3><blockquote>
<p>不遵循就近原则，是固定的：</p>
<p><code>id选择器</code> &gt; <code>class选择器</code> &gt; <code>标签选择器</code></p>
</blockquote>
<h2 id="层次选择器"><a href="#层次选择器" class="headerlink" title="层次选择器"></a>层次选择器</h2><h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><img data-src="/2021/04/29/140/image-20210430121542153.png" class="" title="image-20210430121542153">

<h3 id="后代选择器：空格"><a href="#后代选择器：空格" class="headerlink" title="后代选择器：空格"></a>后代选择器：空格</h3><blockquote>
<p>在某个元素的后面，如：祖爷爷-&gt;爷爷-&gt;爸爸-&gt;你</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 后代选择器*/</span></span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="子选择器："><a href="#子选择器：" class="headerlink" title="子选择器： &gt;"></a>子选择器： <code>&gt;</code></h3><blockquote>
<p>只有一代，即儿子</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*子选择器*/</span></span><br><span class="line"><span class="selector-tag">body</span>&gt;<span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: blueviolet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="相邻兄弟选择器："><a href="#相邻兄弟选择器：" class="headerlink" title="相邻兄弟选择器：+"></a>相邻兄弟选择器：<code>+</code></h3><blockquote>
<p>同辈：哥哥，姐姐</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="comment">/*相邻兄弟选择器：只有一个，相邻：对下*/</span></span><br><span class="line">        <span class="selector-class">.activate</span> + <span class="selector-tag">p</span> &#123;</span><br><span class="line">            <span class="attribute">background</span>: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;p0&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span> class=&quot;activate&quot;&gt;p1&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;p2&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;p3&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;</span><br><span class="line">            &lt;<span class="selector-tag">p</span>&gt;p4&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">        &lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;</span><br><span class="line">            &lt;<span class="selector-tag">p</span>&gt;p5&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">        &lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;</span><br><span class="line">            &lt;<span class="selector-tag">p</span>&gt;p6&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">        &lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;<span class="selector-tag">p</span> class=&quot;activate&quot;&gt;p7&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;p8&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="通用选择器："><a href="#通用选择器：" class="headerlink" title="通用选择器：~"></a>通用选择器：<code>~</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*通用兄弟选择器：当前选中元素的向下的所有兄弟元素*/</span></span><br><span class="line"><span class="selector-class">.activate</span> ~ <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="结构伪类选择器"><a href="#结构伪类选择器" class="headerlink" title="结构伪类选择器"></a>结构伪类选择器</h2><h3 id="伪类选择器：xx-xxx"><a href="#伪类选择器：xx-xxx" class="headerlink" title="伪类选择器：xx:xxx {}"></a>伪类选择器：<code>xx:xxx &#123;&#125;</code></h3><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;!--避免使用class和id选择器--&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="comment">/*1. ul的第一个子元素*/</span></span><br><span class="line">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child &#123;</span><br><span class="line">            <span class="attribute">background</span>: red;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*2. ul的最后一个子元素*/</span></span><br><span class="line">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">            <span class="attribute">background</span>: green;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*3. 选中p1：定位到父元素，选择当前的第一个元素*/</span></span><br><span class="line">        <span class="comment">/*选择当前p元素的父级元素，选中父级元素的第一个元素，并且是当前元素才生效*/</span></span><br><span class="line">        <span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="attribute">background</span>: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*选择当前p元素的父级元素，选中父级元素类型是当前元素的第2个元素*/</span></span><br><span class="line">        <span class="selector-tag">p</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) &#123;</span><br><span class="line">            <span class="attribute">background</span>: blueviolet;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span>&gt;<span class="selector-tag">h1</span>&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;p1&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;p2&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;p3&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">li</span>&gt;li1&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">li</span>&gt;li2&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">li</span>&gt;li3&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<img data-src="/2021/04/29/140/image-20210430124751981.png" class="" title="image-20210430124751981">

<h2 id="属性选择器（常用）"><a href="#属性选择器（常用）" class="headerlink" title="属性选择器（常用）"></a>属性选择器（常用）</h2><blockquote>
<p><code>id</code> 和 <code>class</code> 结合</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.demo</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font</span>: blod <span class="number">20px</span>/<span class="number">50px</span> Arial;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*存在id属性的元素</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        格式：</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        a[属性名、属性名=属性值（值可以用正则）、属性名*=属性值（值可以用正则）] &#123;&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        =绝对等于</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        *= 包含这个值</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        ^= 以这个值开头</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        $= 以这个结尾</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span><span class="selector-attr">[id]</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*id=first的元素*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span><span class="selector-attr">[id=<span class="string">&quot;first&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*class有links的元素*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span><span class="selector-attr">[class*=<span class="string">&quot;links&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*选中href中以http开头的元素*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span><span class="selector-attr">[href^=<span class="string">&quot;http&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: blueviolet;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span><span class="selector-attr">[href$=<span class="string">&quot;pdf&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: rebeccapurple;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item first&quot;</span> <span class="attr">id</span>=<span class="string">&quot;first&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://qeuroal.top&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item activate&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">title</span>=<span class="string">&quot;test&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;images/123.html&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;images123.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;images123.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;abc&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/a.pdf&quot;</span>&gt;</span>7<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/abc.pdf&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/abc.doc&quot;</span>&gt;</span>9<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/abcd.doc&quot;</span> <span class="attr">class</span>=<span class="string">&quot;links item last&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img data-src="/2021/04/29/140/image-20210430131751945.png" class="" title="image-20210430131751945">

<h1 id="美化网页元素"><a href="#美化网页元素" class="headerlink" title="美化网页元素"></a>美化网页元素</h1><h2 id="为什么要美化网页"><a href="#为什么要美化网页" class="headerlink" title="为什么要美化网页"></a>为什么要美化网页</h2><ul>
<li>有效的传递页面信息</li>
<li>美化网页，页面漂亮才能吸引用户</li>
<li>凸显页面的主题</li>
<li>提高用户的体验</li>
</ul>
<h3 id="span标签"><a href="#span标签" class="headerlink" title="span标签"></a><code>span</code>标签</h3><blockquote>
<p>重点要突出的字，使用 <code>span</code> 套起来</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#title1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">欢迎学习 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;title1&quot;</span>&gt;</span>css<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="字体样式"><a href="#字体样式" class="headerlink" title="字体样式"></a>字体样式</h2><ul>
<li><p><code>px</code>：像素</p>
</li>
<li><p><code>em</code>：缩进</p>
</li>
<li><p>分开写：</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">font-family 字体</span></span><br><span class="line"><span class="comment">font-size 字体大小</span></span><br><span class="line"><span class="comment">font-weight 字体粗细</span></span><br><span class="line"><span class="comment">color 字体颜色</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#a13d30</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-family</span>: <span class="string">&quot;Consolas&quot;</span>, 楷体;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.p1</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>合并写</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--字体风格--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font</span>: oblique bolder <span class="number">18px</span> <span class="string">&quot;楷体&quot;</span> ;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="文本样式"><a href="#文本样式" class="headerlink" title="文本样式"></a>文本样式</h2><h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><p><code>color</code></p>
<ul>
<li>单词</li>
<li><code>rgb</code>：<code>0~F</code></li>
<li><code>rgba</code>：透明度, <code>0~1</code></li>
</ul>
<h3 id="文本对齐方式"><a href="#文本对齐方式" class="headerlink" title="文本对齐方式"></a>文本对齐方式</h3><p><code>text-align=center</code>排版：居中、左、右</p>
<h3 id="首行缩进"><a href="#首行缩进" class="headerlink" title="首行缩进"></a>首行缩进</h3><p><code>text-indent</code>： 段落首行缩进，一般是<code>2em</code>（首行缩进2字符）</p>
<h3 id="块高"><a href="#块高" class="headerlink" title="块高"></a>块高</h3><p> <code>height</code> 块高</p>
<h3 id="行高"><a href="#行高" class="headerlink" title="行高"></a>行高</h3><p><code>line-height</code>：单行文字上下居中<code>line-height=height</code></p>
<h3 id="装饰"><a href="#装饰" class="headerlink" title="装饰"></a>装饰</h3><p><code>text-decoration</code></p>
<h3 id="文本图片水平对齐"><a href="#文本图片水平对齐" class="headerlink" title="文本图片水平对齐"></a>文本图片水平对齐</h3><p><code>vertical-align: middle;</code></p>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    颜色：</span></span><br><span class="line"><span class="comment">        单词</span></span><br><span class="line"><span class="comment">        RGB：0~F</span></span><br><span class="line"><span class="comment">        RGBA：透明度, 0~1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    text-align 排版：居中、左、右</span></span><br><span class="line"><span class="comment">    text-indent 段落首行缩进，一般是2em（首行缩进2字符）</span></span><br><span class="line"><span class="comment">    height 块高</span></span><br><span class="line"><span class="comment">    line-height 行高；和块的高度一致，就可以上下居中</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*color: rgba(0, 255, 255, 0.5);*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.p1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.p3</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*下划线*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.l1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: underline;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*中划线*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.l2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: line-through;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*上划线*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.l2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: underline;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*a标签（超链接）去下划线*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.img1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*水平对齐：参照物，a和b对齐*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">img</span>, <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">vertical-align</span>: middle;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>故事介绍<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>hell<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;l1&quot;</span>&gt;</span>123123421<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;l2&quot;</span>&gt;</span>123123421<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;l3&quot;</span>&gt;</span>123123421<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p1&quot;</span>&gt;</span></span><br><span class="line">    平静安详的元泱境界，每隔333年，总会有一个神秘而恐怖的异常生物重生，它就是魁拔！魁拔的每一次出现，都会给元泱境界带来巨大的灾难！即便是天界的神族，也在劫难逃。在天地两界各种力量的全力打击下，魁拔一次次被消灭，但又总是按333年的周期重新出现。魁拔纪元1664年，天神经过精确测算后，在第六代魁拔苏醒前一刻对其进行毁灭性打击。但谁都没有想到，由于一个差错导致新一代魁拔成功地逃脱了致命一击。很快，天界魁拔司和地界神圣联盟均探测到了魁拔依然生还的迹象。因此，找到魁拔，彻底消灭魁拔，再一次成了各地热血勇士的终极目标。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span></span><br><span class="line">    在偏远的兽国窝窝乡，蛮大人和蛮吉每天为取得象征成功和光荣的妖侠纹耀而刻苦修炼，却把他们生活的村庄搅得鸡犬不宁。村民们绞尽脑汁把他们赶走。一天，消灭魁拔的征兵令突然传到窝窝乡，村长趁机怂恿蛮大人和蛮吉从军参战。然而，在这个一切都凭纹耀说话的世界，仅凭蛮大人现有的一块杂牌纹耀，不要说参军，就连住店的资格都没有。受尽歧视的蛮吉和蛮大人决定，混上那艘即将启程去消灭魁拔的巨型战舰，直接挑战魁拔，用热血换取至高的荣誉。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p3&quot;</span>&gt;</span></span><br><span class="line">    If you eone to wipe your tears, guess what? I&#x27;ll be there. William Shakespeare</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/img1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;img1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>aaaaaaaaaaa<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h2><img data-src="/2021/04/29/140/image-20210430191520534.png" class="" title="image-20210430191520534">

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*text-shadow</span></span><br><span class="line"><span class="comment">params: 阴影颜色，水平偏移，垂直偏移，阴影半径</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-id">#price</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#20c1b4</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="超链接伪类"><a href="#超链接伪类" class="headerlink" title="超链接伪类"></a>超链接伪类</h2><blockquote>
<p>正常情况下，<code>a</code>，<code>a:hover</code></p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*鼠标悬浮的状态（只需要记住hover）*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*鼠标按住未释放的状态*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: mediumseagreen;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: blueviolet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">list-style:</span></span><br><span class="line"><span class="comment">    none 去掉圆点</span></span><br><span class="line"><span class="comment">    circle 空心圆</span></span><br><span class="line"><span class="comment">    decimal 有序列表（数字）</span></span><br><span class="line"><span class="comment">    square 正方形</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><h3 id="背景颜色"><a href="#背景颜色" class="headerlink" title="背景颜色"></a>背景颜色</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background</span>: <span class="number">#a0a0a0</span>;</span><br></pre></td></tr></table></figure>

<h3 id="背景图片"><a href="#背景图片" class="headerlink" title="背景图片"></a>背景图片</h3><h4 id="法一"><a href="#法一" class="headerlink" title="法一"></a>法一</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">1000px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">700px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*默认：全部平铺 repeat*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;images/pdx.jpg&quot;</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.div1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-repeat</span>: repeat-x;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.div2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-repeat</span>: repeat-y;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.div3</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-repeat</span>: no-repeat;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="法二"><a href="#法二" class="headerlink" title="法二"></a>法二</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*颜色 图片 图片位置 平铺方式*/</span></span><br><span class="line"><span class="attribute">background</span>: red <span class="built_in">url</span>(<span class="string">&quot;../images/down.png&quot;</span>) <span class="number">270px</span> <span class="number">10px</span> no-repeat;</span><br></pre></td></tr></table></figure>

<h2 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h2><p><a target="_blank" rel="noopener" href="https://www.grabient.com/">网站</a></p>
<h1 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h1><h2 id="什么是盒子"><a href="#什么是盒子" class="headerlink" title="什么是盒子"></a>什么是盒子</h2><img data-src="/2021/04/29/140/image-20210430201421527.png" class="" title="image-20210430201421527">

<ul>
<li><p><code>margin</code>：外边距</p>
 <img data-src="/2021/04/29/140/image-20210430201717796.png" class="" title="image-20210430201717796">

<blockquote>
<p>所有的 <code>body</code> 的 <code>margin</code> 默认为8</p>
</blockquote>
</li>
<li><p><code>padding</code>：内边距</p>
</li>
<li><p><code>border</code>：边框</p>
</li>
</ul>
<h2 id="边框"><a href="#边框" class="headerlink" title="边框"></a>边框</h2><ul>
<li>边框的粗细</li>
<li>边框的样式</li>
<li>边框的颜色</li>
</ul>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*常见操作*/</span></span><br><span class="line"><span class="selector-tag">h1</span>, <span class="selector-tag">ul</span>, <span class="selector-tag">li</span>, <span class="selector-tag">a</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="comment">/*body总有一个默认的外边距margin: 0*/</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="comment">/*border</span></span><br><span class="line"><span class="comment">    params：粗细，样式（实线/虚线），颜色</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">3px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#4986ee</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#a0a0a0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">1</span>) <span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) <span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> dashed blueviolet;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">3</span>) <span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> dashed green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="内外边距"><a href="#内外边距" class="headerlink" title="内外边距"></a>内外边距</h2><h3 id="margin-padding-参数"><a href="#margin-padding-参数" class="headerlink" title="margin, padding 参数"></a><code>margin</code>, <code>padding</code> 参数</h3><ul>
<li>一个参数：上下左右</li>
<li>两个参数：上下、左右</li>
<li>四个参数：上、左、下、右（顺时针）</li>
</ul>
<h3 id="盒子的计算方式"><a href="#盒子的计算方式" class="headerlink" title="盒子的计算方式"></a>盒子的计算方式</h3><blockquote>
<p>你这个元素到底多大？</p>
<p>美工+前端</p>
</blockquote>
<img data-src="/2021/04/29/140/image-20210430205036962.png" class="" title="image-20210430205036962">

<p>盒子最终大小：<code>margin + border + padding + 内容的大小</code>（上图内容的大小为：<code>296*22</code>）</p>
<h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--外边距的妙用：居中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*border</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            params：粗细，样式（实线/虚线），颜色</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">3px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*margin</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            一个参数：上下左右</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            两个参数：上下、左右</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            四个参数：上、左、下、右（顺时针）</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto ;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#4986ee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*上下左右都为0*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">form</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#a0a0a0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid blueviolet;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--div为了层次更清楚；id=&quot;app&quot;：在vue里面id设置为app，代表一个应用，整个应用不是在body里面，而是在div里面，是需要定位的--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>会员登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--里面的属性都用div包起来--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>姓名：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>密码：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>邮箱：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="圆角边框"><a href="#圆角边框" class="headerlink" title="圆角边框"></a>圆角边框</h2><blockquote>
<p> 有4个角</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid red;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    一个参数：所有角</span></span><br><span class="line"><span class="comment">    两个参数：左上 右下、右上  左下</span></span><br><span class="line"><span class="comment">    四个参数：左上 右上 右下 左下（顺时针方向）；而且一个参数管一个角，以及对应的两边的边长如下图</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">/*圆圈：圆角=宽度的一半*/</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="圆形"><a href="#圆形" class="headerlink" title="圆形"></a>圆形</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">    <span class="comment">/*border不在设定的长宽，所以得用border-radius也得算上去，这里给去了</span></span><br><span class="line"><span class="comment">    /*border: 10px solid red;*/</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50px</span> <span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里是半圆形：可以这样理解：<code>border-radius</code>只控制半径为参数的那个 <code>1/4</code>的圆，<code>width</code> 和 <code>height</code> 控制的是区域的大小</p>
</blockquote>
<h2 id="阴影-1"><a href="#阴影-1" class="headerlink" title="阴影"></a>阴影</h2><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><ul>
<li><p><code>img</code>是内联元素 ，所以无法使用 <code>margin: 0 auto;</code> 居中</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">75px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">100px</span> yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 <img data-src="/2021/04/29/140/image-20210501111143936.png" class="" title="image-20210501111143936">

<p> 所以用 <code>margin: 0 auto;</code> 居中</p>
<p> 要求：</p>
<ul>
<li>外面是块元素</li>
<li>块元素有固定的宽度</li>
</ul>
</li>
</ul>
<blockquote>
<p> <code>div</code>的外层是<code>body</code>可以使用 <code>margin: 0 auto;</code>居中，因为<code>body</code> 是块元素，如果想让body里面的所有元素居中，可以这样</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid red;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>设置：<code>text-align:center</code></p>
</blockquote>
<ul>
<li><p>让内联 元素居中方法：</p>
<ul>
<li><p>块元素设置 <code>text-align:center</code>，使块内所有元素居中</p>
</li>
<li><p>将内联元素设置为块元素： <code>display: block</code></p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">75px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">100px</span> yellow;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h1 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h1><h2 id="标准文档流"><a href="#标准文档流" class="headerlink" title="标准文档流"></a>标准文档流</h2><ul>
<li><p>不局部：自上而下的拼</p>
 <img data-src="/2021/04/29/140/image-20210501124921960.png" class="" title="image-20210501124921960">
</li>
<li><p>布局过：</p>
 <img data-src="/2021/04/29/140/image-20210501124903967.png" class="" title="image-20210501124903967">
</li>
<li><p>块级元素：独占一行，且只有块元素设置大小才能被显示</p>
<ul>
<li><code>h1~h6</code></li>
<li><code>p</code></li>
<li><code>div</code></li>
<li><code>列表</code></li>
<li>……</li>
</ul>
</li>
<li><p>行内元素（内联元素）：不独占一行</p>
<ul>
<li><code>span</code></li>
<li><code>a</code></li>
<li><code>img</code></li>
<li><code>strong</code></li>
<li>……</li>
</ul>
</li>
</ul>
<blockquote>
<p>行内元素可以包含在块级元素里面，但是块级元素不能包含在行内元素里面</p>
</blockquote>
<h2 id="display"><a href="#display" class="headerlink" title="display"></a><code>display</code></h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    inline-block 既是行内元素又是块元素（保持块元素的特性，可以写在一行）</span></span><br><span class="line"><span class="comment">    block 块元素</span></span><br><span class="line"><span class="comment">    inline 行内元素</span></span><br><span class="line"><span class="comment">    none 消失</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这个也是一种实现行内元素排列的方式，但我们很多情况都是用 <code>float</code></p>
</blockquote>
<h2 id="float"><a href="#float" class="headerlink" title="float"></a><code>float</code></h2><ul>
<li><p>左右浮动：float</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#000</span> solid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.layer01</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span> dashed;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">clear</span>:both;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.layer02</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#00f</span> dashed;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">clear</span>:both;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.layer03</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#060</span> dashed;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">clear</span>:both;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.layer04</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#666</span> dashed;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="comment">/*float: right;*/</span></span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">23px</span>;</span><br><span class="line">    <span class="attribute">clear</span>:both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="父级边框塌陷的问题"><a href="#父级边框塌陷的问题" class="headerlink" title="父级边框塌陷的问题"></a>父级边框塌陷的问题</h2><h3 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h3><ul>
<li><code>right</code>: 右侧不允许有浮动元素，如果有，排到下面去（下同）</li>
<li><code>left</code>: 左侧不允许有浮动元素</li>
<li><code>both</code>: 两侧允许有浮动元素</li>
<li><code>none</code>:</li>
</ul>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><ol>
<li><p>增加父级元素高度</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#000</span> solid;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">800px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>增加一个空的 <code>div</code> 标签，清除浮动</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer01&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer02&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/5.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer03&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer04&quot;</span>&gt;</span></span><br><span class="line">        浮动的盒子可以向左浮动，也可以向右浮动，直到它的外边缘碰到包含框或另一个浮动盒子位置</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clear&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clear</span> &#123;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>overflow</code></p>
<ul>
<li><p><code>params</code>:</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hidden: 隐藏</span><br><span class="line">scroll: 滚动条</span><br><span class="line">auto: </span><br></pre></td></tr></table></figure>

</li>
<li><p>在父级元素中增加一个<code>overflow: hidden</code> </p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#000</span> solid;</span><br><span class="line">    <span class="comment">/*height: 800px;*/</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>父类添加一个伪类：<code>after</code> （推荐）</p>
<p>可以避免空 <code>div</code> </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#app</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>小结</p>
<ul>
<li><p>浮动元素后面增加空 <code>div</code></p>
<p> 优势</p>
<ul>
<li>简单</li>
</ul>
<p> 劣势：</p>
<ul>
<li>代码中尽量避免空 <code>div</code></li>
</ul>
</li>
<li><p>设置父元素的高度</p>
<p> 优势：</p>
<ul>
<li>简单</li>
</ul>
<p> 劣势：</p>
<ul>
<li>元素假设有了固定的高度，就会被限制</li>
</ul>
</li>
<li><p><code>overflow: hidden</code></p>
<p> 优势：</p>
<ul>
<li>简单</li>
</ul>
<p> 劣势：</p>
<ul>
<li><p>下拉的一些场景避免使用</p>
</li>
<li><p>如果超出，就会被切掉，但是宁愿被切掉，也不要滚动条，很诡异</p>
</li>
</ul>
</li>
<li><p>父类添加一个伪类：<code>after</code></p>
<p> 优势：</p>
<ul>
<li>写法稍微复杂一点，但是没有副作用，推荐使用</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h2><ul>
<li><code>display</code><ul>
<li>方向不可控</li>
<li>不用管理父级边框塌陷</li>
</ul>
</li>
<li><code>float</code><ul>
<li>浮动起来的话会脱离标准文档流，所以要解决父级边框塌陷的问题</li>
</ul>
</li>
</ul>
<h1 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h1><h2 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h2><ul>
<li><p><code>position: reletive</code></p>
</li>
<li><p>相对定位：相对于自己原来的位置进行偏移，相对定位的话，它仍然在标准文档流中，它原来的位置会被保留</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*距离上面-20px*/</span></span><br><span class="line"><span class="attribute">top</span>: -<span class="number">20px</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">bottom</span>: -<span class="number">10px</span>;</span><br><span class="line"><span class="attribute">right</span>: <span class="number">20px</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--相对定位：相对于自己原来的位置进行偏移--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#first</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#a0a0a0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#b61818</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*相对定位：上下左右*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*距离上面-20px*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#second</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#e2cccc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#59b631</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#third</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#eade86</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#bb21d5</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: -<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;first&quot;</span>&gt;</span>第1个盒子<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;second&quot;</span>&gt;</span>第2个盒子<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;third&quot;</span>&gt;</span>第3个盒子<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><p>实现</p>
<img data-src="/2021/04/29/140/image-20210501155714232.png" class="" title="image-20210501155714232">

<p>代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#ea85c2</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*加了border位置就不准了，因为border+内容的大小才是整个元素的大小*/</span></span></span><br><span class="line"><span class="language-css">            <span class="comment">/*border: 1px solid #000000;*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#0c91ea</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a2</span>, <span class="selector-class">.a4</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a3</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a5</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a1&quot;</span>&gt;</span>链接1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a2&quot;</span>&gt;</span>链接2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a3&quot;</span>&gt;</span>链接3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a4&quot;</span>&gt;</span>链接4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;a5&quot;</span>&gt;</span>链接5<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h2><ul>
<li>定位：基于<code>xxx</code>定位，只有上下左右<ul>
<li>没有父级元素定位的前提下，相对于浏览器定位；</li>
<li>父级元素存在定位，我们通常相对于父级元素进行偏移；</li>
<li>在父级元素范围内移动</li>
</ul>
</li>
<li>相对于父级或浏览器的位置进行偏移，绝对定位的话，它不在标准文档流中，它原来的位置不会被保留</li>
</ul>
<h2 id="固定定位"><a href="#固定定位" class="headerlink" title="固定定位"></a>固定定位</h2><ul>
<li><p>定位：无论怎么走，都在固定位置</p>
</li>
<li><p>示例</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">1000px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#ef67ad</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*绝对定位：相对于浏览器*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#3383d9</span>;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*固定定位：定死了；很多导航栏不动，就是通过固定定位来实现的*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="z-index"><a href="#z-index" class="headerlink" title="z-index"></a><code>z-index</code></h2><h3 id="理解图层"><a href="#理解图层" class="headerlink" title="理解图层"></a>理解图层</h3><img data-src="/2021/04/29/140/image-20210501183214849.png" class="" title="image-20210501183214849">

<h3 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h3><blockquote>
<p><code>z-index</code>:默认是<code>0</code>，最高无限；习惯用<code>999</code>代表最高层</p>
</blockquote>
<ul>
<li><p><code>html</code></p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/bg.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;tipText&quot;</span>&gt;</span>学习微服务，找狂神<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;tipBg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>时间：2021-1-1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>地点：卢浮宫<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>css</code></p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">320px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> black solid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span>, <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*父级元素相对定位*/</span></span><br><span class="line"><span class="selector-id">#app</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tipText</span>, <span class="selector-class">.tipBg</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">320px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">167px</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tipText</span> &#123;</span><br><span class="line">    <span class="comment">/*最低为0*/</span></span><br><span class="line">    <span class="comment">/*z-index: 999;*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tipBg</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: black;</span><br><span class="line">    <span class="comment">/*背景透明度*/</span></span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">    <span class="comment">/*现在一般不可以用，早期可以用*/</span></span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">alpha</span>(opacity=<span class="number">50</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h1><p>菜鸟教程</p>
<p><code>canvas</code> 动画：<a target="_blank" rel="noopener" href="https://www.html5tricks.com/">点击这里</a></p>
<p><code>卡巴斯基安全监控网站</code>：<a target="_blank" rel="noopener" href="https://cybermap.kaspersky.com/cn">点击这里</a></p>
<p><code>源码之家</code>：<a target="_blank" rel="noopener" href="https://www.mycodes.net/">点击这里</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Qeuroal</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/Qeuroal" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.24/fancybox/fancybox.umd.js" integrity="sha256-oyhjPiYRWGXaAt+ny/mTMWOnN1GBoZDUQnzzgC7FRI4=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
